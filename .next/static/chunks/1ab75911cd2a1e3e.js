(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,88760,e=>{"use strict";var t=e.i(43476),r=e.i(71645),n=e.i(18566),i=e.i(22016),a=e.i(13066);e.i(47167);var s=e.i(60289),o=e.i(1928),l=e.i(61911),d=e.i(26707),c=e.i(39616),u=e.i(92270),p=e.i(63727),x=e.i(86311),m=e.i(91741),f=e.i(30030),h=e.i(30207),v=e.i(34620),b=e.i(48425),w="Avatar",[g,y]=(0,f.createContextScope)(w),[j,N]=g(w),E=r.forwardRef((e,n)=>{let{__scopeAvatar:i,...a}=e,[s,o]=r.useState("idle");return(0,t.jsx)(j,{scope:i,imageLoadingStatus:s,onImageLoadingStatusChange:o,children:(0,t.jsx)(b.Primitive.span,{...a,ref:n})})});E.displayName=w;var C="AvatarImage",S=r.forwardRef((e,n)=>{let{__scopeAvatar:i,src:a,onLoadingStatusChange:s=()=>{},...o}=e,l=N(C,i),d=function(e,t){let[n,i]=r.useState("idle");return(0,v.useLayoutEffect)(()=>{if(!e)return void i("error");let r=!0,n=new window.Image,a=e=>()=>{r&&i(e)};return i("loading"),n.onload=a("loaded"),n.onerror=a("error"),n.src=e,t&&(n.referrerPolicy=t),()=>{r=!1}},[e,t]),n}(a,o.referrerPolicy),c=(0,h.useCallbackRef)(e=>{s(e),l.onImageLoadingStatusChange(e)});return(0,v.useLayoutEffect)(()=>{"idle"!==d&&c(d)},[d,c]),"loaded"===d?(0,t.jsx)(b.Primitive.img,{...o,ref:n,src:a}):null});S.displayName=C;var T="AvatarFallback",R=r.forwardRef((e,n)=>{let{__scopeAvatar:i,delayMs:a,...s}=e,o=N(T,i),[l,d]=r.useState(void 0===a);return r.useEffect(()=>{if(void 0!==a){let e=window.setTimeout(()=>d(!0),a);return()=>window.clearTimeout(e)}},[a]),l&&"loaded"!==o.imageLoadingStatus?(0,t.jsx)(b.Primitive.span,{...s,ref:n}):null});R.displayName=T;var k=e.i(75157);function P({className:e,...r}){return(0,t.jsx)(E,{"data-slot":"avatar",className:(0,k.cn)("relative flex size-8 shrink-0 overflow-hidden rounded-full",e),...r})}function L({className:e,...r}){return(0,t.jsx)(S,{"data-slot":"avatar-image",className:(0,k.cn)("aspect-square size-full",e),...r})}function D({className:e,...r}){return(0,t.jsx)(R,{"data-slot":"avatar-fallback",className:(0,k.cn)("bg-muted flex size-full items-center justify-center rounded-full",e),...r})}var M=e.i(19455),I=e.i(83814),A=e.i(11605);e.i(51718);var F=e.i(18357);let _=[{title:"Dashboard",url:"/admin",icon:s.LayoutDashboard},{title:"Orders",url:"/admin/orders",icon:o.ShoppingCart},{title:"Technicians",url:"/admin/technicians",icon:l.Users},{title:"Inventory",url:"/admin/inventory",icon:d.Smartphone}],z=[{title:"Contact Inbox",url:"/admin/inbox/contact",icon:x.MessageSquare},{title:"Corporate Requests",url:"/admin/inbox/corporate",icon:p.Briefcase},{title:"Technician Requests",url:"/admin/requests",icon:m.ClipboardList}],H=[{title:"Settings",url:"/admin/settings",icon:c.Settings}];function K({...e}){let r=(0,n.usePathname)(),s=(0,n.useRouter)(),o=(0,I.useT)(),l=async()=>{if(A.isMockMode){localStorage.removeItem("mock_admin_user"),s.push("/admin/login");return}await (0,F.signOut)(A.auth),s.push("/admin/login")};return(0,t.jsxs)(a.Sidebar,{collapsible:"icon",...e,children:[(0,t.jsx)(a.SidebarHeader,{children:(0,t.jsxs)("div",{className:"flex items-center gap-2 p-2",children:[(0,t.jsx)("div",{className:"flex aspect-square size-8 items-center justify-center rounded-lg bg-cyan-500 text-sidebar-primary-foreground",children:(0,t.jsx)("span",{className:"font-bold text-white",children:"KBI"})}),(0,t.jsxs)("div",{className:"grid flex-1 text-left text-sm leading-tight",children:[(0,t.jsx)("span",{className:"truncate font-semibold",children:o("Admin Panel")}),(0,t.jsx)("span",{className:"truncate text-xs",children:o("Repair Services")})]})]})}),(0,t.jsxs)(a.SidebarContent,{children:[(0,t.jsxs)(a.SidebarGroup,{children:[(0,t.jsx)(a.SidebarGroupLabel,{children:o("Management")}),(0,t.jsx)(a.SidebarGroupContent,{children:(0,t.jsx)(a.SidebarMenu,{children:_.map(e=>(0,t.jsx)(a.SidebarMenuItem,{children:(0,t.jsx)(a.SidebarMenuButton,{asChild:!0,isActive:r===e.url,tooltip:o(e.title),children:(0,t.jsxs)(i.default,{href:e.url,children:[(0,t.jsx)(e.icon,{}),(0,t.jsx)("span",{children:o(e.title)})]})})},e.title))})})]}),(0,t.jsxs)(a.SidebarGroup,{children:[(0,t.jsx)(a.SidebarGroupLabel,{children:o("Inbox")}),(0,t.jsx)(a.SidebarGroupContent,{children:(0,t.jsx)(a.SidebarMenu,{children:z.map(e=>(0,t.jsx)(a.SidebarMenuItem,{children:(0,t.jsx)(a.SidebarMenuButton,{asChild:!0,isActive:r===e.url,tooltip:o(e.title),children:(0,t.jsxs)(i.default,{href:e.url,children:[(0,t.jsx)(e.icon,{}),(0,t.jsx)("span",{children:o(e.title)})]})})},e.title))})})]}),(0,t.jsxs)(a.SidebarGroup,{children:[(0,t.jsx)(a.SidebarGroupLabel,{children:o("Configuration")}),(0,t.jsx)(a.SidebarGroupContent,{children:(0,t.jsx)(a.SidebarMenu,{children:H.map(e=>(0,t.jsx)(a.SidebarMenuItem,{children:(0,t.jsx)(a.SidebarMenuButton,{asChild:!0,isActive:r===e.url,tooltip:o(e.title),children:(0,t.jsxs)(i.default,{href:e.url,children:[(0,t.jsx)(e.icon,{}),(0,t.jsx)("span",{children:o(e.title)})]})})},e.title))})})]})]}),(0,t.jsx)(a.SidebarFooter,{children:(0,t.jsx)(a.SidebarMenu,{children:(0,t.jsx)(a.SidebarMenuItem,{children:(0,t.jsxs)("div",{className:"flex items-center gap-3 p-2",children:[(0,t.jsxs)(P,{className:"h-8 w-8 rounded-lg",children:[(0,t.jsx)(L,{src:"/placeholder-user.jpg",alt:"Admin"}),(0,t.jsx)(D,{className:"rounded-lg",children:"AD"})]}),(0,t.jsxs)("div",{className:"grid flex-1 text-left text-sm leading-tight",children:[(0,t.jsx)("span",{className:"truncate font-semibold",children:o("Admin User")}),(0,t.jsx)("span",{className:"truncate text-xs",children:"info@kbi.services"})]}),(0,t.jsx)(M.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 ml-auto",onClick:l,children:(0,t.jsx)(u.LogOut,{className:"size-4"})})]})})})}),(0,t.jsx)(a.SidebarRail,{})]})}var B=e.i(31278),q=e.i(75254);let O=(0,q.default)("Inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]]);var G=e.i(7486);let U=(0,q.default)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);var V=e.i(55146),$=e.i(87486);e.i(36180);var X=e.i(98925),W=e.i(94913);function Y({role:e="admin"}){let[n,i]=(0,r.useState)([]),[a,s]=(0,r.useState)(0);(0,r.useEffect)(()=>{if(!A.auth.currentUser)return;if(A.isMockMode){i([]),s(0);return}let t=(0,X.query)((0,X.collection)(A.db,"notifications"),(0,X.where)("role","==",e),(0,X.orderBy)("createdAt","desc"),(0,X.limit)(20)),r=(0,X.onSnapshot)(t,e=>{let t=e.docs.map(e=>({id:e.id,...e.data()}));i(t),s(t.filter(e=>!e.read).length)},e=>{k.logger.error("Notification subscription error:",e)});return()=>r()},[e]);let o=async e=>{try{await (0,X.updateDoc)((0,X.doc)(A.db,"notifications",e),{read:!0})}catch(e){k.logger.error("Error marking as read:",e)}};return(0,t.jsxs)(V.DropdownMenu,{children:[(0,t.jsx)(V.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsxs)(M.Button,{variant:"ghost",size:"icon",className:"relative",children:[(0,t.jsx)(U,{className:"h-5 w-5 text-white/70 hover:text-white"}),a>0&&(0,t.jsx)($.Badge,{className:"absolute -top-1 -right-1 h-5 w-5 flex items-center justify-center p-0 bg-red-500 text-white text-xs",children:a>9?"9+":a})]})}),(0,t.jsxs)(V.DropdownMenuContent,{align:"end",className:"w-80 bg-zinc-900 border-zinc-800 text-white",children:[(0,t.jsxs)(V.DropdownMenuLabel,{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{children:"Notifications"}),a>0&&(0,t.jsxs)("span",{className:"text-xs text-white/50",children:[a," unread"]})]}),(0,t.jsx)(V.DropdownMenuSeparator,{className:"bg-zinc-800"}),0===n.length?(0,t.jsx)("div",{className:"py-8 text-center text-white/50 text-sm",children:"No notifications"}):(0,t.jsx)("div",{className:"max-h-[400px] overflow-y-auto",children:n.map(e=>(0,t.jsxs)(V.DropdownMenuItem,{onClick:()=>{e.read||o(e.id),e.link&&(window.location.href=e.link)},className:`flex flex-col items-start gap-1 p-3 cursor-pointer hover:bg-white/5 ${!e.read?"bg-cyan-500/5 border-l-2 border-cyan-500":""}`,children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 w-full",children:[(0,t.jsx)("span",{children:(e=>{switch(e){case"order_created":return"ðŸ›’";case"status_update":return"ðŸ“";case"assignment":return"ðŸ‘¤";case"low_stock":return"âš ï¸";default:return"ðŸ””"}})(e.type)}),(0,t.jsx)("span",{className:`font-medium text-sm flex-1 ${!e.read?"text-white":"text-white/70"}`,children:e.title}),!e.read&&(0,t.jsx)("div",{className:"w-2 h-2 rounded-full bg-cyan-500"})]}),(0,t.jsx)("p",{className:"text-xs text-white/50 pl-6 line-clamp-2",children:e.message}),(0,t.jsx)("span",{className:"text-[10px] text-white/30 pl-6",children:(e=>{if(!e)return"";let t=e.toDate?e.toDate():new Date(e);return(0,W.formatDistanceToNow)(t,{addSuffix:!0})})(e.createdAt)})]},e.id))}),n.length>0&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(V.DropdownMenuSeparator,{className:"bg-zinc-800"}),(0,t.jsx)(V.DropdownMenuItem,{className:"justify-center text-cyan-500 hover:text-cyan-400",children:"View all notifications"})]})]})]})}var J=e.i(74911),Q=e.i(74080),Z=e.i(81140),ee=e.i(20783),et=e.i(75830),er=e.i(26330),en=e.i(74606),ei=e.i(96626),ea=e.i(69340),es=e.i(59411),eo="ToastProvider",[el,ed,ec]=(0,et.createCollection)("Toast"),[eu,ep]=(0,f.createContextScope)("Toast",[ec]),[ex,em]=eu(eo),ef=e=>{let{__scopeToast:n,label:i="Notification",duration:a=5e3,swipeDirection:s="right",swipeThreshold:o=50,children:l}=e,[d,c]=r.useState(null),[u,p]=r.useState(0),x=r.useRef(!1),m=r.useRef(!1);return i.trim()||console.error(`Invalid prop \`label\` supplied to \`${eo}\`. Expected non-empty \`string\`.`),(0,t.jsx)(el.Provider,{scope:n,children:(0,t.jsx)(ex,{scope:n,label:i,duration:a,swipeDirection:s,swipeThreshold:o,toastCount:u,viewport:d,onViewportChange:c,onToastAdd:r.useCallback(()=>p(e=>e+1),[]),onToastRemove:r.useCallback(()=>p(e=>e-1),[]),isFocusedToastEscapeKeyDownRef:x,isClosePausedRef:m,children:l})})};ef.displayName=eo;var eh="ToastViewport",ev=["F8"],eb="toast.viewportPause",ew="toast.viewportResume",eg=r.forwardRef((e,n)=>{let{__scopeToast:i,hotkey:a=ev,label:s="Notifications ({hotkey})",...o}=e,l=em(eh,i),d=ed(i),c=r.useRef(null),u=r.useRef(null),p=r.useRef(null),x=r.useRef(null),m=(0,ee.useComposedRefs)(n,x,l.onViewportChange),f=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),h=l.toastCount>0;r.useEffect(()=>{let e=e=>{0!==a.length&&a.every(t=>e[t]||e.code===t)&&x.current?.focus()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[a]),r.useEffect(()=>{let e=c.current,t=x.current;if(h&&e&&t){let r=()=>{if(!l.isClosePausedRef.current){let e=new CustomEvent(eb);t.dispatchEvent(e),l.isClosePausedRef.current=!0}},n=()=>{if(l.isClosePausedRef.current){let e=new CustomEvent(ew);t.dispatchEvent(e),l.isClosePausedRef.current=!1}},i=t=>{e.contains(t.relatedTarget)||n()},a=()=>{e.contains(document.activeElement)||n()};return e.addEventListener("focusin",r),e.addEventListener("focusout",i),e.addEventListener("pointermove",r),e.addEventListener("pointerleave",a),window.addEventListener("blur",r),window.addEventListener("focus",n),()=>{e.removeEventListener("focusin",r),e.removeEventListener("focusout",i),e.removeEventListener("pointermove",r),e.removeEventListener("pointerleave",a),window.removeEventListener("blur",r),window.removeEventListener("focus",n)}}},[h,l.isClosePausedRef]);let v=r.useCallback(({tabbingDirection:e})=>{let t=d().map(t=>{let r=t.ref.current,n=[r,...function(e){let t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{let t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}(r)];return"forwards"===e?n:n.reverse()});return("forwards"===e?t.reverse():t).flat()},[d]);return r.useEffect(()=>{let e=x.current;if(e){let t=t=>{let r=t.altKey||t.ctrlKey||t.metaKey;if("Tab"===t.key&&!r){let r=document.activeElement,n=t.shiftKey;if(t.target===e&&n)return void u.current?.focus();let i=v({tabbingDirection:n?"backwards":"forwards"}),a=i.findIndex(e=>e===r);ez(i.slice(a+1))?t.preventDefault():n?u.current?.focus():p.current?.focus()}};return e.addEventListener("keydown",t),()=>e.removeEventListener("keydown",t)}},[d,v]),(0,t.jsxs)(er.Branch,{ref:c,role:"region","aria-label":s.replace("{hotkey}",f),tabIndex:-1,style:{pointerEvents:h?void 0:"none"},children:[h&&(0,t.jsx)(ej,{ref:u,onFocusFromOutsideViewport:()=>{ez(v({tabbingDirection:"forwards"}))}}),(0,t.jsx)(el.Slot,{scope:i,children:(0,t.jsx)(b.Primitive.ol,{tabIndex:-1,...o,ref:m})}),h&&(0,t.jsx)(ej,{ref:p,onFocusFromOutsideViewport:()=>{ez(v({tabbingDirection:"backwards"}))}})]})});eg.displayName=eh;var ey="ToastFocusProxy",ej=r.forwardRef((e,r)=>{let{__scopeToast:n,onFocusFromOutsideViewport:i,...a}=e,s=em(ey,n);return(0,t.jsx)(es.VisuallyHidden,{"aria-hidden":!0,tabIndex:0,...a,ref:r,style:{position:"fixed"},onFocus:e=>{let t=e.relatedTarget;s.viewport?.contains(t)||i()}})});ej.displayName=ey;var eN="Toast",eE=r.forwardRef((e,r)=>{let{forceMount:n,open:i,defaultOpen:a,onOpenChange:s,...o}=e,[l=!0,d]=(0,ea.useControllableState)({prop:i,defaultProp:a,onChange:s});return(0,t.jsx)(ei.Presence,{present:n||l,children:(0,t.jsx)(eT,{open:l,...o,ref:r,onClose:()=>d(!1),onPause:(0,h.useCallbackRef)(e.onPause),onResume:(0,h.useCallbackRef)(e.onResume),onSwipeStart:(0,Z.composeEventHandlers)(e.onSwipeStart,e=>{e.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:(0,Z.composeEventHandlers)(e.onSwipeMove,e=>{let{x:t,y:r}=e.detail.delta;e.currentTarget.setAttribute("data-swipe","move"),e.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${t}px`),e.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${r}px`)}),onSwipeCancel:(0,Z.composeEventHandlers)(e.onSwipeCancel,e=>{e.currentTarget.setAttribute("data-swipe","cancel"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:(0,Z.composeEventHandlers)(e.onSwipeEnd,e=>{let{x:t,y:r}=e.detail.delta;e.currentTarget.setAttribute("data-swipe","end"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${t}px`),e.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${r}px`),d(!1)})})})});eE.displayName=eN;var[eC,eS]=eu(eN,{onClose(){}}),eT=r.forwardRef((e,n)=>{let{__scopeToast:i,type:a="foreground",duration:s,open:o,onClose:l,onEscapeKeyDown:d,onPause:c,onResume:u,onSwipeStart:p,onSwipeMove:x,onSwipeCancel:m,onSwipeEnd:f,...v}=e,w=em(eN,i),[g,y]=r.useState(null),j=(0,ee.useComposedRefs)(n,e=>y(e)),N=r.useRef(null),E=r.useRef(null),C=s||w.duration,S=r.useRef(0),T=r.useRef(C),R=r.useRef(0),{onToastAdd:k,onToastRemove:P}=w,L=(0,h.useCallbackRef)(()=>{g?.contains(document.activeElement)&&w.viewport?.focus(),l()}),D=r.useCallback(e=>{e&&e!==1/0&&(window.clearTimeout(R.current),S.current=new Date().getTime(),R.current=window.setTimeout(L,e))},[L]);r.useEffect(()=>{let e=w.viewport;if(e){let t=()=>{D(T.current),u?.()},r=()=>{let e=new Date().getTime()-S.current;T.current=T.current-e,window.clearTimeout(R.current),c?.()};return e.addEventListener(eb,r),e.addEventListener(ew,t),()=>{e.removeEventListener(eb,r),e.removeEventListener(ew,t)}}},[w.viewport,C,c,u,D]),r.useEffect(()=>{o&&!w.isClosePausedRef.current&&D(C)},[o,C,w.isClosePausedRef,D]),r.useEffect(()=>(k(),()=>P()),[k,P]);let M=r.useMemo(()=>g?function e(t){let r=[];return Array.from(t.childNodes).forEach(t=>{var n;if(t.nodeType===t.TEXT_NODE&&t.textContent&&r.push(t.textContent),(n=t).nodeType===n.ELEMENT_NODE){let n=t.ariaHidden||t.hidden||"none"===t.style.display,i=""===t.dataset.radixToastAnnounceExclude;if(!n)if(i){let e=t.dataset.radixToastAnnounceAlt;e&&r.push(e)}else r.push(...e(t))}}),r}(g):null,[g]);return w.viewport?(0,t.jsxs)(t.Fragment,{children:[M&&(0,t.jsx)(eR,{__scopeToast:i,role:"status","aria-live":"foreground"===a?"assertive":"polite","aria-atomic":!0,children:M}),(0,t.jsx)(eC,{scope:i,onClose:L,children:Q.createPortal((0,t.jsx)(el.ItemSlot,{scope:i,children:(0,t.jsx)(er.Root,{asChild:!0,onEscapeKeyDown:(0,Z.composeEventHandlers)(d,()=>{w.isFocusedToastEscapeKeyDownRef.current||L(),w.isFocusedToastEscapeKeyDownRef.current=!1}),children:(0,t.jsx)(b.Primitive.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":w.swipeDirection,...v,ref:j,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:(0,Z.composeEventHandlers)(e.onKeyDown,e=>{"Escape"===e.key&&(d?.(e.nativeEvent),e.nativeEvent.defaultPrevented||(w.isFocusedToastEscapeKeyDownRef.current=!0,L()))}),onPointerDown:(0,Z.composeEventHandlers)(e.onPointerDown,e=>{0===e.button&&(N.current={x:e.clientX,y:e.clientY})}),onPointerMove:(0,Z.composeEventHandlers)(e.onPointerMove,e=>{if(!N.current)return;let t=e.clientX-N.current.x,r=e.clientY-N.current.y,n=!!E.current,i=["left","right"].includes(w.swipeDirection),a=["left","up"].includes(w.swipeDirection)?Math.min:Math.max,s=i?a(0,t):0,o=i?0:a(0,r),l="touch"===e.pointerType?10:2,d={x:s,y:o},c={originalEvent:e,delta:d};n?(E.current=d,eF("toast.swipeMove",x,c,{discrete:!1})):e_(d,w.swipeDirection,l)?(E.current=d,eF("toast.swipeStart",p,c,{discrete:!1}),e.target.setPointerCapture(e.pointerId)):(Math.abs(t)>l||Math.abs(r)>l)&&(N.current=null)}),onPointerUp:(0,Z.composeEventHandlers)(e.onPointerUp,e=>{let t=E.current,r=e.target;if(r.hasPointerCapture(e.pointerId)&&r.releasePointerCapture(e.pointerId),E.current=null,N.current=null,t){let r=e.currentTarget,n={originalEvent:e,delta:t};e_(t,w.swipeDirection,w.swipeThreshold)?eF("toast.swipeEnd",f,n,{discrete:!0}):eF("toast.swipeCancel",m,n,{discrete:!0}),r.addEventListener("click",e=>e.preventDefault(),{once:!0})}})})})}),w.viewport)})]}):null}),eR=e=>{let{__scopeToast:n,children:i,...a}=e,s=em(eN,n),[o,l]=r.useState(!1),[d,c]=r.useState(!1);return function(e=()=>{}){let t=(0,h.useCallbackRef)(e);(0,v.useLayoutEffect)(()=>{let e=0,r=0;return e=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(e),window.cancelAnimationFrame(r)}},[t])}(()=>l(!0)),r.useEffect(()=>{let e=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(e)},[]),d?null:(0,t.jsx)(en.Portal,{asChild:!0,children:(0,t.jsx)(es.VisuallyHidden,{...a,children:o&&(0,t.jsxs)(t.Fragment,{children:[s.label," ",i]})})})},ek=r.forwardRef((e,r)=>{let{__scopeToast:n,...i}=e;return(0,t.jsx)(b.Primitive.div,{...i,ref:r})});ek.displayName="ToastTitle";var eP=r.forwardRef((e,r)=>{let{__scopeToast:n,...i}=e;return(0,t.jsx)(b.Primitive.div,{...i,ref:r})});eP.displayName="ToastDescription";var eL="ToastAction",eD=r.forwardRef((e,r)=>{let{altText:n,...i}=e;return n.trim()?(0,t.jsx)(eA,{altText:n,asChild:!0,children:(0,t.jsx)(eI,{...i,ref:r})}):(console.error(`Invalid prop \`altText\` supplied to \`${eL}\`. Expected non-empty \`string\`.`),null)});eD.displayName=eL;var eM="ToastClose",eI=r.forwardRef((e,r)=>{let{__scopeToast:n,...i}=e,a=eS(eM,n);return(0,t.jsx)(eA,{asChild:!0,children:(0,t.jsx)(b.Primitive.button,{type:"button",...i,ref:r,onClick:(0,Z.composeEventHandlers)(e.onClick,a.onClose)})})});eI.displayName=eM;var eA=r.forwardRef((e,r)=>{let{__scopeToast:n,altText:i,...a}=e;return(0,t.jsx)(b.Primitive.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":i||void 0,...a,ref:r})});function eF(e,t,r,{discrete:n}){let i=r.originalEvent.currentTarget,a=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&i.addEventListener(e,t,{once:!0}),n?(0,b.dispatchDiscreteCustomEvent)(i,a):i.dispatchEvent(a)}var e_=(e,t,r=0)=>{let n=Math.abs(e.x),i=Math.abs(e.y),a=n>i;return"left"===t||"right"===t?a&&n>r:!a&&i>r};function ez(e){let t=document.activeElement;return e.some(e=>e===t||(e.focus(),document.activeElement!==t))}var eH=e.i(25913),eK=e.i(37727);let eB=r.forwardRef(({className:e,...r},n)=>(0,t.jsx)(eg,{ref:n,className:(0,k.cn)("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...r}));eB.displayName=eg.displayName;let eq=(0,eH.cva)("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),eO=r.forwardRef(({className:e,variant:r,...n},i)=>(0,t.jsx)(eE,{ref:i,className:(0,k.cn)(eq({variant:r}),e),...n}));eO.displayName=eE.displayName,r.forwardRef(({className:e,...r},n)=>(0,t.jsx)(eD,{ref:n,className:(0,k.cn)("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...r})).displayName=eD.displayName;let eG=r.forwardRef(({className:e,...r},n)=>(0,t.jsx)(eI,{ref:n,className:(0,k.cn)("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...r,children:(0,t.jsx)(eK.X,{className:"h-4 w-4"})}));eG.displayName=eI.displayName;let eU=r.forwardRef(({className:e,...r},n)=>(0,t.jsx)(ek,{ref:n,className:(0,k.cn)("text-sm font-semibold",e),...r}));eU.displayName=ek.displayName;let eV=r.forwardRef(({className:e,...r},n)=>(0,t.jsx)(eP,{ref:n,className:(0,k.cn)("text-sm opacity-90",e),...r}));function e$(){let{toasts:e}=(0,J.useToast)();return(0,t.jsxs)(ef,{children:[e.map(function({id:e,title:r,description:n,action:i,...a}){return(0,t.jsxs)(eO,{...a,children:[(0,t.jsxs)("div",{className:"grid gap-1",children:[r&&(0,t.jsx)(eU,{children:r}),n&&(0,t.jsx)(eV,{children:n})]}),i,(0,t.jsx)(eG,{})]},e)}),(0,t.jsx)(eB,{})]})}function eX({children:e}){let{lang:u,setLang:p}=(0,I.useLanguage)(),x=(0,I.useT)(),f="ar"===u,h=(0,n.usePathname)(),v=(0,n.useRouter)(),[b,w]=(0,r.useState)(!0),[g,y]=(0,r.useState)(null),j=(0,r.useRef)(!1),N=async()=>{try{await (0,F.signOut)(A.auth)}finally{v.replace("/admin/login")}};return((0,r.useEffect)(()=>{let e=(0,F.onAuthStateChanged)(A.auth,e=>{y(e),w(!1),e||"/admin/login"===h||j.current||(j.current=!0,v.replace("/admin/login")),e&&"/admin/login"===h&&!j.current&&(j.current=!0,v.replace("/admin"))});return()=>e()},[h,v]),b)?(0,t.jsx)("div",{className:"min-h-screen bg-black flex items-center justify-center text-white",children:(0,t.jsx)(B.Loader2,{className:"w-8 h-8 animate-spin text-cyan-500"})}):"/admin/login"===h?(0,t.jsxs)("div",{className:(0,k.cn)("min-h-screen bg-black text-white",f&&"[direction:rtl]"),children:[(0,t.jsxs)("header",{className:"flex items-center gap-4 border-b border-white/10 bg-black/50 px-6 py-3 backdrop-blur-md sticky top-0 z-10",children:[(0,t.jsx)("div",{className:"flex-1"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("button",{onClick:()=>p("en"),className:(0,k.cn)("px-3 py-1 rounded-full text-xs font-semibold border border-white/10 transition-colors","en"===u?"bg-cyan-500 text-black border-cyan-500":"text-white/70 hover:bg-white/10"),children:"EN"}),(0,t.jsx)("button",{onClick:()=>p("ar"),className:(0,k.cn)("px-3 py-1 rounded-full text-xs font-semibold border border-white/10 transition-colors","ar"===u?"bg-cyan-500 text-black border-cyan-500":"text-white/70 hover:bg-white/10"),children:"AR"}),(0,t.jsx)("button",{onClick:N,className:"px-3 py-1 rounded-full text-xs font-semibold border border-white/10 transition-colors text-white/70 hover:bg-white/10",children:x("Logout")})]})]}),e]}):g||"/admin/login"===h?(0,t.jsx)("div",{className:(0,k.cn)("min-h-screen bg-black text-white",f&&"[direction:rtl]"),children:(0,t.jsxs)(a.SidebarProvider,{defaultOpen:!0,children:[(0,t.jsx)("div",{className:"hidden lg:block",children:(0,t.jsx)(K,{})}),(0,t.jsxs)("main",{className:"flex-1 flex flex-col min-w-0 overflow-hidden",children:[(0,t.jsxs)("header",{className:"flex items-center gap-4 border-b border-white/10 bg-black/50 px-6 py-3 backdrop-blur-md sticky top-0 z-10",children:[(0,t.jsx)(a.SidebarTrigger,{className:"hidden lg:inline-flex size-9! rounded-xl bg-gradient-to-r from-cyan-500/10 to-blue-600/10 border border-white/10 text-white shadow-[0_8px_24px_-10px_rgba(6,182,212,0.45)] hover:shadow-[0_12px_32px_-10px_rgba(6,182,212,0.65)] ring-1 ring-white/10 hover:ring-cyan-400/40 transition-all duration-300 active:scale-95",title:"Menu"}),(0,t.jsx)("div",{className:"flex-1"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(Y,{role:"admin"}),(0,t.jsx)("button",{onClick:()=>p("en"),className:(0,k.cn)("px-3 py-1 rounded-full text-xs font-semibold border border-white/10 transition-colors","en"===u?"bg-cyan-500 text-black border-cyan-500":"text-white/70 hover:bg-white/10"),children:"EN"}),(0,t.jsx)("button",{onClick:()=>p("ar"),className:(0,k.cn)("px-3 py-1 rounded-full text-xs font-semibold border border-white/10 transition-colors","ar"===u?"bg-cyan-500 text-black border-cyan-500":"text-white/70 hover:bg-white/10"),children:"AR"}),(0,t.jsx)("button",{onClick:N,className:"px-3 py-1 rounded-full text-xs font-semibold border border-white/10 transition-colors text-white/70 hover:bg-white/10",children:x("Logout")})]})]}),(0,t.jsx)("div",{className:"flex-1 overflow-auto p-6 pb-16 lg:pb-6",children:e}),(0,t.jsx)("nav",{className:"lg:hidden fixed inset-x-0 bottom-0 z-20 border-t border-white/10 bg-black/80 backdrop-blur-xl",children:(0,t.jsx)("div",{className:"flex items-stretch justify-between",children:[{href:"/admin",label:"Dashboard",icon:s.LayoutDashboard},{href:"/admin/orders",label:"Orders",icon:o.ShoppingCart},{href:"/admin/technicians",label:"Technicians",icon:l.Users},{href:"/admin/inventory",label:"Inventory",icon:d.Smartphone},{href:"/admin/inbox/contact",label:"Inbox",icon:O},{href:"/admin/inbox/corporate",label:"Corporate Inbox",icon:G.Building2},{href:"/admin/requests",label:"Technician Requests",icon:m.ClipboardList},{href:"/admin/settings",label:"Settings",icon:c.Settings}].map(e=>{let r="/admin"===e.href?"/admin"===h:h.startsWith(e.href),n=e.icon;return(0,t.jsxs)(i.default,{href:e.href,className:(0,k.cn)("group relative overflow-hidden flex-1 py-2 px-2 flex flex-col items-center justify-center gap-1",r?"text-cyan-400":"text-white/70"),children:[(0,t.jsx)("span",{className:"absolute -inset-0.5 rounded-xl bg-gradient-to-r from-cyan-500/0 via-white/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),(0,t.jsx)(n,{className:(0,k.cn)("w-5 h-5",r?"text-cyan-400":"text-white/50")}),(0,t.jsx)("span",{className:"text-[11px] font-semibold",children:x(e.label)})]},e.href)})})})]}),(0,t.jsx)(e$,{})]})}):null}eV.displayName=eP.displayName,e.s(["default",()=>eX],88760)}]);