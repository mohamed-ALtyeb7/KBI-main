(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,55436,e=>{"use strict";let t=(0,e.i(75254).default)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);e.s(["Search",()=>t],55436)},46897,e=>{"use strict";let t=(0,e.i(75254).default)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);e.s(["MapPin",()=>t],46897)},26707,e=>{"use strict";let t=(0,e.i(75254).default)("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);e.s(["Smartphone",()=>t],26707)},87486,e=>{"use strict";var t=e.i(43476),r=e.i(91918),a=e.i(25913),s=e.i(75157);let i=(0,a.cva)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function l({className:e,variant:a,asChild:l=!1,...n}){let d=l?r.Slot:"span";return(0,t.jsx)(d,{"data-slot":"badge",className:(0,s.cn)(i({variant:a}),e),...n})}e.s(["Badge",()=>l])},15288,e=>{"use strict";var t=e.i(43476),r=e.i(75157);function a({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...a})}function s({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,r.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...a})}function i({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,r.cn)("leading-none font-semibold",e),...a})}function l({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,r.cn)("px-6",e),...a})}e.s(["Card",()=>a,"CardContent",()=>l,"CardHeader",()=>s,"CardTitle",()=>i])},18071,e=>{"use strict";var t=e.i(83814);function r(){let{lang:e,setLang:r}=(0,t.useLanguage)();return{language:e,setLanguage:r,t:(0,t.useT)()}}e.s(["useLanguage",()=>r])},86118,e=>{"use strict";e.i(36180);var t=e.i(98925),r=e.i(11605);async function a(e){try{let a=(await (0,t.getDoc)((0,t.doc)(r.db,"users",e.uid))).data(),s=a?.technicianId||null;if(!s){let a=(0,t.query)((0,t.collection)(r.db,"technicians"),(0,t.where)("uid","==",e.uid)),i=await (0,t.getDocs)(a);if(i.empty){if(e.email){let a=(0,t.query)((0,t.collection)(r.db,"technicians"),(0,t.where)("email","==",e.email)),i=await (0,t.getDocs)(a);i.empty||(s=i.docs[0].id)}}else s=i.docs[0].id}return s}catch(e){return console.error("Resolve technicianId error:",e),null}}e.s(["getTechnicianIdFromUser",()=>a])},48279,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(15288),s=e.i(26707),i=e.i(87316),l=e.i(46897),n=e.i(55436);e.i(36180);var d=e.i(98925),c=e.i(11605),o=e.i(18071),u=e.i(18566),h=e.i(87486),x=e.i(93479),g=e.i(67489),m=e.i(86118);function p(){let{t:e}=(0,o.useLanguage)(),p=(0,u.useRouter)(),[b,f]=(0,r.useState)(!0),[v,w]=(0,r.useState)([]),[y,j]=(0,r.useState)([]),[N,S]=(0,r.useState)(null),[C,k]=(0,r.useState)(null),[I,L]=(0,r.useState)(""),[A,T]=(0,r.useState)("all");return(0,r.useEffect)(()=>{let e=c.auth.onAuthStateChanged(e=>S(e));return()=>e()},[]),(0,r.useEffect)(()=>{N&&(async()=>{k(await (0,m.getTechnicianIdFromUser)({uid:N.uid,email:N.email||void 0}))})()},[N]),(0,r.useEffect)(()=>{if(!N?.uid)return;if(c.isMockMode){w([]),j([]),f(!1);return}f(!0);let e=(0,d.collection)(c.db,"orders"),t=(0,d.query)(e,(0,d.where)("technicianId","==",N.uid),(0,d.orderBy)("createdAt","desc")),r=(0,d.onSnapshot)(t,e=>{let t=e.docs.map(e=>({id:e.id,...e.data()}));w(t),j(t),f(!1)});return()=>r()},[N]),(0,r.useEffect)(()=>{let e=v;if(I){let t=I.toLowerCase();e=e.filter(e=>e.id.toLowerCase().includes(t)||e.device?.toLowerCase().includes(t)||e.customerName?.toLowerCase().includes(t))}"all"!==A&&(e=e.filter(e=>e.status===A)),j(e)},[I,A,v]),(0,t.jsxs)("div",{className:"space-y-6 animate-in fade-in duration-500",children:[(0,t.jsx)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold tracking-tight text-white",children:e("Assigned Orders")}),(0,t.jsx)("p",{className:"text-white/60 mt-1",children:e("Manage your daily tasks")})]})}),(0,t.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 bg-white/5 p-4 rounded-lg border border-white/10 backdrop-blur-sm",children:[(0,t.jsxs)("div",{className:"relative flex-1",children:[(0,t.jsx)(n.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-white/50"}),(0,t.jsx)(x.Input,{placeholder:e("Search by ID, Device, Customer..."),className:"pl-9 bg-black/20 border-white/10 text-white placeholder:text-white/40 focus:border-cyan-500/50",value:I,onChange:e=>L(e.target.value)})]}),(0,t.jsx)("div",{className:"w-full md:w-48",children:(0,t.jsxs)(g.Select,{value:A,onValueChange:T,children:[(0,t.jsx)(g.SelectTrigger,{className:"bg-black/20 border-white/10 text-white",children:(0,t.jsx)(g.SelectValue,{placeholder:e("Filter by Status")})}),(0,t.jsxs)(g.SelectContent,{className:"bg-zinc-900 border-white/10 text-white",children:[(0,t.jsx)(g.SelectItem,{value:"all",children:e("All Statuses")}),(0,t.jsx)(g.SelectItem,{value:"pending",children:e("Pending")}),(0,t.jsx)(g.SelectItem,{value:"on_way",children:e("On the Way")}),(0,t.jsx)(g.SelectItem,{value:"in_progress",children:e("In Progress")}),(0,t.jsx)(g.SelectItem,{value:"completed",children:e("Completed")})]})]})})]}),(0,t.jsx)("div",{className:"grid gap-4",children:b?(0,t.jsx)("div",{className:"text-center py-20 text-white/50",children:e("Loading orders...")}):0===y.length?(0,t.jsx)("div",{className:"text-center py-20 text-white/50 border border-dashed border-white/10 rounded-lg",children:(0,t.jsx)("p",{children:e("No orders found matching your criteria.")})}):y.map(e=>(0,t.jsx)(a.Card,{className:"bg-white/5 border-white/10 hover:bg-white/10 transition-all cursor-pointer group",onClick:()=>p.push(`/technician/order/${e.id}`),children:(0,t.jsx)(a.CardContent,{className:"p-4 md:p-6",children:(0,t.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 justify-between",children:[(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsx)("div",{className:"h-14 w-14 rounded-xl bg-gradient-to-br from-cyan-500/20 to-blue-500/20 flex items-center justify-center shrink-0 border border-white/5 group-hover:border-cyan-500/30 transition-colors",children:(0,t.jsx)(s.Smartphone,{className:"h-7 w-7 text-cyan-400"})}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,t.jsx)("h3",{className:"font-semibold text-white text-lg",children:e.device}),(0,t.jsx)(h.Badge,{variant:"outline",className:"bg-white/5 border-white/10 text-white/60 text-[10px] h-5",children:e.id})]}),(0,t.jsx)("p",{className:"text-white/70 mb-2",children:e.issue}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-3 text-sm text-white/50",children:[(0,t.jsxs)("span",{className:"flex items-center gap-1.5",children:[(0,t.jsx)(i.Calendar,{className:"w-3.5 h-3.5"})," ",new Date(e.date||e.createdAt).toLocaleDateString()]}),(0,t.jsxs)("span",{className:"flex items-center gap-1.5",children:[(0,t.jsx)(l.MapPin,{className:"w-3.5 h-3.5"})," ",e.location||"N/A"]})]})]})]}),(0,t.jsxs)("div",{className:"flex flex-row md:flex-col items-center md:items-end justify-between md:justify-center gap-3 pl-0 md:pl-4 md:border-l border-white/10",children:[(0,t.jsx)(h.Badge,{className:`${(e=>{switch(e){case"pending":return"bg-yellow-500/20 text-yellow-500 border-yellow-500/50";case"in_progress":return"bg-blue-500/20 text-blue-500 border-blue-500/50";case"on_way":return"bg-purple-500/20 text-purple-500 border-purple-500/50";case"completed":return"bg-green-500/20 text-green-500 border-green-500/50";case"cancelled":return"bg-red-500/20 text-red-500 border-red-500/50";default:return"bg-gray-500/20 text-gray-500 border-gray-500/50"}})(e.status)} px-3 py-1 text-sm capitalize`,children:e.status.replace("_"," ")}),(0,t.jsxs)("span",{className:"text-xl font-bold text-white",children:[e.price," ",(0,t.jsx)("span",{className:"text-sm font-normal text-white/50",children:"AED"})]})]})]})})},e.id))})]})}e.s(["default",()=>p])}]);