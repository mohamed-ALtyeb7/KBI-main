(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,43432,e=>{"use strict";let t=(0,e.i(75254).default)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);e.s(["Phone",()=>t],43432)},46897,e=>{"use strict";let t=(0,e.i(75254).default)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);e.s(["MapPin",()=>t],46897)},87486,e=>{"use strict";var t=e.i(43476),a=e.i(91918),s=e.i(25913),r=e.i(75157);let i=(0,s.cva)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function n({className:e,variant:s,asChild:n=!1,...d}){let c=n?a.Slot:"span";return(0,t.jsx)(c,{"data-slot":"badge",className:(0,r.cn)(i({variant:s}),e),...d})}e.s(["Badge",()=>n])},15288,e=>{"use strict";var t=e.i(43476),a=e.i(75157);function s({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...s})}function r({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...s})}function i({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",e),...s})}function n({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",e),...s})}e.s(["Card",()=>s,"CardContent",()=>n,"CardHeader",()=>r,"CardTitle",()=>i])},18071,e=>{"use strict";var t=e.i(83814);function a(){let{lang:e,setLang:a}=(0,t.useLanguage)();return{language:e,setLanguage:a,t:(0,t.useT)()}}e.s(["useLanguage",()=>a])},46349,e=>{"use strict";let t=(0,e.i(75254).default)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);e.s(["default",()=>t])},73375,e=>{"use strict";let t=(0,e.i(75254).default)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);e.s(["ChevronLeft",()=>t],73375)},63059,e=>{"use strict";var t=e.i(46349);e.s(["ChevronRight",()=>t.default])},81163,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(15288),r=e.i(19455),i=e.i(87486),n=e.i(73375),d=e.i(63059),c=e.i(87316),l=e.i(46897),o=e.i(43432),h=e.i(95116);e.i(36180);var u=e.i(98925),x=e.i(11605),g=e.i(18566),m=e.i(18071);function p(){let{t:e}=(0,m.useLanguage)(),p=(0,g.useRouter)(),[f,v]=(0,a.useState)(null),[b,w]=(0,a.useState)(null),[j,y]=(0,a.useState)([]),[N,C]=(0,a.useState)(new Date),[S,D]=(0,a.useState)(null),[A,k]=(0,a.useState)(!0);(0,a.useEffect)(()=>{let e=x.auth.onAuthStateChanged(e=>{e?v(e):p.replace("/technician/login")});return()=>e()},[p]),(0,a.useEffect)(()=>{f&&(async()=>{let e=(await (0,u.getDoc)((0,u.doc)(x.db,"users",f.uid))).data(),t=e?.technicianId||null;if(!t){let e=(0,u.query)((0,u.collection)(x.db,"technicians"),(0,u.where)("uid","==",f.uid)),a=await (0,u.getDocs)(e);if(a.empty){if(f.email){let e=(0,u.query)((0,u.collection)(x.db,"technicians"),(0,u.where)("email","==",f.email)),a=await (0,u.getDocs)(e);a.empty||(t=a.docs[0].id)}}else t=a.docs[0].id}w(t)})()},[f]),(0,a.useEffect)(()=>{if(!f?.uid)return;if(x.isMockMode){y([]),k(!1);return}let e=(0,u.query)((0,u.collection)(x.db,"orders"),(0,u.where)("technicianId","==",f.uid),(0,u.orderBy)("createdAt","desc")),t=(0,u.onSnapshot)(e,e=>{y(e.docs.map(e=>({id:e.id,...e.data()}))),k(!1)});return()=>t()},[f]);let T=N.getFullYear(),P=N.getMonth(),$=new Date(T,P,1).getDay(),M=new Date(T,P+1,0).getDate(),L=[];for(let e=0;e<$;e++)L.push(null);for(let e=1;e<=M;e++)L.push(e);let B=new Date().toISOString().split("T")[0],I=e=>{switch(e?.toLowerCase()){case"pending":return"bg-yellow-500";case"in_progress":return"bg-blue-500";case"completed":return"bg-green-500";case"cancelled":return"bg-red-500";default:return"bg-gray-500"}},O=S?j.filter(e=>e.scheduledDate===S||!!e.createdAt&&(e.createdAt.toDate?e.createdAt.toDate():new Date(e.createdAt)).toISOString().split("T")[0]===S):[];return(0,t.jsxs)("div",{className:"space-y-6 animate-in fade-in duration-500",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-white",children:e("Calendar")}),(0,t.jsx)(r.Button,{variant:"outline",onClick:()=>p.push("/technician/orders"),className:"border-cyan-500/50 text-cyan-500",children:e("View All Orders")})]}),(0,t.jsxs)("div",{className:"grid gap-6 lg:grid-cols-[1fr_350px]",children:[(0,t.jsxs)(s.Card,{className:"bg-white/5 border-white/10",children:[(0,t.jsxs)(s.CardHeader,{className:"flex flex-row items-center justify-between",children:[(0,t.jsxs)(s.CardTitle,{className:"text-white flex items-center gap-2",children:[(0,t.jsx)(c.Calendar,{className:"w-5 h-5 text-cyan-400"}),["January","February","March","April","May","June","July","August","September","October","November","December"][P]," ",T]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(r.Button,{variant:"ghost",size:"icon",onClick:()=>{C(new Date(T,P-1,1))},children:(0,t.jsx)(n.ChevronLeft,{className:"w-5 h-5 text-white"})}),(0,t.jsx)(r.Button,{variant:"ghost",size:"icon",onClick:()=>{C(new Date(T,P+1,1))},children:(0,t.jsx)(d.ChevronRight,{className:"w-5 h-5 text-white"})})]})]}),(0,t.jsxs)(s.CardContent,{children:[(0,t.jsx)("div",{className:"grid grid-cols-7 gap-1 mb-2",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(e=>(0,t.jsx)("div",{className:"text-center text-xs text-white/50 py-2",children:e},e))}),(0,t.jsx)("div",{className:"grid grid-cols-7 gap-1",children:L.map((e,a)=>{let s;if(null===e)return(0,t.jsx)("div",{className:"h-20"},`empty-${a}`);let r=`${T}-${String(P+1).padStart(2,"0")}-${String(e).padStart(2,"0")}`,i=(s=`${T}-${String(P+1).padStart(2,"0")}-${String(e).padStart(2,"0")}`,j.filter(e=>e.scheduledDate===s||!!e.createdAt&&(e.createdAt.toDate?e.createdAt.toDate():new Date(e.createdAt)).toISOString().split("T")[0]===s)),n=r===B,d=r===S;return(0,t.jsxs)("button",{onClick:()=>D(r),className:`h-20 p-1 rounded-lg border transition-all ${d?"border-cyan-500 bg-cyan-500/20":n?"border-cyan-500/50 bg-cyan-500/10":"border-white/10 hover:bg-white/5"}`,children:[(0,t.jsx)("div",{className:`text-sm font-medium ${n?"text-cyan-400":"text-white"}`,children:e}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-0.5 mt-1",children:[i.slice(0,3).map((e,a)=>(0,t.jsx)("div",{className:`w-2 h-2 rounded-full ${I(e.status)}`},a)),i.length>3&&(0,t.jsxs)("span",{className:"text-[10px] text-white/50",children:["+",i.length-3]})]})]},e)})}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-4 mt-4 pt-4 border-t border-white/10",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs text-white/50",children:[(0,t.jsx)("div",{className:"w-3 h-3 rounded-full bg-yellow-500"}),(0,t.jsx)("span",{children:e("Pending")})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs text-white/50",children:[(0,t.jsx)("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),(0,t.jsx)("span",{children:e("In Progress")})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs text-white/50",children:[(0,t.jsx)("div",{className:"w-3 h-3 rounded-full bg-green-500"}),(0,t.jsx)("span",{children:e("Completed")})]})]})]})]}),(0,t.jsxs)(s.Card,{className:"bg-white/5 border-white/10",children:[(0,t.jsx)(s.CardHeader,{children:(0,t.jsx)(s.CardTitle,{className:"text-white",children:S?new Date(S).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"}):e("Select a date")})}),(0,t.jsx)(s.CardContent,{children:S?0===O.length?(0,t.jsx)("p",{className:"text-white/50 text-center py-8",children:e("No orders for this date")}):(0,t.jsx)("div",{className:"space-y-4",children:O.map(e=>(0,t.jsxs)("div",{className:"p-4 rounded-lg border border-white/10 bg-white/5 hover:bg-white/10 transition-all",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-semibold text-white",children:e.orderId}),(0,t.jsx)("p",{className:"text-sm text-white/70",children:e.customerName||e.name||"Customer"})]}),(0,t.jsx)(i.Badge,{className:`${I(e.status)} text-white border-0`,children:e.status?.replace("_"," ")})]}),(0,t.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-white/60",children:[(0,t.jsx)(h.Wrench,{className:"w-4 h-4"}),(0,t.jsxs)("span",{children:[e.deviceType," - ",e.issueType||e.issue]})]}),(e.customerPhone||e.phone)&&(0,t.jsxs)("a",{href:`tel:${e.customerPhone||e.phone}`,className:"flex items-center gap-2 text-cyan-400 hover:text-cyan-300",children:[(0,t.jsx)(o.Phone,{className:"w-4 h-4"}),(0,t.jsx)("span",{children:e.customerPhone||e.phone})]}),e.address&&(0,t.jsxs)("div",{className:"flex items-center gap-2 text-white/60",children:[(0,t.jsx)(l.MapPin,{className:"w-4 h-4"}),(0,t.jsx)("span",{children:e.address})]})]})]},e.id))}):(0,t.jsx)("p",{className:"text-white/50 text-center py-8",children:e("Click on a date to see orders")})})]})]})]})}e.s(["default",()=>p])}]);