(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,59438,e=>{"use strict";var t=e.i(43476),a=e.i(75157);function s({children:e,className:s,hoverEffect:i=!0}){return(0,t.jsxs)("div",{className:(0,a.cn)("glass rounded-3xl p-6 sm:p-8 lg:p-10 relative overflow-hidden group transition-transform duration-300 will-change-transform",i&&"glass-hover hover:-translate-y-1 hover:shadow-2xl",s),children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500 pointer-events-none"}),e]})}e.s(["GlassCard",()=>s])},55436,e=>{"use strict";let t=(0,e.i(75254).default)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);e.s(["Search",()=>t],55436)},15288,e=>{"use strict";var t=e.i(43476),a=e.i(75157);function s({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...s})}function i({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...s})}function l({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",e),...s})}function r({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",e),...s})}e.s(["Card",()=>s,"CardContent",()=>r,"CardHeader",()=>i,"CardTitle",()=>l])},69638,6321,e=>{"use strict";let t=(0,e.i(75254).default)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["default",()=>t],6321),e.s(["CheckCircle",()=>t],69638)},88844,e=>{"use strict";let t=(0,e.i(75254).default)("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);e.s(["Package",()=>t],88844)},78894,e=>{"use strict";let t=(0,e.i(75254).default)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);e.s(["AlertTriangle",()=>t],78894)},82148,73708,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(19455),i=e.i(93479),l=e.i(11605);e.i(61086);var r=e.i(27215),n=e.i(31278),d=e.i(37727);let o=(0,e.i(75254).default)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);function c({value:e,onChange:c,disabled:m,path:h="uploads"}){let[x,u]=(0,a.useState)(!1),p=async e=>{if(!e.target.files||0===e.target.files.length)return;let t=e.target.files[0];u(!0);try{if(l.isMockMode)await new Promise(e=>setTimeout(e,1500)),c("https://images.unsplash.com/photo-1581091226825-a6a2a5aee158?w=800&auto=format&fit=crop&q=60&ixlib=rb-4.0.3");else{let e=(0,r.ref)(l.storage,`${h}/${Date.now()}_${t.name}`);await (0,r.uploadBytes)(e,t);let a=await (0,r.getDownloadURL)(e);c(a)}}catch(e){alert("Upload failed")}finally{u(!1)}};return e?(0,t.jsxs)("div",{className:"relative w-32 h-32 rounded-xl overflow-hidden border border-white/10 group bg-black/20",children:[(0,t.jsx)("img",{src:e,alt:"Upload",className:"w-full h-full object-cover"}),(0,t.jsx)("button",{onClick:()=>c(""),className:"absolute top-1 right-1 p-1 bg-black/70 rounded-full text-white opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-500",type:"button",children:(0,t.jsx)(d.X,{className:"w-3 h-3"})})]}):(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(s.Button,{type:"button",variant:"outline",disabled:m||x,onClick:()=>document.getElementById("image-upload-input")?.click(),className:"bg-white/5 border-white/10 h-32 w-32 flex flex-col items-center justify-center gap-2 hover:bg-white/10",children:x?(0,t.jsx)(n.Loader2,{className:"w-6 h-6 animate-spin text-cyan-400"}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o,{className:"w-6 h-6 text-white/50"}),(0,t.jsx)("span",{className:"text-xs text-white/50",children:"Upload Icon"})]})}),(0,t.jsx)(i.Input,{id:"image-upload-input",type:"file",accept:"image/*",className:"hidden",onChange:p,disabled:m||x})]})}e.s(["Image",()=>o],73708),e.s(["ImageUpload",()=>c],82148)},16148,e=>{"use strict";function t(e,t){let a=function(){let e=localStorage.getItem("repairTimes");if(!e)return{};try{return JSON.parse(e)}catch{return{}}}(),s=`${e}|${t}`;return null!=a[s]?a[s]:t.startsWith("Hardware:")?90:t.startsWith("Software:")?60:t.startsWith("Physical:")?75:60}e.s(["devices",0,[{id:"mobile",name:"Mobile Phone",icon:"Smartphone",brands:[{id:"apple",name:"Apple",models:["iPhone 15 Pro Max","iPhone 15 Pro","iPhone 15","iPhone 14 Pro Max","iPhone 14 Pro","iPhone 14","iPhone 13","iPhone 12","iPhone 11","iPhone SE"]},{id:"samsung",name:"Samsung",models:["Galaxy S24 Ultra","Galaxy S24+","Galaxy S24","Galaxy S23 Ultra","Galaxy S23","Galaxy A54","Galaxy A34","Galaxy Z Fold 5","Galaxy Z Flip 5"]},{id:"xiaomi",name:"Xiaomi",models:["Xiaomi 14 Ultra","Xiaomi 14","Redmi Note 13 Pro","Redmi Note 13","Poco F6 Pro","Poco X6 Pro"]},{id:"huawei",name:"Huawei",models:["Mate 60 Pro","P60 Pro","Nova 12","Nova 11"]},{id:"oppo",name:"OPPO",models:["Find X7 Ultra","Reno 11 Pro","A98"]},{id:"vivo",name:"Vivo",models:["X100 Pro","V30 Pro","Y78"]},{id:"oneplus",name:"OnePlus",models:["12","12R","Nord 3","Nord CE 3"]},{id:"google",name:"Google",models:["Pixel 8 Pro","Pixel 8","Pixel 7a"]}],issues:["Screen Replacement","Battery Replacement","Charging Port Repair","Camera Replacement","Speaker / Mic Fix","Software Issues","Water Damage","Back Glass Replacement"]},{id:"laptop",name:"Laptop",icon:"Laptop",brands:[{id:"apple-mac",name:"Apple MacBook",models:['MacBook Pro 16"','MacBook Pro 14"',"MacBook Air M2","MacBook Air M1"]},{id:"dell",name:"Dell",models:["XPS 15","XPS 13","Inspiron 15","Latitude 14"]},{id:"hp",name:"HP",models:["Spectre x360","Pavilion 15","EliteBook","Omen 16"]},{id:"lenovo",name:"Lenovo",models:["ThinkPad X1 Carbon","ThinkPad T14","IdeaPad","Legion 5"]},{id:"asus",name:"ASUS",models:["ROG Zephyrus","ZenBook","VivoBook","TUF Gaming"]},{id:"acer",name:"Acer",models:["Swift 5","Aspire 5","Nitro 5","Predator Helios"]},{id:"msi",name:"MSI",models:["Stealth","Raider","Creator","Modern"]}],issues:["Fan Cleaning & Thermal Paste","Keyboard Replacement","Screen Replacement","USB / HDMI Port Repair","Windows Installation","Overheating Fix","SSD/RAM Upgrade","Battery Replacement","Motherboard Repair"]},{id:"pc",name:"PC / Desktop Computer",icon:"Monitor",brands:[{id:"dell-pc",name:"Dell",models:["OptiPlex","Precision","Vostro","Alienware"]},{id:"hp-pc",name:"HP",models:["ProDesk","EliteDesk","Pavilion Desktop","OMEN Desktop"]},{id:"lenovo-pc",name:"Lenovo",models:["ThinkCentre","IdeaCentre","Legion Tower"]},{id:"asus-pc",name:"ASUS",models:["ROG","TUF","ProArt","ExpertCenter"]},{id:"acer-pc",name:"Acer",models:["Aspire Desktop","Nitro","Predator"]},{id:"msi-pc",name:"MSI",models:["MEG Trident","MAG Infinite","PRO"]},{id:"samsung-pc",name:"Samsung",models:["Desktop Series"]},{id:"huawei-pc",name:"Huawei",models:["MateStation"]},{id:"custom-pc",name:"Custom Build (PC Tower)",models:["ATX Tower","MicroATX","Mini-ITX"]}],issues:["Hardware: Power Supply Issue","Hardware: No Display","Hardware: Overheating","Hardware: CPU Fan Replacement","Hardware: RAM Upgrade / Replacement","Hardware: SSD Upgrade / OS Install","Hardware: GPU Issue / No Signal","Hardware: Motherboard Repair","Software: Windows Installation","Software: Virus Removal","Software: System Slow","Software: Driver Issues","Software: BIOS Errors","Physical: Broken Ports (USB / HDMI)","Physical: Front Panel Not Working","Physical: PSU Noise"]},{id:"printer",name:"Printer",icon:"Printer",brands:[{id:"hp-printer",name:"HP",models:["LaserJet Pro","OfficeJet Pro","DeskJet","ENVY"]},{id:"canon",name:"Canon",models:["PIXMA","imageCLASS","MAXIFY"]},{id:"epson",name:"Epson",models:["EcoTank","WorkForce","Expression"]},{id:"brother",name:"Brother",models:["MFC Series","HL Series","DCP Series"]}],issues:["Ink & Toner Issues","Paper Jam Fix","Cleaning & Maintenance","Laser Printer Repair","Inkjet Printer Repair","Print Quality Issues","Connectivity Issues"]},{id:"tv",name:"TV",icon:"Tv",brands:[{id:"samsung-tv",name:"Samsung",models:["Neo QLED 8K","Neo QLED 4K","Crystal UHD","The Frame"]},{id:"sony-tv",name:"Sony",models:["BRAVIA XR","BRAVIA 4K","X Series"]},{id:"lg-tv",name:"LG",models:["OLED evo","QNED","NanoCell","UHD"]},{id:"hisense",name:"Hisense",models:["ULED","Laser TV","4K Series"]},{id:"tcl",name:"TCL",models:["QM8","Q7","S4"]},{id:"philips",name:"Philips",models:["OLED+","The One","PUS Series"]},{id:"panasonic",name:"Panasonic",models:["JZ OLED","JX LED","LX Series"]},{id:"sharp",name:"Sharp",models:["Aquos","XLED"]}],issues:["TV Not Turning On","Lines on Screen","HDMI Port Repair","Software / System Issue","Sound Issues","Backlight Repair","Screen Replacement"]},{id:"apple-watch",name:"Apple Watch",icon:"Watch",brands:[{id:"apple-watch",name:"Apple",models:["Apple Watch Ultra 2","Apple Watch Series 9","Apple Watch SE","Apple Watch Series 8","Apple Watch Series 7"]}],issues:["Screen Replacement","Battery Replacement","Crown Repair","Sensor Issues","Water Damage","Pairing Issues"]},{id:"gaming",name:"PlayStation / Xbox",icon:"Gamepad2",brands:[{id:"playstation",name:"PlayStation",models:["PS5","PS5 Digital","PS4 Pro","PS4 Slim"]},{id:"xbox",name:"Xbox",models:["Xbox Series X","Xbox Series S","Xbox One X","Xbox One S"]},{id:"nintendo",name:"Nintendo",models:["Switch OLED","Switch","Switch Lite"]}],issues:["HDMI Port Repair","Overheating Fix","Disc Drive Repair","Controller Sync Issues","Power Issues","Software / System Issues","SSD Upgrade"]},{id:"cctv",name:"CCTV",icon:"Camera",brands:[{id:"hikvision",name:"Hikvision",models:["DS-2CD Series","ColorVu","AcuSense"]},{id:"dahua",name:"Dahua",models:["IPC-HDW Series","IPC-HFW Series","XVR Series"]},{id:"uniview",name:"Uniview",models:["Prime Series","Easy Series"]},{id:"ezviz",name:"Ezviz",models:["C6N","C3W","DB1C"]},{id:"cpplus",name:"CP Plus",models:["E Series","G Series"]},{id:"imou",name:"IMOU",models:["Ranger Series","Bullet Series"]},{id:"tplink-cctv",name:"TP-Link",models:["Tapo C200","Tapo C310","VIGI"]},{id:"samsung-cctv",name:"Samsung CCTV",models:["Wisenet","SDH Series"]}],issues:["Full CCTV Installation","DVR / NVR Setup","Camera Not Working","No Signal","Night Vision Issues","WiFi / Connectivity Fix","Add New Cameras","Camera Upgrade"]},{id:"tv-install",name:"TV Installation",icon:"MonitorUp",brands:[{id:"samsung-install",name:"Samsung",models:['32" - 43"','50" - 55"','65" - 75"','85"+']},{id:"sony-install",name:"Sony",models:['32" - 43"','50" - 55"','65" - 75"','85"+']},{id:"lg-install",name:"LG",models:['32" - 43"','50" - 55"','65" - 75"','85"+']},{id:"other-install",name:"Other Brand",models:['32" - 43"','50" - 55"','65" - 75"','85"+']}],issues:["TV Wall Mount Installation","Smart TV Setup","Cable Management","Soundbar Installation","Full Home Theater Setup"]},{id:"tablet",name:"iPad / Tablet",icon:"Laptop",brands:[{id:"apple-ipad",name:"Apple iPad",models:["iPad (2018)","iPad (2019)","iPad (2020)","iPad Air (2022)"]},{id:"samsung-tab",name:"Samsung Galaxy Tab",models:["Galaxy Tab S9","Galaxy Tab S8","Galaxy Tab A8"]}],issues:["Screen Replacement","Battery Replacement","Charging Port Repair","Camera Replacement","Software Issues","Water Damage","Not Turning On"]}],"getRepairTime",()=>t])},13942,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(15288),i=e.i(19455),l=e.i(93479),r=e.i(87486),n=e.i(67489),d=e.i(76639),o=e.i(55436),c=e.i(7233),m=e.i(88844),h=e.i(78894),x=e.i(75254);let u=(0,x.default)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);var p=e.i(27612);let g=(0,x.default)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);var b=e.i(69638);let w=(0,x.default)("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);e.i(36180);var v=e.i(98925),j=e.i(11605),y=e.i(75157);let N=["Screens","Batteries","Charging Ports","Speakers","Cameras","Motherboards","Flex Cables","Buttons","Housings","Tools","Adhesives","Other"],f=["Apple","Samsung","Huawei","Xiaomi","OnePlus","Google","Sony","LG","Universal","Other"];function S({isAdmin:e=!0,onStatsUpdate:x}){let S,[k,C]=(0,a.useState)([]),[P,M]=(0,a.useState)([]),[I,D]=(0,a.useState)(!0),[A,T]=(0,a.useState)(""),[B,L]=(0,a.useState)("all"),[R,U]=(0,a.useState)("all"),[q,O]=(0,a.useState)("all"),[V,E]=(0,a.useState)("name"),[H,F]=(0,a.useState)(!1),[G,$]=(0,a.useState)(null),[X,W]=(0,a.useState)("details"),[z,K]=(0,a.useState)([]),[Q,_]=(0,a.useState)([]),[J,Y]=(0,a.useState)(null),[Z,ee]=(0,a.useState)(!1),[et,ea]=(0,a.useState)({name:"",sku:"",category:"Screens",brand:"Apple",compatibleDevices:"",quantity:0,minStock:5,price:0,cost:0,location:"",supplier:"",description:""});(0,a.useEffect)(()=>{if(j.isMockMode){C([]),D(!1),x?.({totalParts:0,totalValue:0,lowStockCount:0,outOfStockCount:0});return}let e=(0,v.query)((0,v.collection)(j.db,"parts"),(0,v.orderBy)("name","asc")),t=(0,v.onSnapshot)(e,e=>{let t=e.docs.map(e=>({id:e.id,...e.data()}));C(t),D(!1);let a=t.length,s=t.reduce((e,t)=>e+t.quantity*t.cost,0),i=t.filter(e=>e.quantity<=e.minStock&&e.quantity>0).length,l=t.filter(e=>0===e.quantity).length;x?.({totalParts:a,totalValue:s,lowStockCount:i,outOfStockCount:l})});return()=>t()},[]),(0,a.useEffect)(()=>{if(j.isMockMode)return void M(e=>e.length?e:[{id:"mock-s1",name:"Default Supplier",phone:"971500000000",email:"supplier@example.com",partsIds:[]}]);let e=(0,v.onSnapshot)((0,v.collection)(j.db,"suppliers"),e=>{M(e.docs.map(e=>({id:e.id,...e.data()})))});return()=>e()},[]),(0,a.useEffect)(()=>{let e;if(H&&G)if(j.isMockMode)_(z.filter(e=>e.partId===G.id).sort((e,t)=>{let a=e.createdAt?.seconds??0;return(t.createdAt?.seconds??0)-a}));else{let t=(0,v.query)((0,v.collection)(j.db,"stock_movements"),(0,v.where)("partId","==",G.id),(0,v.orderBy)("createdAt","desc"));e=(0,v.onSnapshot)(t,e=>{_(e.docs.map(e=>({id:e.id,...e.data()})))})}else _([]);return()=>{"function"==typeof e&&e()}},[H,G,j.isMockMode,z]);let es=k.filter(e=>{let t=""===A||e.name.toLowerCase().includes(A.toLowerCase())||e.sku.toLowerCase().includes(A.toLowerCase())||e.brand.toLowerCase().includes(A.toLowerCase()),a="all"===B||e.category===B,s="all"===R||e.brand===R,i="all"===q||("low"===q?e.quantity<=e.minStock&&e.quantity>0:"out"!==q||0===e.quantity);return t&&a&&s&&i}).sort((e,t)=>"name"===V?e.name.localeCompare(t.name):"quantity"===V?e.quantity-t.quantity:"category"===V?e.category.localeCompare(t.category):0),ei=async()=>{if(!et.name.trim())return;let e={...et,compatibleDevices:et.compatibleDevices.split(",").map(e=>e.trim()).filter(Boolean),createdAt:v.Timestamp.now(),updatedAt:v.Timestamp.now()};if(G){await (0,v.updateDoc)((0,v.doc)(j.db,"parts",G.id),{...e,updatedAt:v.Timestamp.now()});let t=e.quantity-G.quantity;if(0!==t){let e={partId:G.id,type:t>0?"IN":"OUT",quantity:Math.abs(t),reason:"adjustment",orderId:null,userId:j.auth.currentUser?.uid||"system",createdAt:v.Timestamp.now()};j.isMockMode?K(t=>[e,...t]):await (0,v.addDoc)((0,v.collection)(j.db,"stock_movements"),e)}if(e.supplier){let t=e.supplier;try{j.isMockMode?M(e=>e.map(e=>e.id===t?{...e,partsIds:Array.from(new Set([...e.partsIds||[],G.id]))}:e)):await (0,v.updateDoc)((0,v.doc)(j.db,"suppliers",t),{partsIds:(0,v.arrayUnion)(G.id)})}catch{}}}else{let t=await (0,v.addDoc)((0,v.collection)(j.db,"parts"),e);if(e.quantity>0){let a={partId:t.id,type:"IN",quantity:e.quantity,reason:"purchase",orderId:null,userId:j.auth.currentUser?.uid||"system",createdAt:v.Timestamp.now()};j.isMockMode?K(e=>[a,...e]):await (0,v.addDoc)((0,v.collection)(j.db,"stock_movements"),a)}if(e.supplier){let a=e.supplier;try{j.isMockMode?M(e=>e.map(e=>e.id===a?{...e,partsIds:Array.from(new Set([...e.partsIds||[],t.id]))}:e)):await (0,v.updateDoc)((0,v.doc)(j.db,"suppliers",a),{partsIds:(0,v.arrayUnion)(t.id)})}catch{}}}en(),F(!1),$(null)},el=async e=>{confirm("Delete this part?")&&await (0,v.deleteDoc)((0,v.doc)(j.db,"parts",e))},er=async(e,t)=>{let a=k.find(t=>t.id===e);if(!a)return;let s=Math.max(0,a.quantity+t);if(await (0,v.updateDoc)((0,v.doc)(j.db,"parts",e),{quantity:s,updatedAt:v.Timestamp.now()}),0!==t){let a={partId:e,type:t>0?"IN":"OUT",quantity:Math.abs(t),reason:t>0?"purchase":"repair",orderId:null,userId:j.auth.currentUser?.uid||"system",createdAt:v.Timestamp.now()};j.isMockMode?K(e=>[a,...e]):await (0,v.addDoc)((0,v.collection)(j.db,"stock_movements"),a)}},en=()=>{ea({name:"",sku:"",category:"Screens",brand:"Apple",compatibleDevices:"",quantity:0,minStock:5,price:0,cost:0,location:"",supplier:"",description:""})},ed=(0,a.useMemo)(()=>{if("super"===window.localStorage.getItem("mock_admin_role"))return!0;let e=j.auth.currentUser?.email?.toLowerCase()||"";return e.includes("super")||e.includes("founder")},[]),eo=e=>{let t=(e.price||0)-(e.cost||0),a=e.cost>0?t/e.cost*100:0,s="bg-green-500/20 text-green-400";return a<15?s="bg-red-500/20 text-red-400":a>=15&&a<=30&&(s="bg-yellow-500/20 text-yellow-400"),{profit:t,margin:a,color:s}},ec=k.length,em=k.reduce((e,t)=>e+t.quantity*t.cost,0),eh=k.filter(e=>e.quantity<=e.minStock&&e.quantity>0).length,ex=k.filter(e=>0===e.quantity).length;return I?(0,t.jsx)(s.Card,{className:"bg-white/5 border-white/10",children:(0,t.jsx)(s.CardContent,{className:"p-8 text-center text-white/50",children:"Loading inventory..."})}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,t.jsx)(s.Card,{className:"bg-white/5 border-white/10",children:(0,t.jsx)(s.CardContent,{className:"pt-6",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 bg-cyan-500/20 rounded-lg",children:(0,t.jsx)(m.Package,{className:"w-5 h-5 text-cyan-400"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-white/60",children:"Total Parts"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-white",children:ec})]})]})})}),(0,t.jsx)(s.Card,{className:"bg-white/5 border-white/10",children:(0,t.jsx)(s.CardContent,{className:"pt-6",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 bg-green-500/20 rounded-lg",children:(0,t.jsx)(b.CheckCircle,{className:"w-5 h-5 text-green-400"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-white/60",children:"Inventory Value"}),(0,t.jsxs)("p",{className:"text-2xl font-bold text-white",children:[em.toLocaleString()," AED"]})]})]})})}),(0,t.jsx)(s.Card,{className:"bg-white/5 border-white/10",children:(0,t.jsx)(s.CardContent,{className:"pt-6",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 bg-yellow-500/20 rounded-lg",children:(0,t.jsx)(h.AlertTriangle,{className:"w-5 h-5 text-yellow-400"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-white/60",children:"Low Stock"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-white",children:eh})]})]})})}),(0,t.jsx)(s.Card,{className:"bg-white/5 border-white/10",children:(0,t.jsx)(s.CardContent,{className:"pt-6",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 bg-red-500/20 rounded-lg",children:(0,t.jsx)(h.AlertTriangle,{className:"w-5 h-5 text-red-400"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-white/60",children:"Out of Stock"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-white",children:ex})]})]})})})]}),(0,t.jsx)(s.Card,{className:"bg-white/5 border-white/10",children:(0,t.jsx)(s.CardContent,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,t.jsxs)("div",{className:"relative flex-1 min-w-[200px]",children:[(0,t.jsx)(o.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-white/40"}),(0,t.jsx)(l.Input,{placeholder:"Search parts by name, SKU, or brand...",value:A,onChange:e=>T(e.target.value),className:"pl-9 bg-white/5 border-white/10 text-white"})]}),(0,t.jsxs)(n.Select,{value:B,onValueChange:L,children:[(0,t.jsx)(n.SelectTrigger,{className:"w-[150px] bg-white/5 border-white/10 text-white hover:bg-white/10 focus-visible:border-cyan-500 focus-visible:ring-cyan-500/30 outline-none rounded-lg",children:(0,t.jsx)(n.SelectValue,{placeholder:"Category"})}),(0,t.jsxs)(n.SelectContent,{className:"bg-zinc-900 border-white/10 text-white",children:[(0,t.jsx)(n.SelectItem,{value:"all",children:"All Categories"}),N.map(e=>(0,t.jsx)(n.SelectItem,{value:e,children:e},e))]})]}),(0,t.jsxs)(n.Select,{value:R,onValueChange:U,children:[(0,t.jsx)(n.SelectTrigger,{className:"w-[130px] bg-white/5 border-white/10 text-white hover:bg-white/10 focus-visible:border-cyan-500 focus-visible:ring-cyan-500/30 outline-none rounded-lg",children:(0,t.jsx)(n.SelectValue,{placeholder:"Brand"})}),(0,t.jsxs)(n.SelectContent,{className:"bg-zinc-900 border-white/10 text-white",children:[(0,t.jsx)(n.SelectItem,{value:"all",children:"All Brands"}),f.map(e=>(0,t.jsx)(n.SelectItem,{value:e,children:e},e))]})]}),(0,t.jsxs)(n.Select,{value:q,onValueChange:e=>O(e),children:[(0,t.jsx)(n.SelectTrigger,{className:"w-[130px] bg-white/5 border-white/10 text-white hover:bg-white/10 focus-visible:border-cyan-500 focus-visible:ring-cyan-500/30 outline-none rounded-lg",children:(0,t.jsx)(n.SelectValue,{placeholder:"Stock"})}),(0,t.jsxs)(n.SelectContent,{className:"bg-zinc-900 border-white/10 text-white",children:[(0,t.jsx)(n.SelectItem,{value:"all",children:"All Stock"}),(0,t.jsx)(n.SelectItem,{value:"low",children:"Low Stock"}),(0,t.jsx)(n.SelectItem,{value:"out",children:"Out of Stock"})]})]}),(0,t.jsxs)(i.Button,{onClick:()=>{var e,t;let a,s,i,l,r,n,d,o,c;return a=e=>e.replace(/\w\S*/g,e=>e.charAt(0).toUpperCase()+e.slice(1)),s=e=>Number(e||0).toFixed(2),i=e=>{let t;return t=null==e||""===e?"â€”":String(e),`"${t.replace(/"/g,'""')}"`},l="\uFEFF"+["SKU,Part Name,Category,Brand,Compatible Devices,Supplier,Location,Quantity,Min Stock,Stock Status,Cost (AED),Price (AED),Profit (AED),Margin (%),Last Updated",...es.map(e=>{var t,l,r,n;let d,o,c,m,h=e.sku||"â€”",x=e.name||"â€”",u=e.category?a(String(e.category)):"â€”",p=e.brand?a(String(e.brand)):"â€”",g=(e=>{if(!Array.isArray(e)||0===e.length)return"â€”";let t=e.map(e=>String(e).trim()).filter(Boolean);return t.length?t.join(" | "):"â€”"})(e.compatibleDevices),b=e.supplier||"â€”",w=e.location||"â€”",v=Number(e.quantity||0),j=Number(e.minStock||e.minQuantity||0),y=(d=Number(v||0),o=Number(j||0),0===d?"Out Of Stock":d>o?"In Stock":"Low Stock"),N=s(e.cost??e.costPrice),f=s(e.price),S=(t=e.price,l=e.cost??e.costPrice,(Number(t||0)-Number(l||0)).toFixed(2)),k=(r=e.price,n=e.cost??e.costPrice,c=Number(r||0),(m=Number(n||0))<=0?"0":String(Math.round((c-m)/m*100))),C=(e=>{if(!e)return"â€”";let t=null;if("function"==typeof e?.toDate?t=e.toDate():"number"==typeof e||"string"==typeof e?t=new Date(e):e?.seconds&&(t=new Date(1e3*e.seconds)),!t||isNaN(t.getTime()))return"â€”";let a=e=>e<10?`0${e}`:String(e),s=t.getFullYear(),i=a(t.getMonth()+1),l=a(t.getDate()),r=a(t.getHours()),n=a(t.getMinutes());return`${s}-${i}-${l} ${r}:${n}`})(e.updatedAt);return[i(h),i(x),i(u),i(p),i(g),i(b),i(w),String(v),String(j),i(y),String(N),String(f),String(S),String(k),i(C)].join(",")})].join("\r\n"),r=e=>e<10?`0${e}`:String(e),n=new Date,void(e=l,t=`inventory_export_${n.getFullYear()}-${r(n.getMonth()+1)}-${r(n.getDate())}.csv`,d=new Blob([e],{type:"text/csv;charset=utf-8;"}),o=URL.createObjectURL(d),(c=document.createElement("a")).href=o,c.download=t,document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(o))},className:"bg-white/10 hover:bg-white/20 border border-white/20 text-white",children:[(0,t.jsx)(g,{className:"w-4 h-4 mr-2"})," Export CSV"]}),e&&(0,t.jsxs)(d.Dialog,{open:H,onOpenChange:F,children:[(0,t.jsx)(d.DialogTrigger,{asChild:!0,children:(0,t.jsxs)(i.Button,{onClick:()=>{en(),$(null)},className:"bg-cyan-500 hover:bg-cyan-400",children:[(0,t.jsx)(c.Plus,{className:"w-4 h-4 mr-2"})," Add Part"]})}),(0,t.jsxs)(d.DialogContent,{className:"bg-zinc-900 border-white/10 text-white max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,t.jsx)(d.DialogHeader,{children:(0,t.jsx)(d.DialogTitle,{children:G?"Edit Part":"Add New Part"})}),G&&(0,t.jsx)("div",{className:"space-y-2 px-1",children:(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(i.Button,{variant:"details"===X?"default":"outline",onClick:()=>W("details"),className:"details"===X?"bg-cyan-500 text-black hover:bg-cyan-400":"",children:"Details"}),(0,t.jsx)(i.Button,{variant:"history"===X?"default":"outline",onClick:()=>W("history"),className:"history"===X?"bg-cyan-500 text-black hover:bg-cyan-400":"",children:"Stock History"})]})}),"history"===X&&G?(0,t.jsx)("div",{className:"space-y-3",children:0===Q.length?(0,t.jsx)("div",{className:"text-white/50",children:"No stock movements for this part yet"}):Q.map(e=>{let a=e.createdAt?.toDate?e.createdAt.toDate().toLocaleString():new Date().toLocaleString();return(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-white/5 border border-white/10",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(r.Badge,{variant:"outline",className:"IN"===e.type?"text-xs bg-green-500/20 text-green-400 border-white/10":"text-xs bg-red-500/20 text-red-400 border-white/10",children:e.type}),(0,t.jsx)("div",{className:"text-white",children:e.quantity}),(0,t.jsx)("div",{className:"text-white/70",children:e.reason}),e.orderId?(0,t.jsxs)(r.Badge,{variant:"outline",className:"text-xs bg-white/5 border-white/10 text-white/70",children:["Order ",e.orderId]}):null]}),(0,t.jsxs)("div",{className:"text-right text-xs text-white/60",children:[(0,t.jsx)("div",{children:a}),(0,t.jsx)("div",{children:e.userId})]})]},(e.id??"")+a)})}):(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm text-white/60",children:"Part Name *"}),(0,t.jsx)(l.Input,{value:et.name,onChange:e=>ea({...et,name:e.target.value}),className:"bg-white/5 border-white/10"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm text-white/60",children:"SKU"}),(0,t.jsx)(l.Input,{value:et.sku,onChange:e=>ea({...et,sku:e.target.value}),className:"bg-white/5 border-white/10",placeholder:"e.g. IP13-SCR-001"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm text-white/60",children:"Category"}),(0,t.jsxs)(n.Select,{value:et.category,onValueChange:e=>ea({...et,category:e}),children:[(0,t.jsx)(n.SelectTrigger,{className:"bg-white/5 border-white/10",children:(0,t.jsx)(n.SelectValue,{})}),(0,t.jsx)(n.SelectContent,{children:N.map(e=>(0,t.jsx)(n.SelectItem,{value:e,children:e},e))})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm text-white/60",children:"Brand"}),(0,t.jsxs)(n.Select,{value:et.brand,onValueChange:e=>ea({...et,brand:e}),children:[(0,t.jsx)(n.SelectTrigger,{className:"bg-white/5 border-white/10",children:(0,t.jsx)(n.SelectValue,{})}),(0,t.jsx)(n.SelectContent,{children:f.map(e=>(0,t.jsx)(n.SelectItem,{value:e,children:e},e))})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm text-white/60",children:"Compatible Devices (comma separated)"}),(0,t.jsx)(l.Input,{value:et.compatibleDevices,onChange:e=>ea({...et,compatibleDevices:e.target.value}),className:"bg-white/5 border-white/10",placeholder:"e.g. iPhone 13, iPhone 13 Pro"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm text-white/60",children:"Quantity"}),(0,t.jsx)(l.Input,{type:"number",value:et.quantity,onChange:e=>ea({...et,quantity:Number(e.target.value)}),className:"bg-white/5 border-white/10"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm text-white/60",children:"Min Stock Alert"}),(0,t.jsx)(l.Input,{type:"number",value:et.minStock,onChange:e=>ea({...et,minStock:Number(e.target.value)}),className:"bg-white/5 border-white/10"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[ed&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm text-white/60",children:"Cost (AED)"}),(0,t.jsx)(l.Input,{type:"number",value:et.cost,onChange:e=>ea({...et,cost:Number(e.target.value)}),className:"bg-white/5 border-white/10"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm text-white/60",children:"Sell Price (AED)"}),(0,t.jsx)(l.Input,{type:"number",value:et.price,onChange:e=>ea({...et,price:Number(e.target.value)}),className:"bg-white/5 border-white/10"}),(0,t.jsx)("div",{className:"mt-1 text-xs text-white/50",children:(S=eo({cost:et.cost,price:et.price}),`Margin: ${Number.isFinite(S.margin)?Math.round(S.margin):0}%`)})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm text-white/60",children:"Storage Location"}),(0,t.jsx)(l.Input,{value:et.location,onChange:e=>ea({...et,location:e.target.value}),className:"bg-white/5 border-white/10",placeholder:"e.g. Shelf A-1"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm text-white/60",children:"Supplier"}),(0,t.jsxs)(n.Select,{value:et.supplier,onValueChange:e=>ea({...et,supplier:e}),children:[(0,t.jsx)(n.SelectTrigger,{className:"bg-white/5 border-white/10",children:(0,t.jsx)(n.SelectValue,{placeholder:"Select supplier"})}),(0,t.jsx)(n.SelectContent,{children:P.map(e=>(0,t.jsx)(n.SelectItem,{value:e.id,children:e.name},e.id))})]}),et.supplier&&P.find(e=>e.id===et.supplier)&&(0,t.jsxs)("div",{className:"mt-2 p-2 rounded bg-white/5 border border-white/10 text-xs text-white/70",children:[(0,t.jsx)("div",{children:P.find(e=>e.id===et.supplier)?.name}),(0,t.jsx)("div",{children:P.find(e=>e.id===et.supplier)?.phone}),P.find(e=>e.id===et.supplier)?.email&&(0,t.jsx)("div",{children:P.find(e=>e.id===et.supplier)?.email})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm text-white/60",children:"Description"}),(0,t.jsx)(l.Input,{value:et.description,onChange:e=>ea({...et,description:e.target.value}),className:"bg-white/5 border-white/10"})]})]}),(0,t.jsxs)(d.DialogFooter,{children:[(0,t.jsx)(i.Button,{variant:"outline",onClick:()=>F(!1),children:"Cancel"}),(0,t.jsxs)(i.Button,{className:"bg-cyan-500 hover:bg-cyan-400",onClick:ei,children:[G?"Update":"Add"," Part"]})]})]})]})]})})}),(0,t.jsxs)(s.Card,{className:"bg-white/5 border-white/10",children:[(0,t.jsx)(s.CardHeader,{children:(0,t.jsx)(s.CardTitle,{className:"text-white flex items-center justify-between",children:(0,t.jsxs)("span",{className:"flex items-center gap-2",children:[(0,t.jsx)(m.Package,{className:"w-5 h-5 text-cyan-400"}),"Parts Inventory (",es.length,")",eh>0&&(0,t.jsxs)(r.Badge,{variant:"outline",className:"text-xs bg-yellow-500/20 text-yellow-400 border-yellow-500/40",children:["Low: ",eh]})]})})}),(0,t.jsx)(s.CardContent,{children:0===es.length?(0,t.jsx)("div",{className:"text-center py-8 text-white/40",children:0===k.length?"No parts in inventory yet":"No parts match your filters"}):(0,t.jsx)("div",{className:"space-y-3",children:es.map(a=>{let s=0===a.quantity?{color:"bg-red-500/20 text-red-400",label:"Out of Stock"}:a.quantity<=a.minStock?{color:"bg-yellow-500/20 text-yellow-400",label:"Low Stock"}:{color:"bg-green-500/20 text-green-400",label:"In Stock"},l=eo(a),n=0===a.quantity||a.quantity<=a.minStock;return(0,t.jsxs)("div",{className:(0,y.cn)("flex items-center gap-4 p-4 rounded-lg bg-white/5 hover:bg-white/10 transition-colors border border-white/10",n&&(0===a.quantity?"ring-2 ring-red-500/40 border-red-500/30":"ring-2 ring-yellow-500/40 border-yellow-500/30")),children:[(0,t.jsx)("div",{className:"w-12 h-12 rounded-lg bg-cyan-500/10 flex items-center justify-center shrink-0",children:(0,t.jsx)(m.Package,{className:"w-6 h-6 text-cyan-400"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,t.jsx)("h4",{className:"font-medium text-white truncate",children:a.name}),(0,t.jsx)(r.Badge,{variant:"outline",className:"text-xs bg-white/5 border-white/10",children:a.sku||"No SKU"}),(0,t.jsx)(r.Badge,{variant:"outline",className:(0,y.cn)("text-xs",l.color),children:Number.isFinite(l.margin)?`${Math.round(l.margin)}%`:"â€”"})]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2 text-xs text-white/50",children:[(0,t.jsx)("span",{children:a.category}),(0,t.jsx)("span",{children:"â€¢"}),(0,t.jsx)("span",{children:a.brand}),a.location&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{children:"â€¢"}),(0,t.jsxs)("span",{children:["ðŸ“ ",a.location]})]}),a.supplier&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{children:"â€¢"}),(0,t.jsxs)("span",{children:["Supplier: ",P.find(e=>e.id===a.supplier)?.name||a.supplier]})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("p",{className:"text-lg font-bold text-white",children:a.quantity}),(0,t.jsx)(r.Badge,{className:(0,y.cn)("text-xs",s.color),children:s.label})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(i.Button,{variant:"ghost",size:"icon",onClick:()=>er(a.id,-1),className:"h-8 w-8 text-white/60 hover:text-white",children:"-"}),(0,t.jsx)(i.Button,{variant:"ghost",size:"icon",onClick:()=>er(a.id,1),className:"h-8 w-8 text-white/60 hover:text-white",children:"+"})]}),e&&(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(i.Button,{variant:"ghost",size:"icon",onClick:()=>{Y(a),ee(!0)},className:"h-8 w-8 text-white/60 hover:text-cyan-400",title:"View QR",children:(0,t.jsx)(w,{className:"w-4 h-4"})}),(0,t.jsx)(i.Button,{variant:"ghost",size:"icon",onClick:()=>{ea({name:a.name,sku:a.sku,category:a.category,brand:a.brand,compatibleDevices:a.compatibleDevices.join(", "),quantity:a.quantity,minStock:a.minStock,price:a.price,cost:a.cost,location:a.location,supplier:a.supplier,description:a.description}),$(a),W("details"),F(!0)},className:"h-8 w-8 text-white/60 hover:text-cyan-400",children:(0,t.jsx)(u,{className:"w-4 h-4"})}),(0,t.jsx)(i.Button,{variant:"ghost",size:"icon",onClick:()=>el(a.id),className:"h-8 w-8 text-white/60 hover:text-red-400",children:(0,t.jsx)(p.Trash2,{className:"w-4 h-4"})})]})]})]},a.id)})})})]}),(0,t.jsx)(d.Dialog,{open:Z,onOpenChange:ee,children:(0,t.jsxs)(d.DialogContent,{className:"bg-zinc-900 border-white/10 text-white max-w-sm",children:[(0,t.jsx)(d.DialogHeader,{children:(0,t.jsx)(d.DialogTitle,{children:"Part QR Code"})}),J&&(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"text-sm text-white/60",children:[J.name," â€¢ ",J.sku||"No SKU"]}),(0,t.jsx)("div",{className:"flex items-center justify-center p-3 bg-white/5 rounded-lg border border-white/10",children:(0,t.jsx)("img",{alt:"QR Code",src:`https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(`${J.id}|${J.sku||""}`)}`,className:"rounded"})}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(i.Button,{variant:"outline",onClick:()=>window.print(),children:"Print"}),(0,t.jsx)(i.Button,{variant:"outline",onClick:()=>er(J.id,1),children:"Scan (Add 1)"})]})]})]})})]})}e.s(["PartsInventory",()=>S],13942)},80613,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(59438),i=e.i(83814),l=e.i(27612),r=e.i(75254);let n=(0,r.default)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);var d=e.i(7233),o=e.i(88844),c=e.i(69638),m=e.i(78894);let h=(0,r.default)("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);var x=e.i(11605);e.i(51718);var u=e.i(18357);e.i(36180);var p=e.i(98925),g=e.i(16148),b=e.i(19455),w=e.i(87486),v=e.i(93479),j=e.i(76639),y=e.i(82148),N=e.i(13942);function f(){let e=(0,i.useT)(),[r,f]=(0,a.useState)(!1),[S,k]=(0,a.useState)("parts"),[C,P]=(0,a.useState)(!0),[M,I]=(0,a.useState)({totalParts:0,totalValue:0,lowStockCount:0,outOfStockCount:0}),[D,A]=(0,a.useState)([]),[T,B]=(0,a.useState)([]),[L,R]=(0,a.useState)([]),[U,q]=(0,a.useState)([]),[O,V]=(0,a.useState)([]),[E,H]=(0,a.useState)(""),[F,G]=(0,a.useState)(""),[$,X]=(0,a.useState)(""),[W,z]=(0,a.useState)(""),[K,Q]=(0,a.useState)(""),[_,J]=(0,a.useState)(""),[Y,Z]=(0,a.useState)(""),[ee,et]=(0,a.useState)(""),[ea,es]=(0,a.useState)("30"),[ei,el]=(0,a.useState)(null),[er,en]=(0,a.useState)(!1),[ed,eo]=(0,a.useState)("");(0,a.useEffect)(()=>{if(x.isMockMode){if(!window.localStorage.getItem("mock_admin_user"))return void window.location.replace("/admin/login");f(!0)}else{let e=(0,u.onAuthStateChanged)(x.auth,e=>{e?f(!0):window.location.replace("/admin/login")});return()=>e()}if(x.isMockMode){A([{id:"d1",name:"Smartphone",icon:"Smartphone"}]),B([{id:"b1",deviceId:"d1",name:"Apple"}]),R([{id:"m1",brandId:"b1",name:"iPhone 13"}]),q([{id:"i1",deviceId:"d1",name:"Screen",durationMinutes:30}]),V([{id:"p1",name:"iPhone 13 Screen",sku:"IP13-SCR-001",brand:"Apple",category:"Screens"}]),X("d1"),Z("d1"),z("b1"),P(!1);return}let e=(0,p.onSnapshot)((0,p.collection)(x.db,"devices"),e=>{let t=e.docs.map(e=>({id:e.id,...e.data()}));A(t),t.length>0&&!$&&X(t[0].id),t.length>0&&!Y&&Z(t[0].id)}),t=(0,p.onSnapshot)((0,p.collection)(x.db,"brands"),e=>{let t=e.docs.map(e=>({id:e.id,...e.data()}));B(t),t.length>0&&!W&&z(t[0].id)}),a=(0,p.onSnapshot)((0,p.collection)(x.db,"models"),e=>{R(e.docs.map(e=>({id:e.id,...e.data()})))}),s=(0,p.onSnapshot)((0,p.collection)(x.db,"issues"),e=>{q(e.docs.map(e=>({id:e.id,...e.data()}))),P(!1)}),i=(0,p.onSnapshot)((0,p.collection)(x.db,"parts"),e=>{V(e.docs.map(e=>({id:e.id,...e.data()})))});return()=>{e(),t(),a(),s(),i()}},[]);let ec=(0,a.useMemo)(()=>"all"!==$&&$?T.filter(e=>e.deviceId===$):T,[T,$]),em=(0,a.useMemo)(()=>L.filter(e=>e.brandId===W),[L,W]),eh=(0,a.useMemo)(()=>"all"!==Y&&Y?U.filter(e=>e.deviceId===Y):U,[U,Y]),ex=(0,a.useMemo)(()=>{let e=ed.trim().toLowerCase();return(e?O.filter(t=>(t.name||"").toLowerCase().includes(e)||(t.sku||"").toLowerCase().includes(e)||(t.brand||"").toLowerCase().includes(e)||(t.category||"").toLowerCase().includes(e)):O).slice(0,200)},[O,ed]),eu=async()=>{if(confirm("This will populate the database with default data. Continue?")){if(P(!0),x.isMockMode){await new Promise(e=>setTimeout(e,1e3)),alert("Data seeded successfully! (Mock Mode)"),P(!1);return}try{let e=(0,p.writeBatch)(x.db);for(let t of g.devices){let a=(0,p.doc)((0,p.collection)(x.db,"devices"));for(let s of(e.set(a,{name:t.name,icon:t.icon||"Smartphone"}),t.brands)){let t=(0,p.doc)((0,p.collection)(x.db,"brands"));for(let i of(e.set(t,{deviceId:a.id,name:s.name}),s.models)){let a=(0,p.doc)((0,p.collection)(x.db,"models"));e.set(a,{brandId:t.id,name:i})}}for(let s of t.issues){let t=(0,p.doc)((0,p.collection)(x.db,"issues"));e.set(t,{deviceId:a.id,name:s,durationMinutes:30})}}await e.commit(),alert("Data seeded successfully!")}catch(e){alert("Failed to seed data")}finally{P(!1)}}},ep=async()=>{if(!E.trim())return;let e=F||"Smartphone";if(x.isMockMode){A([...D,{id:`mock-${Date.now()}`,name:E,icon:e}]),H(""),G("");return}await (0,p.addDoc)((0,p.collection)(x.db,"devices"),{name:E,icon:e}),H(""),G("")},eg=async e=>{if(confirm("Delete this device and all its related data?")){if(x.isMockMode)return void A(D.filter(t=>t.id!==e));await (0,p.deleteDoc)((0,p.doc)(x.db,"devices",e))}},eb=async()=>{if($&&K.trim()){if(x.isMockMode){B([...T,{id:`mock-b-${Date.now()}`,deviceId:$,name:K}]),Q("");return}await (0,p.addDoc)((0,p.collection)(x.db,"brands"),{deviceId:$,name:K}),Q("")}},ew=async e=>{x.isMockMode?B(T.filter(t=>t.id!==e)):await (0,p.deleteDoc)((0,p.doc)(x.db,"brands",e))},ev=async()=>{if(W&&_.trim()){if(x.isMockMode){R([...L,{id:`mock-m-${Date.now()}`,brandId:W,name:_}]),J("");return}await (0,p.addDoc)((0,p.collection)(x.db,"models"),{brandId:W,name:_}),J("")}},ej=async e=>{x.isMockMode?R(L.filter(t=>t.id!==e)):await (0,p.deleteDoc)((0,p.doc)(x.db,"models",e))},ey=async()=>{if(Y&&ee.trim()){if(x.isMockMode){q([...U,{id:`mock-i-${Date.now()}`,deviceId:Y,name:ee,durationMinutes:Number(ea)||30}]),et("");return}await (0,p.addDoc)((0,p.collection)(x.db,"issues"),{deviceId:Y,name:ee,durationMinutes:Number(ea)||30}),et("")}},eN=async(e,t)=>{x.isMockMode?q(U.map(a=>a.id===e?{...a,durationMinutes:t}:a)):await (0,p.updateDoc)((0,p.doc)(x.db,"issues",e),{durationMinutes:t})},ef=async e=>{x.isMockMode?q(U.filter(t=>t.id!==e)):await (0,p.deleteDoc)((0,p.doc)(x.db,"issues",e))},eS=async(e,t)=>{let a=U.find(t=>t.id===e);if(!a)return;let s=Array.from(new Set([...a.recommendedParts||[],t]));x.isMockMode?q(U.map(t=>t.id===e?{...t,recommendedParts:s}:t)):await (0,p.updateDoc)((0,p.doc)(x.db,"issues",e),{recommendedParts:s})},ek=async(e,t)=>{let a=U.find(t=>t.id===e);if(!a)return;let s=(a.recommendedParts||[]).filter(e=>e!==t);x.isMockMode?q(U.map(t=>t.id===e?{...t,recommendedParts:s}:t)):await (0,p.updateDoc)((0,p.doc)(x.db,"issues",e),{recommendedParts:s})};return r?(0,t.jsxs)("section",{className:"pt-2 pb-8",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[(0,t.jsx)(s.GlassCard,{children:(0,t.jsxs)("div",{className:"p-4 flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 bg-cyan-500/20 rounded-lg",children:(0,t.jsx)(o.Package,{className:"w-5 h-5 text-cyan-400"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-white/60",children:e("Total Parts")}),(0,t.jsx)("p",{className:"text-2xl font-bold text-white",children:M.totalParts})]})]})}),(0,t.jsx)(s.GlassCard,{children:(0,t.jsxs)("div",{className:"p-4 flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 bg-green-500/20 rounded-lg",children:(0,t.jsx)(c.CheckCircle,{className:"w-5 h-5 text-green-400"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-white/60",children:e("Inventory Value")}),(0,t.jsxs)("p",{className:"text-2xl font-bold text-white",children:[M.totalValue.toLocaleString()," AED"]})]})]})}),(0,t.jsx)(s.GlassCard,{children:(0,t.jsxs)("div",{className:"p-4 flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 bg-yellow-500/20 rounded-lg",children:(0,t.jsx)(m.AlertTriangle,{className:"w-5 h-5 text-yellow-400"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-white/60",children:e("Low Stock Items")}),(0,t.jsx)("p",{className:"text-2xl font-bold text-white",children:M.lowStockCount})]})]})}),(0,t.jsx)(s.GlassCard,{children:(0,t.jsxs)("div",{className:"p-4 flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 bg-red-500/20 rounded-lg",children:(0,t.jsx)(m.AlertTriangle,{className:"w-5 h-5 text-red-400"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-white/60",children:e("Out of Stock Items")}),(0,t.jsx)("p",{className:"text-2xl font-bold text-white",children:M.outOfStockCount})]})]})})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,t.jsxs)("button",{onClick:()=>k("parts"),className:`px-3 py-2 rounded-lg text-sm flex items-center gap-2 ${"parts"===S?"bg-cyan-500 text-black":"bg-white/5 border border-white/10"}`,children:[e("Spare Parts"),M.lowStockCount>0&&(0,t.jsx)("span",{className:"px-2 py-0.5 rounded-full text-xs bg-yellow-500/20 text-yellow-400 border border-yellow-500/40",children:M.lowStockCount})]}),(0,t.jsx)("button",{onClick:()=>k("devices"),className:`px-3 py-2 rounded-lg text-sm ${"devices"===S?"bg-cyan-500 text-black":"bg-white/5 border border-white/10"}`,children:e("Devices List")}),(0,t.jsx)("button",{onClick:()=>k("models"),className:`px-3 py-2 rounded-lg text-sm ${"models"===S?"bg-cyan-500 text-black":"bg-white/5 border border-white/10"}`,children:e("Models Management")}),(0,t.jsx)("button",{onClick:()=>k("issues"),className:`px-3 py-2 rounded-lg text-sm ${"issues"===S?"bg-cyan-500 text-black":"bg-white/5 border border-white/10"}`,children:e("Issues Management")})]}),0===D.length&&!C&&(0,t.jsxs)("button",{onClick:eu,className:"px-3 py-2 rounded-lg text-sm bg-yellow-500/20 text-yellow-400 border border-yellow-500/50 flex items-center gap-2",children:[(0,t.jsx)(n,{className:"w-4 h-4"})," ",e("Seed Default Data")]}),(0,t.jsx)("a",{href:"/admin/inventory/suppliers",className:"px-3 py-2 rounded-lg text-sm bg-white/5 border border-white/10 hover:bg-white/10",children:e("Suppliers")})]}),"devices"===S&&(0,t.jsx)("div",{className:"grid md:grid-cols-1 gap-6",children:(0,t.jsxs)(s.GlassCard,{children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-4",children:e("Devices List")}),(0,t.jsxs)("div",{className:"flex flex-col md:flex-row gap-6 mb-8 items-start bg-white/5 p-6 rounded-xl border border-white/10",children:[(0,t.jsxs)("div",{className:"shrink-0",children:[(0,t.jsx)("label",{className:"text-xs text-white/50 mb-2 block",children:e("Device Icon")}),(0,t.jsx)(y.ImageUpload,{value:F,onChange:G,path:"devices"})]}),(0,t.jsxs)("div",{className:"flex-1 w-full",children:[(0,t.jsx)("label",{className:"text-xs text-white/50 mb-2 block",children:e("Device Name")}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("input",{value:E,onChange:e=>H(e.target.value),placeholder:e("Device Name"),className:"flex-1 px-4 py-3 bg-white/5 border border-white/10 rounded-xl focus:outline-none focus:border-cyan-500"}),(0,t.jsxs)("button",{onClick:ep,className:"px-6 py-3 bg-cyan-500 text-black rounded-xl font-semibold flex items-center gap-2",children:[(0,t.jsx)(d.Plus,{className:"w-5 h-5"})," ",e("Add")]})]}),(0,t.jsx)("p",{className:"text-xs text-white/30 mt-2",children:e("Upload an icon or a default placeholder will be used.")})]})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:D.map(a=>(0,t.jsxs)("div",{className:"flex items-center justify-between bg-white/5 rounded-xl p-4 border border-white/10 hover:border-white/20 transition-colors group",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"w-12 h-12 rounded-full bg-white/5 flex items-center justify-center overflow-hidden shrink-0 border border-white/10",children:a.icon.startsWith("http")?(0,t.jsx)("img",{src:a.icon,alt:a.name,className:"w-full h-full object-cover"}):(0,t.jsx)("span",{className:"text-xs font-bold text-white/50",children:a.icon.substring(0,2).toUpperCase()})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-lg",children:a.name}),(0,t.jsxs)("p",{className:"text-xs text-white/50",children:[T.filter(e=>e.deviceId===a.id).length," ",e("Brand")," â€¢",U.filter(e=>e.deviceId===a.id).length," ",e("Issue")]})]})]}),(0,t.jsx)("button",{onClick:()=>eg(a.id),className:"p-2 rounded-lg bg-white/5 hover:bg-red-500/20 text-white/50 hover:text-red-400 transition-colors opacity-0 group-hover:opacity-100",children:(0,t.jsx)(l.Trash2,{className:"w-4 h-4"})})]},a.id))})]})}),"models"===S&&(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,t.jsxs)(s.GlassCard,{children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-4",children:e("Brands Management")}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"text-xs text-white/50 mb-1 block",children:e("Select Device")}),(0,t.jsxs)("select",{value:$,onChange:e=>X(e.target.value),className:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white hover:bg-white/10 focus:border-cyan-500 focus:ring-cyan-500/30 outline-none",children:[(0,t.jsx)("option",{value:"all",className:"bg-black",children:e("All Devices")}),D.map(e=>(0,t.jsx)("option",{value:e.id,className:"bg-black",children:e.name},e.id))]})]}),(0,t.jsxs)("div",{className:"flex gap-2 mb-4",children:[(0,t.jsx)("input",{value:K,onChange:e=>Q(e.target.value),placeholder:e("New Brand Name"),className:"flex-1 px-4 py-3 bg-white/5 border border-white/10 rounded-xl focus:outline-none focus:border-cyan-500"}),(0,t.jsx)("button",{onClick:eb,className:"px-4 py-3 bg-cyan-500 text-black rounded-xl font-semibold",children:(0,t.jsx)(d.Plus,{className:"w-5 h-5"})})]}),(0,t.jsxs)("div",{className:"space-y-2 max-h-[400px] overflow-y-auto pr-2",children:[ec.map(e=>(0,t.jsxs)("div",{className:`flex items-center justify-between rounded-xl p-3 border cursor-pointer transition-all ${W===e.id?"bg-cyan-500/10 border-cyan-500/50":"bg-white/5 border-white/10 hover:bg-white/10"}`,onClick:()=>z(e.id),children:[(0,t.jsx)("span",{className:"font-medium",children:e.name}),(0,t.jsx)("button",{onClick:t=>{t.stopPropagation(),ew(e.id)},className:"p-2 rounded-lg hover:bg-red-500/20 text-white/50 hover:text-red-400 transition-colors",children:(0,t.jsx)(l.Trash2,{className:"w-4 h-4"})})]},e.id)),0===ec.length&&(0,t.jsx)("p",{className:"text-center text-white/30 py-4",children:e("No brands found")})]})]}),(0,t.jsxs)(s.GlassCard,{children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-4",children:e("Models Management")}),W?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsxs)("p",{className:"text-sm text-white/50 mb-2",children:[e("Adding models for:")," ",(0,t.jsx)("span",{className:"text-cyan-400",children:T.find(e=>e.id===W)?.name})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("input",{value:_,onChange:e=>J(e.target.value),placeholder:e("New Model Name"),className:"flex-1 px-4 py-3 bg-white/5 border border-white/10 rounded-xl focus:outline-none focus:border-cyan-500"}),(0,t.jsx)("button",{onClick:ev,className:"px-4 py-3 bg-cyan-500 text-black rounded-xl font-semibold",children:(0,t.jsx)(d.Plus,{className:"w-5 h-5"})})]})]}),(0,t.jsxs)("div",{className:"space-y-2 max-h-[400px] overflow-y-auto pr-2",children:[em.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between bg-white/5 rounded-xl p-3 border border-white/10",children:[(0,t.jsx)("span",{className:"text-sm",children:e.name}),(0,t.jsx)("button",{onClick:()=>ej(e.id),className:"p-2 rounded-lg hover:bg-red-500/20 text-white/50 hover:text-red-400 transition-colors",children:(0,t.jsx)(l.Trash2,{className:"w-4 h-4"})})]},e.id)),0===em.length&&(0,t.jsx)("p",{className:"text-center text-white/30 py-4",children:e("No models found")})]})]}):(0,t.jsx)("div",{className:"h-full flex items-center justify-center text-white/30",children:e("Select a brand to manage models")})]})]}),"issues"===S&&(0,t.jsx)("div",{className:"grid md:grid-cols-1 gap-6",children:(0,t.jsxs)(s.GlassCard,{children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-4",children:e("Issues Management")}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-4 mb-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs text-white/50 mb-1 block",children:e("Select Device")}),(0,t.jsxs)("select",{value:Y,onChange:e=>Z(e.target.value),className:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white hover:bg-white/10 focus:border-cyan-500 focus:ring-cyan-500/30 outline-none",children:[(0,t.jsx)("option",{value:"all",className:"bg-black",children:e("All Devices")}),D.map(e=>(0,t.jsx)("option",{value:e.id,className:"bg-black",children:e.name},e.id))]})]}),(0,t.jsxs)("div",{className:"flex gap-2 items-end",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("label",{className:"text-xs text-white/50 mb-1 block",children:e("Issue Name")}),(0,t.jsx)("input",{value:ee,onChange:e=>et(e.target.value),placeholder:e("e.g. Screen Replacement"),className:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl focus:outline-none focus:border-cyan-500"})]}),(0,t.jsxs)("div",{className:"w-24",children:[(0,t.jsx)("label",{className:"text-xs text-white/50 mb-1 block",children:e("Mins")}),(0,t.jsx)("input",{type:"number",value:ea,onChange:e=>es(e.target.value),className:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl focus:outline-none focus:border-cyan-500"})]}),(0,t.jsx)("button",{onClick:ey,className:"px-4 py-3 bg-cyan-500 text-black rounded-xl font-semibold mb-[1px]",children:(0,t.jsx)(d.Plus,{className:"w-5 h-5"})})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[eh.map(a=>(0,t.jsxs)("div",{className:"flex items-center justify-between bg-white/5 rounded-xl p-3 border border-white/10",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"font-medium",children:a.name}),(0,t.jsxs)("div",{className:"mt-2 flex flex-wrap gap-2",children:[(a.recommendedParts||[]).map(e=>{let a=O.find(t=>t.id===e);return(0,t.jsx)(w.Badge,{variant:"outline",className:"text-xs bg-white/5 border-white/10",children:a?`${a.name}`:e},e)}),0===(a.recommendedParts||[]).length&&(0,t.jsx)("span",{className:"text-xs text-white/40",children:e("No recommended parts linked")})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 bg-black/20 px-3 py-1 rounded-lg",children:[(0,t.jsx)("span",{className:"text-xs text-white/50",children:e("Duration:")}),(0,t.jsx)("input",{type:"number",defaultValue:a.durationMinutes,onBlur:e=>eN(a.id,Number(e.target.value)),className:"w-12 bg-transparent text-right text-sm focus:outline-none focus:text-cyan-400"}),(0,t.jsx)("span",{className:"text-xs text-white/50",children:e("min")})]}),(0,t.jsxs)(b.Button,{onClick:()=>{el(a),eo(""),en(!0)},variant:"outline",className:"px-3 py-2 rounded-lg text-sm",children:[(0,t.jsx)(h,{className:"w-4 h-4 mr-2"})," ",e("Manage Parts")]}),(0,t.jsx)("button",{onClick:()=>ef(a.id),className:"p-2 rounded-lg hover:bg-red-500/20 text-white/50 hover:text-red-400 transition-colors",children:(0,t.jsx)(l.Trash2,{className:"w-4 h-4"})})]})]},a.id)),0===eh.length&&(0,t.jsx)("p",{className:"text-center text-white/30 py-4",children:e("No issues found for this device")})]})]})}),(0,t.jsx)(j.Dialog,{open:er,onOpenChange:en,children:(0,t.jsxs)(j.DialogContent,{className:"bg-zinc-900 border-white/10 text-white max-w-2xl",children:[(0,t.jsx)(j.DialogHeader,{children:(0,t.jsx)(j.DialogTitle,{children:e("Recommended Parts")})}),ei&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"text-sm text-white/70",children:[e("Issue"),": ",(0,t.jsx)("span",{className:"text-white",children:ei.name})]}),(0,t.jsx)("div",{className:"relative",children:(0,t.jsx)(v.Input,{placeholder:e("Search parts by name, SKU, brand"),value:ed,onChange:e=>eo(e.target.value),className:"pl-3 bg-white/5 border-white/10 text-white"})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 gap-2 max-h-[50vh] overflow-y-auto pr-2",children:[ex.map(a=>{let s=(ei.recommendedParts||[]).includes(a.id);return(0,t.jsxs)("div",{className:"flex items-center justify-between bg-white/5 rounded-lg p-3 border border-white/10",children:[(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsx)("div",{className:"font-medium truncate",children:a.name}),(0,t.jsxs)("div",{className:"text-xs text-white/50 truncate",children:[a.brand||""," ",a.category?`â€¢ ${a.category}`:""," ",a.sku?`â€¢ ${a.sku}`:""]})]}),(0,t.jsx)("div",{className:"shrink-0",children:s?(0,t.jsx)(b.Button,{onClick:()=>ek(ei.id,a.id),variant:"outline",className:"bg-red-500/20 text-red-400 border-red-500/40",children:e("Remove")}):(0,t.jsx)(b.Button,{onClick:()=>eS(ei.id,a.id),className:"bg-cyan-500 hover:bg-cyan-400",children:e("Add")})})]},a.id)}),0===ex.length&&(0,t.jsx)("div",{className:"text-center py-6 text-white/40",children:e("No parts found")})]})]})]})}),"parts"===S&&(0,t.jsx)(N.PartsInventory,{isAdmin:!0,onStatsUpdate:e=>I(e)})]}):null}e.s(["default",()=>f],80613)}]);