module.exports=[42021,a=>{"use strict";var b=a.i(87924),c=a.i(68114);function d({children:a,className:d,hoverEffect:e=!0}){return(0,b.jsxs)("div",{className:(0,c.cn)("glass rounded-3xl p-6 sm:p-8 lg:p-10 relative overflow-hidden group transition-transform duration-300 will-change-transform",e&&"glass-hover hover:-translate-y-1 hover:shadow-2xl",d),children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500 pointer-events-none"}),a]})}a.s(["GlassCard",()=>d])},77994,a=>{"use strict";var b=a.i(72131);function c(a){let c=b.useRef({value:a,previous:a});return b.useMemo(()=>(c.current.value!==a&&(c.current.previous=c.current.value,c.current.value=a),c.current.previous),[a])}a.s(["usePrevious",()=>c])},81560,a=>{"use strict";let b=(0,a.i(70106).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);a.s(["Trash2",()=>b],81560)},15618,a=>{"use strict";let b=(0,a.i(70106).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);a.s(["Plus",()=>b],15618)},14574,a=>{"use strict";var b=a.i(87924),c=a.i(97942),d=a.i(22262),e=a.i(68114);function f({...a}){return(0,b.jsx)(c.Root,{"data-slot":"dialog",...a})}function g({...a}){return(0,b.jsx)(c.Trigger,{"data-slot":"dialog-trigger",...a})}function h({...a}){return(0,b.jsx)(c.Portal,{"data-slot":"dialog-portal",...a})}function i({className:a,...d}){return(0,b.jsx)(c.Overlay,{"data-slot":"dialog-overlay",className:(0,e.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",a),...d})}function j({className:a,children:f,showCloseButton:g=!0,...j}){return(0,b.jsxs)(h,{"data-slot":"dialog-portal",children:[(0,b.jsx)(i,{}),(0,b.jsxs)(c.Content,{"data-slot":"dialog-content",className:(0,e.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",a),...j,children:[f,g&&(0,b.jsxs)(c.Close,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,b.jsx)(d.XIcon,{}),(0,b.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function k({className:a,...c}){return(0,b.jsx)("div",{"data-slot":"dialog-header",className:(0,e.cn)("flex flex-col gap-2 text-center sm:text-left",a),...c})}function l({className:a,...c}){return(0,b.jsx)("div",{"data-slot":"dialog-footer",className:(0,e.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",a),...c})}function m({className:a,...d}){return(0,b.jsx)(c.Title,{"data-slot":"dialog-title",className:(0,e.cn)("text-lg leading-none font-semibold",a),...d})}function n({className:a,...d}){return(0,b.jsx)(c.Description,{"data-slot":"dialog-description",className:(0,e.cn)("text-muted-foreground text-sm",a),...d})}a.s(["Dialog",()=>f,"DialogContent",()=>j,"DialogDescription",()=>n,"DialogFooter",()=>l,"DialogHeader",()=>k,"DialogTitle",()=>m,"DialogTrigger",()=>g])},83497,a=>{"use strict";let b=(0,a.i(70106).default)("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);a.s(["Package",()=>b],83497)},15055,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(70121),e=a.i(50104),f=a.i(7554),g=a.i(25152),h=a.i(77994),i=a.i(3688),j=a.i(77192),k=a.i(30553),l="Checkbox",[m,n]=(0,e.createContextScope)(l),[o,p]=m(l),q=c.forwardRef((a,e)=>{let{__scopeCheckbox:h,name:i,checked:j,defaultChecked:l,required:m,disabled:n,value:p="on",onCheckedChange:q,form:r,...s}=a,[w,x]=c.useState(null),y=(0,d.useComposedRefs)(e,a=>x(a)),z=c.useRef(!1),A=!w||r||!!w.closest("form"),[B=!1,C]=(0,g.useControllableState)({prop:j,defaultProp:l,onChange:q}),D=c.useRef(B);return c.useEffect(()=>{let a=w?.form;if(a){let b=()=>C(D.current);return a.addEventListener("reset",b),()=>a.removeEventListener("reset",b)}},[w,C]),(0,b.jsxs)(o,{scope:h,state:B,disabled:n,children:[(0,b.jsx)(k.Primitive.button,{type:"button",role:"checkbox","aria-checked":u(B)?"mixed":B,"aria-required":m,"data-state":v(B),"data-disabled":n?"":void 0,disabled:n,value:p,...s,ref:y,onKeyDown:(0,f.composeEventHandlers)(a.onKeyDown,a=>{"Enter"===a.key&&a.preventDefault()}),onClick:(0,f.composeEventHandlers)(a.onClick,a=>{C(a=>!!u(a)||!a),A&&(z.current=a.isPropagationStopped(),z.current||a.stopPropagation())})}),A&&(0,b.jsx)(t,{control:w,bubbles:!z.current,name:i,value:p,checked:B,required:m,disabled:n,form:r,style:{transform:"translateX(-100%)"},defaultChecked:!u(l)&&l})]})});q.displayName=l;var r="CheckboxIndicator",s=c.forwardRef((a,c)=>{let{__scopeCheckbox:d,forceMount:e,...f}=a,g=p(r,d);return(0,b.jsx)(j.Presence,{present:e||u(g.state)||!0===g.state,children:(0,b.jsx)(k.Primitive.span,{"data-state":v(g.state),"data-disabled":g.disabled?"":void 0,...f,ref:c,style:{pointerEvents:"none",...a.style}})})});s.displayName=r;var t=a=>{let{control:d,checked:e,bubbles:f=!0,defaultChecked:g,...j}=a,k=c.useRef(null),l=(0,h.usePrevious)(e),m=(0,i.useSize)(d);c.useEffect(()=>{let a=k.current,b=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(l!==e&&b){let c=new Event("click",{bubbles:f});a.indeterminate=u(e),b.call(a,!u(e)&&e),a.dispatchEvent(c)}},[l,e,f]);let n=c.useRef(!u(e)&&e);return(0,b.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:g??n.current,...j,tabIndex:-1,ref:k,style:{...a.style,...m,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function u(a){return"indeterminate"===a}function v(a){return u(a)?"indeterminate":a?"checked":"unchecked"}var w=a.i(6406),x=a.i(68114);function y({className:a,...c}){return(0,b.jsx)(q,{"data-slot":"checkbox",className:(0,x.cn)("peer bg-white/5 text-white size-6 shrink-0 rounded-full border-2 border-white/20 shadow-xs transition-[border,background-color] outline-none hover:border-cyan-400 focus-visible:border-cyan-500 focus-visible:ring-cyan-500/30 focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-cyan-500 data-[state=checked]:border-cyan-500 data-[state=checked]:text-black",a),...c,children:(0,b.jsx)(s,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:(0,b.jsx)(w.CheckIcon,{className:"size-4"})})})}a.s(["Checkbox",()=>y],15055)},1162,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(42021),e=a.i(1312),f=a.i(99570),g=a.i(66718),h=a.i(15055),i=a.i(14574),j=a.i(58712);a.i(69387);var k=a.i(60574),l=a.i(81560),m=a.i(15618),n=a.i(83497),o=a.i(60246);function p(){let a=(0,e.useT)(),[p,q]=(0,c.useState)(!0),[r,s]=(0,c.useState)([]),[t,u]=(0,c.useState)([]),[v,w]=(0,c.useState)(!1),[x,y]=(0,c.useState)(null),[z,A]=(0,c.useState)({name:"",phone:"",email:"",partsIds:[]});(0,c.useEffect)(()=>{if(j.isMockMode){s(a=>a.length?a:[{id:"mock-s1",name:"Default Supplier",phone:"971500000000",email:"supplier@example.com",partsIds:[]}]),u(a=>a.length?a:[{id:"mock-p1",name:"Sample Part",sku:"SAMPLE-001"}]);return}let a=(0,k.onSnapshot)((0,k.collection)(j.db,"suppliers"),a=>{s(a.docs.map(a=>({id:a.id,...a.data()})))}),b=(0,k.onSnapshot)((0,k.collection)(j.db,"parts"),a=>{u(a.docs.map(a=>({id:a.id,...a.data()})))});return()=>{a(),b()}},[]);let B=()=>{A({name:"",phone:"",email:"",partsIds:[]}),y(null)},C=async()=>{if(z.name.trim()&&z.phone.trim()){if(x)if(j.isMockMode)s(a=>a.map(a=>a.id===x.id?{...a,...z}:a));else for(let a of(await (0,k.updateDoc)((0,k.doc)(j.db,"suppliers",x.id),{name:z.name,phone:z.phone,email:z.email||"",partsIds:z.partsIds}),t))z.partsIds.includes(a.id)?await (0,k.updateDoc)((0,k.doc)(j.db,"parts",a.id),{supplier:x.id}):a.supplier===x.id&&await (0,k.updateDoc)((0,k.doc)(j.db,"parts",a.id),{supplier:""});else if(j.isMockMode){let a=`mock-${Date.now()}`;s(b=>[...b,{id:a,name:z.name,phone:z.phone,email:z.email||"",partsIds:z.partsIds}])}else{let a=await (0,k.addDoc)((0,k.collection)(j.db,"suppliers"),{name:z.name,phone:z.phone,email:z.email||"",partsIds:z.partsIds});for(let b of z.partsIds)await (0,k.updateDoc)((0,k.doc)(j.db,"parts",b),{supplier:a.id})}w(!1),B()}},D=async b=>{if(confirm(a("Delete this supplier?")))if(j.isMockMode)s(a=>a.filter(a=>a.id!==b));else for(let a of(await (0,k.deleteDoc)((0,k.doc)(j.db,"suppliers",b)),t.filter(a=>a.supplier===b)))await (0,k.updateDoc)((0,k.doc)(j.db,"parts",a.id),{supplier:""})},E=(0,c.useMemo)(()=>{let a={};for(let b of t)b.supplier&&(a[b.supplier]=(a[b.supplier]||0)+1);return a},[t]);return p?(0,b.jsxs)("section",{className:"pt-2 pb-8",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between gap-3 mb-6",children:[(0,b.jsxs)("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[(0,b.jsx)(o.Users,{className:"w-5 h-5 text-cyan-400"})," ",a("Suppliers")]}),(0,b.jsxs)(f.Button,{onClick:()=>{B(),w(!0)},className:"bg-cyan-500 hover:bg-cyan-400 text-black",children:[(0,b.jsx)(m.Plus,{className:"w-4 h-4 mr-2"})," ",a("Add Supplier")]})]}),(0,b.jsx)(d.GlassCard,{className:"p-0 overflow-hidden",children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full text-left text-sm text-white/80",children:[(0,b.jsx)("thead",{className:"bg-white/5 text-white border-b border-white/10",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"p-4 font-medium",children:a("Name")}),(0,b.jsx)("th",{className:"p-4 font-medium",children:a("Phone")}),(0,b.jsx)("th",{className:"p-4 font-medium",children:a("Email")}),(0,b.jsx)("th",{className:"p-4 font-medium",children:a("Linked Parts")}),(0,b.jsx)("th",{className:"p-4 font-medium text-right",children:a("Actions")})]})}),(0,b.jsxs)("tbody",{className:"divide-y divide-white/5",children:[r.map(c=>(0,b.jsxs)("tr",{className:"hover:bg-white/5 transition-colors",children:[(0,b.jsx)("td",{className:"p-4",children:(0,b.jsx)("span",{className:"font-medium text-white",children:c.name})}),(0,b.jsx)("td",{className:"p-4",children:c.phone}),(0,b.jsx)("td",{className:"p-4",children:c.email||"-"}),(0,b.jsx)("td",{className:"p-4",children:(0,b.jsx)("span",{className:"font-mono bg-cyan-500/10 text-cyan-400 px-2 py-1 rounded",children:E[c.id]||0})}),(0,b.jsx)("td",{className:"p-4 text-right",children:(0,b.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,b.jsx)(f.Button,{size:"sm",variant:"ghost",className:"hover:bg-white/10",onClick:()=>{A({name:c.name,phone:c.phone,email:c.email||"",partsIds:c.partsIds||[]}),y(c),w(!0)},children:a("Edit")}),(0,b.jsx)(f.Button,{size:"icon",variant:"ghost",className:"h-8 w-8 hover:bg-red-500/20",onClick:()=>D(c.id),children:(0,b.jsx)(l.Trash2,{className:"w-4 h-4 text-red-400"})})]})})]},c.id)),0===r.length&&(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:5,className:"p-8 text-center text-white/40",children:a("No suppliers found")})})]})]})})}),(0,b.jsx)(i.Dialog,{open:v,onOpenChange:a=>!a&&w(!1),children:(0,b.jsxs)(i.DialogContent,{className:"bg-zinc-950 border-white/10 text-white max-h-[90vh] overflow-y-auto",children:[(0,b.jsx)(i.DialogHeader,{children:(0,b.jsx)(i.DialogTitle,{children:x?a("Edit Supplier"):a("Add Supplier")})}),(0,b.jsxs)("div",{className:"space-y-4 py-2",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"text-xs text-white/50 mb-1 block",children:[a("Name")," *"]}),(0,b.jsx)(g.Input,{value:z.name,onChange:a=>A({...z,name:a.target.value}),className:"bg-white/5 border-white/10"})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"text-xs text-white/50 mb-1 block",children:[a("Phone")," *"]}),(0,b.jsx)(g.Input,{value:z.phone,onChange:a=>A({...z,phone:a.target.value}),className:"bg-white/5 border-white/10"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-xs text-white/50 mb-1 block",children:a("Email")}),(0,b.jsx)(g.Input,{type:"email",value:z.email,onChange:a=>A({...z,email:a.target.value}),className:"bg-white/5 border-white/10"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-xs text-white/50 mb-1 block",children:a("Link Parts")}),(0,b.jsxs)("div",{className:"grid sm:grid-cols-2 md:grid-cols-3 gap-2",children:[t.map(a=>(0,b.jsxs)("div",{className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-white/5 border border-white/10",children:[(0,b.jsx)(h.Checkbox,{id:`part-${a.id}`,checked:z.partsIds.includes(a.id),onCheckedChange:()=>{var b;return b=a.id,void A(a=>{let c=a.partsIds.includes(b)?a.partsIds.filter(a=>a!==b):[...a.partsIds,b];return{...a,partsIds:c}})}}),(0,b.jsxs)("label",{htmlFor:`part-${a.id}`,className:"text-xs text-white/80 flex-1 truncate",children:[(0,b.jsxs)("span",{className:"inline-flex items-center gap-1",children:[(0,b.jsx)(n.Package,{className:"w-3 h-3 text-cyan-400"})," ",a.name]}),(0,b.jsxs)("span",{className:"text-white/40",children:[" â€¢ ",a.sku]})]})]},a.id)),0===t.length&&(0,b.jsx)("div",{className:"text-white/40 text-sm",children:a("No parts available")})]})]})]}),(0,b.jsxs)(i.DialogFooter,{children:[(0,b.jsx)(f.Button,{variant:"outline",onClick:()=>w(!1),className:"border-white/10 text-white hover:bg-white/10",children:a("Cancel")}),(0,b.jsx)(f.Button,{onClick:C,className:"bg-cyan-500 hover:bg-cyan-400 text-black",children:x?a("Save"):a("Add")})]})]})})]}):null}a.s(["default",()=>p])}];

//# sourceMappingURL=_d6ba3125._.js.map