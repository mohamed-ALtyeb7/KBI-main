module.exports=[87532,a=>{"use strict";let b=(0,a.i(70106).default)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);a.s(["Search",()=>b],87532)},24987,a=>{"use strict";let b=(0,a.i(70106).default)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);a.s(["MapPin",()=>b],24987)},1631,a=>{"use strict";let b=(0,a.i(70106).default)("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);a.s(["Smartphone",()=>b],1631)},34157,a=>{"use strict";let b=(0,a.i(70106).default)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);a.s(["default",()=>b])},6406,a=>{"use strict";var b=a.i(34157);a.s(["CheckIcon",()=>b.default])},77994,a=>{"use strict";var b=a.i(72131);function c(a){let c=b.useRef({value:a,previous:a});return b.useMemo(()=>(c.current.value!==a&&(c.current.previous=c.current.value,c.current.value=a),c.current.previous),[a])}a.s(["usePrevious",()=>c])},37738,7827,a=>{"use strict";var b=a.i(72131),c=a.i(50104),d=a.i(70121),e=a.i(11011),f=a.i(87924);function g(a){let g=a+"CollectionProvider",[h,i]=(0,c.createContextScope)(g),[j,k]=h(g,{collectionRef:{current:null},itemMap:new Map}),l=a=>{let{scope:c,children:d}=a,e=b.default.useRef(null),g=b.default.useRef(new Map).current;return(0,f.jsx)(j,{scope:c,itemMap:g,collectionRef:e,children:d})};l.displayName=g;let m=a+"CollectionSlot",n=b.default.forwardRef((a,b)=>{let{scope:c,children:g}=a,h=k(m,c),i=(0,d.useComposedRefs)(b,h.collectionRef);return(0,f.jsx)(e.Slot,{ref:i,children:g})});n.displayName=m;let o=a+"CollectionItemSlot",p="data-radix-collection-item",q=b.default.forwardRef((a,c)=>{let{scope:g,children:h,...i}=a,j=b.default.useRef(null),l=(0,d.useComposedRefs)(c,j),m=k(o,g);return b.default.useEffect(()=>(m.itemMap.set(j,{ref:j,...i}),()=>void m.itemMap.delete(j))),(0,f.jsx)(e.Slot,{...{[p]:""},ref:l,children:h})});return q.displayName=o,[{Provider:l,Slot:n,ItemSlot:q},function(c){let d=k(a+"CollectionConsumer",c);return b.default.useCallback(()=>{let a=d.collectionRef.current;if(!a)return[];let b=Array.from(a.querySelectorAll(`[${p}]`));return Array.from(d.itemMap.values()).sort((a,c)=>b.indexOf(a.ref.current)-b.indexOf(c.ref.current))},[d.collectionRef,d.itemMap])},i]}a.s(["createCollection",()=>g],37738);var h=b.createContext(void 0);function i(a){let c=b.useContext(h);return a||c||"ltr"}a.s(["useDirection",()=>i],7827)},86304,a=>{"use strict";var b=a.i(87924),c=a.i(11011),d=a.i(187),e=a.i(68114);let f=(0,d.cva)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function g({className:a,variant:d,asChild:g=!1,...h}){let i=g?c.Slot:"span";return(0,b.jsx)(i,{"data-slot":"badge",className:(0,e.cn)(f({variant:d}),a),...h})}a.s(["Badge",()=>g])},91119,a=>{"use strict";var b=a.i(87924),c=a.i(68114);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card",className:(0,c.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...d})}function e({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-header",className:(0,c.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...d})}function f({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-title",className:(0,c.cn)("leading-none font-semibold",a),...d})}function g({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-content",className:(0,c.cn)("px-6",a),...d})}a.s(["Card",()=>d,"CardContent",()=>g,"CardHeader",()=>e,"CardTitle",()=>f])},53407,a=>{"use strict";var b=a.i(1312);function c(){let{lang:a,setLang:c}=(0,b.useLanguage)();return{language:a,setLanguage:c,t:(0,b.useT)()}}a.s(["useLanguage",()=>c])},95477,a=>{"use strict";a.i(69387);var b=a.i(60574),c=a.i(58712);async function d(a){try{let d=(await (0,b.getDoc)((0,b.doc)(c.db,"users",a.uid))).data(),e=d?.technicianId||null;if(!e){let d=(0,b.query)((0,b.collection)(c.db,"technicians"),(0,b.where)("uid","==",a.uid)),f=await (0,b.getDocs)(d);if(f.empty){if(a.email){let d=(0,b.query)((0,b.collection)(c.db,"technicians"),(0,b.where)("email","==",a.email)),f=await (0,b.getDocs)(d);f.empty||(e=f.docs[0].id)}}else e=f.docs[0].id}return e}catch(a){return console.error("Resolve technicianId error:",a),null}}a.s(["getTechnicianIdFromUser",()=>d])},72892,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(91119),e=a.i(1631),f=a.i(41675),g=a.i(24987),h=a.i(87532);a.i(69387);var i=a.i(60574),j=a.i(58712),k=a.i(53407),l=a.i(50944),m=a.i(86304),n=a.i(66718),o=a.i(80701),p=a.i(95477);function q(){let{t:a}=(0,k.useLanguage)(),q=(0,l.useRouter)(),[r,s]=(0,c.useState)(!0),[t,u]=(0,c.useState)([]),[v,w]=(0,c.useState)([]),[x,y]=(0,c.useState)(null),[z,A]=(0,c.useState)(null),[B,C]=(0,c.useState)(""),[D,E]=(0,c.useState)("all");return(0,c.useEffect)(()=>{let a=j.auth.onAuthStateChanged(a=>y(a));return()=>a()},[]),(0,c.useEffect)(()=>{x&&(async()=>{A(await (0,p.getTechnicianIdFromUser)({uid:x.uid,email:x.email||void 0}))})()},[x]),(0,c.useEffect)(()=>{if(!x?.uid)return;if(j.isMockMode){u([]),w([]),s(!1);return}s(!0);let a=(0,i.collection)(j.db,"orders"),b=(0,i.query)(a,(0,i.where)("technicianId","==",x.uid),(0,i.orderBy)("createdAt","desc")),c=(0,i.onSnapshot)(b,a=>{let b=a.docs.map(a=>({id:a.id,...a.data()}));u(b),w(b),s(!1)});return()=>c()},[x]),(0,c.useEffect)(()=>{let a=t;if(B){let b=B.toLowerCase();a=a.filter(a=>a.id.toLowerCase().includes(b)||a.device?.toLowerCase().includes(b)||a.customerName?.toLowerCase().includes(b))}"all"!==D&&(a=a.filter(a=>a.status===D)),w(a)},[B,D,t]),(0,b.jsxs)("div",{className:"space-y-6 animate-in fade-in duration-500",children:[(0,b.jsx)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold tracking-tight text-white",children:a("Assigned Orders")}),(0,b.jsx)("p",{className:"text-white/60 mt-1",children:a("Manage your daily tasks")})]})}),(0,b.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 bg-white/5 p-4 rounded-lg border border-white/10 backdrop-blur-sm",children:[(0,b.jsxs)("div",{className:"relative flex-1",children:[(0,b.jsx)(h.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-white/50"}),(0,b.jsx)(n.Input,{placeholder:a("Search by ID, Device, Customer..."),className:"pl-9 bg-black/20 border-white/10 text-white placeholder:text-white/40 focus:border-cyan-500/50",value:B,onChange:a=>C(a.target.value)})]}),(0,b.jsx)("div",{className:"w-full md:w-48",children:(0,b.jsxs)(o.Select,{value:D,onValueChange:E,children:[(0,b.jsx)(o.SelectTrigger,{className:"bg-black/20 border-white/10 text-white",children:(0,b.jsx)(o.SelectValue,{placeholder:a("Filter by Status")})}),(0,b.jsxs)(o.SelectContent,{className:"bg-zinc-900 border-white/10 text-white",children:[(0,b.jsx)(o.SelectItem,{value:"all",children:a("All Statuses")}),(0,b.jsx)(o.SelectItem,{value:"pending",children:a("Pending")}),(0,b.jsx)(o.SelectItem,{value:"on_way",children:a("On the Way")}),(0,b.jsx)(o.SelectItem,{value:"in_progress",children:a("In Progress")}),(0,b.jsx)(o.SelectItem,{value:"completed",children:a("Completed")})]})]})})]}),(0,b.jsx)("div",{className:"grid gap-4",children:r?(0,b.jsx)("div",{className:"text-center py-20 text-white/50",children:a("Loading orders...")}):0===v.length?(0,b.jsx)("div",{className:"text-center py-20 text-white/50 border border-dashed border-white/10 rounded-lg",children:(0,b.jsx)("p",{children:a("No orders found matching your criteria.")})}):v.map(a=>(0,b.jsx)(d.Card,{className:"bg-white/5 border-white/10 hover:bg-white/10 transition-all cursor-pointer group",onClick:()=>q.push(`/technician/order/${a.id}`),children:(0,b.jsx)(d.CardContent,{className:"p-4 md:p-6",children:(0,b.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 justify-between",children:[(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsx)("div",{className:"h-14 w-14 rounded-xl bg-gradient-to-br from-cyan-500/20 to-blue-500/20 flex items-center justify-center shrink-0 border border-white/5 group-hover:border-cyan-500/30 transition-colors",children:(0,b.jsx)(e.Smartphone,{className:"h-7 w-7 text-cyan-400"})}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,b.jsx)("h3",{className:"font-semibold text-white text-lg",children:a.device}),(0,b.jsx)(m.Badge,{variant:"outline",className:"bg-white/5 border-white/10 text-white/60 text-[10px] h-5",children:a.id})]}),(0,b.jsx)("p",{className:"text-white/70 mb-2",children:a.issue}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-3 text-sm text-white/50",children:[(0,b.jsxs)("span",{className:"flex items-center gap-1.5",children:[(0,b.jsx)(f.Calendar,{className:"w-3.5 h-3.5"})," ",new Date(a.date||a.createdAt).toLocaleDateString()]}),(0,b.jsxs)("span",{className:"flex items-center gap-1.5",children:[(0,b.jsx)(g.MapPin,{className:"w-3.5 h-3.5"})," ",a.location||"N/A"]})]})]})]}),(0,b.jsxs)("div",{className:"flex flex-row md:flex-col items-center md:items-end justify-between md:justify-center gap-3 pl-0 md:pl-4 md:border-l border-white/10",children:[(0,b.jsx)(m.Badge,{className:`${(a=>{switch(a){case"pending":return"bg-yellow-500/20 text-yellow-500 border-yellow-500/50";case"in_progress":return"bg-blue-500/20 text-blue-500 border-blue-500/50";case"on_way":return"bg-purple-500/20 text-purple-500 border-purple-500/50";case"completed":return"bg-green-500/20 text-green-500 border-green-500/50";case"cancelled":return"bg-red-500/20 text-red-500 border-red-500/50";default:return"bg-gray-500/20 text-gray-500 border-gray-500/50"}})(a.status)} px-3 py-1 text-sm capitalize`,children:a.status.replace("_"," ")}),(0,b.jsxs)("span",{className:"text-xl font-bold text-white",children:[a.price," ",(0,b.jsx)("span",{className:"text-sm font-normal text-white/50",children:"AED"})]})]})]})})},a.id))})]})}a.s(["default",()=>q])}];

//# sourceMappingURL=_ddcf8fce._.js.map