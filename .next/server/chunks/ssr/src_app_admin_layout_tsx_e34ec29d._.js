module.exports=[88615,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(38246),f=a.i(88621),g=a.i(30617),h=a.i(38784),i=a.i(60246),j=a.i(1631),k=a.i(21161),l=a.i(20005),m=a.i(41961),n=a.i(63588),o=a.i(11300),p=a.i(50104),q=a.i(46872),r=a.i(72752),s=a.i(30553),t="Avatar",[u,v]=(0,p.createContextScope)(t),[w,x]=u(t),y=c.forwardRef((a,d)=>{let{__scopeAvatar:e,...f}=a,[g,h]=c.useState("idle");return(0,b.jsx)(w,{scope:e,imageLoadingStatus:g,onImageLoadingStatusChange:h,children:(0,b.jsx)(s.Primitive.span,{...f,ref:d})})});y.displayName=t;var z="AvatarImage",A=c.forwardRef((a,d)=>{let{__scopeAvatar:e,src:f,onLoadingStatusChange:g=()=>{},...h}=a,i=x(z,e),j=function(a,b){let[d,e]=c.useState("idle");return(0,r.useLayoutEffect)(()=>{if(!a)return void e("error");let c=!0,d=new window.Image,f=a=>()=>{c&&e(a)};return e("loading"),d.onload=f("loaded"),d.onerror=f("error"),d.src=a,b&&(d.referrerPolicy=b),()=>{c=!1}},[a,b]),d}(f,h.referrerPolicy),k=(0,q.useCallbackRef)(a=>{g(a),i.onImageLoadingStatusChange(a)});return(0,r.useLayoutEffect)(()=>{"idle"!==j&&k(j)},[j,k]),"loaded"===j?(0,b.jsx)(s.Primitive.img,{...h,ref:d,src:f}):null});A.displayName=z;var B="AvatarFallback",C=c.forwardRef((a,d)=>{let{__scopeAvatar:e,delayMs:f,...g}=a,h=x(B,e),[i,j]=c.useState(void 0===f);return c.useEffect(()=>{if(void 0!==f){let a=window.setTimeout(()=>j(!0),f);return()=>window.clearTimeout(a)}},[f]),i&&"loaded"!==h.imageLoadingStatus?(0,b.jsx)(s.Primitive.span,{...g,ref:d}):null});C.displayName=B;var D=a.i(68114);function E({className:a,...c}){return(0,b.jsx)(y,{"data-slot":"avatar",className:(0,D.cn)("relative flex size-8 shrink-0 overflow-hidden rounded-full",a),...c})}function F({className:a,...c}){return(0,b.jsx)(A,{"data-slot":"avatar-image",className:(0,D.cn)("aspect-square size-full",a),...c})}function G({className:a,...c}){return(0,b.jsx)(C,{"data-slot":"avatar-fallback",className:(0,D.cn)("bg-muted flex size-full items-center justify-center rounded-full",a),...c})}var H=a.i(99570),I=a.i(1312),J=a.i(58712);a.i(30485);var K=a.i(31052);let L=[{title:"Dashboard",url:"/admin",icon:g.LayoutDashboard},{title:"Orders",url:"/admin/orders",icon:h.ShoppingCart},{title:"Technicians",url:"/admin/technicians",icon:i.Users},{title:"Inventory",url:"/admin/inventory",icon:j.Smartphone}],M=[{title:"Contact Inbox",url:"/admin/inbox/contact",icon:n.MessageSquare},{title:"Corporate Requests",url:"/admin/inbox/corporate",icon:m.Briefcase},{title:"Technician Requests",url:"/admin/requests",icon:o.ClipboardList}],N=[{title:"Settings",url:"/admin/settings",icon:k.Settings}];function O({...a}){let c=(0,d.usePathname)(),g=(0,d.useRouter)(),h=(0,I.useT)(),i=async()=>{if(J.isMockMode){localStorage.removeItem("mock_admin_user"),g.push("/admin/login");return}await (0,K.signOut)(J.auth),g.push("/admin/login")};return(0,b.jsxs)(f.Sidebar,{collapsible:"icon",...a,children:[(0,b.jsx)(f.SidebarHeader,{children:(0,b.jsxs)("div",{className:"flex items-center gap-2 p-2",children:[(0,b.jsx)("div",{className:"flex aspect-square size-8 items-center justify-center rounded-lg bg-cyan-500 text-sidebar-primary-foreground",children:(0,b.jsx)("span",{className:"font-bold text-white",children:"KBI"})}),(0,b.jsxs)("div",{className:"grid flex-1 text-left text-sm leading-tight",children:[(0,b.jsx)("span",{className:"truncate font-semibold",children:h("Admin Panel")}),(0,b.jsx)("span",{className:"truncate text-xs",children:h("Repair Services")})]})]})}),(0,b.jsxs)(f.SidebarContent,{children:[(0,b.jsxs)(f.SidebarGroup,{children:[(0,b.jsx)(f.SidebarGroupLabel,{children:h("Management")}),(0,b.jsx)(f.SidebarGroupContent,{children:(0,b.jsx)(f.SidebarMenu,{children:L.map(a=>(0,b.jsx)(f.SidebarMenuItem,{children:(0,b.jsx)(f.SidebarMenuButton,{asChild:!0,isActive:c===a.url,tooltip:h(a.title),children:(0,b.jsxs)(e.default,{href:a.url,children:[(0,b.jsx)(a.icon,{}),(0,b.jsx)("span",{children:h(a.title)})]})})},a.title))})})]}),(0,b.jsxs)(f.SidebarGroup,{children:[(0,b.jsx)(f.SidebarGroupLabel,{children:h("Inbox")}),(0,b.jsx)(f.SidebarGroupContent,{children:(0,b.jsx)(f.SidebarMenu,{children:M.map(a=>(0,b.jsx)(f.SidebarMenuItem,{children:(0,b.jsx)(f.SidebarMenuButton,{asChild:!0,isActive:c===a.url,tooltip:h(a.title),children:(0,b.jsxs)(e.default,{href:a.url,children:[(0,b.jsx)(a.icon,{}),(0,b.jsx)("span",{children:h(a.title)})]})})},a.title))})})]}),(0,b.jsxs)(f.SidebarGroup,{children:[(0,b.jsx)(f.SidebarGroupLabel,{children:h("Configuration")}),(0,b.jsx)(f.SidebarGroupContent,{children:(0,b.jsx)(f.SidebarMenu,{children:N.map(a=>(0,b.jsx)(f.SidebarMenuItem,{children:(0,b.jsx)(f.SidebarMenuButton,{asChild:!0,isActive:c===a.url,tooltip:h(a.title),children:(0,b.jsxs)(e.default,{href:a.url,children:[(0,b.jsx)(a.icon,{}),(0,b.jsx)("span",{children:h(a.title)})]})})},a.title))})})]})]}),(0,b.jsx)(f.SidebarFooter,{children:(0,b.jsx)(f.SidebarMenu,{children:(0,b.jsx)(f.SidebarMenuItem,{children:(0,b.jsxs)("div",{className:"flex items-center gap-3 p-2",children:[(0,b.jsxs)(E,{className:"h-8 w-8 rounded-lg",children:[(0,b.jsx)(F,{src:"/placeholder-user.jpg",alt:"Admin"}),(0,b.jsx)(G,{className:"rounded-lg",children:"AD"})]}),(0,b.jsxs)("div",{className:"grid flex-1 text-left text-sm leading-tight",children:[(0,b.jsx)("span",{className:"truncate font-semibold",children:h("Admin User")}),(0,b.jsx)("span",{className:"truncate text-xs",children:"info@kbi.services"})]}),(0,b.jsx)(H.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 ml-auto",onClick:i,children:(0,b.jsx)(l.LogOut,{className:"size-4"})})]})})})}),(0,b.jsx)(f.SidebarRail,{})]})}var P=a.i(96221),Q=a.i(70106);let R=(0,Q.default)("Inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]]);var S=a.i(67900);let T=(0,Q.default)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);var U=a.i(35732),V=a.i(86304);a.i(69387);var W=a.i(60574),X=a.i(94632);function Y({role:a="admin"}){let[d,e]=(0,c.useState)([]),[f,g]=(0,c.useState)(0);(0,c.useEffect)(()=>{if(!J.auth.currentUser)return;if(J.isMockMode){e([]),g(0);return}let b=(0,W.query)((0,W.collection)(J.db,"notifications"),(0,W.where)("role","==",a),(0,W.orderBy)("createdAt","desc"),(0,W.limit)(20)),c=(0,W.onSnapshot)(b,a=>{let b=a.docs.map(a=>({id:a.id,...a.data()}));e(b),g(b.filter(a=>!a.read).length)},a=>{D.logger.error("Notification subscription error:",a)});return()=>c()},[a]);let h=async a=>{try{await (0,W.updateDoc)((0,W.doc)(J.db,"notifications",a),{read:!0})}catch(a){D.logger.error("Error marking as read:",a)}};return(0,b.jsxs)(U.DropdownMenu,{children:[(0,b.jsx)(U.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsxs)(H.Button,{variant:"ghost",size:"icon",className:"relative",children:[(0,b.jsx)(T,{className:"h-5 w-5 text-white/70 hover:text-white"}),f>0&&(0,b.jsx)(V.Badge,{className:"absolute -top-1 -right-1 h-5 w-5 flex items-center justify-center p-0 bg-red-500 text-white text-xs",children:f>9?"9+":f})]})}),(0,b.jsxs)(U.DropdownMenuContent,{align:"end",className:"w-80 bg-zinc-900 border-zinc-800 text-white",children:[(0,b.jsxs)(U.DropdownMenuLabel,{className:"flex justify-between items-center",children:[(0,b.jsx)("span",{children:"Notifications"}),f>0&&(0,b.jsxs)("span",{className:"text-xs text-white/50",children:[f," unread"]})]}),(0,b.jsx)(U.DropdownMenuSeparator,{className:"bg-zinc-800"}),0===d.length?(0,b.jsx)("div",{className:"py-8 text-center text-white/50 text-sm",children:"No notifications"}):(0,b.jsx)("div",{className:"max-h-[400px] overflow-y-auto",children:d.map(a=>(0,b.jsxs)(U.DropdownMenuItem,{onClick:()=>{a.read||h(a.id),a.link&&(window.location.href=a.link)},className:`flex flex-col items-start gap-1 p-3 cursor-pointer hover:bg-white/5 ${!a.read?"bg-cyan-500/5 border-l-2 border-cyan-500":""}`,children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 w-full",children:[(0,b.jsx)("span",{children:(a=>{switch(a){case"order_created":return"ðŸ›’";case"status_update":return"ðŸ“";case"assignment":return"ðŸ‘¤";case"low_stock":return"âš ï¸";default:return"ðŸ””"}})(a.type)}),(0,b.jsx)("span",{className:`font-medium text-sm flex-1 ${!a.read?"text-white":"text-white/70"}`,children:a.title}),!a.read&&(0,b.jsx)("div",{className:"w-2 h-2 rounded-full bg-cyan-500"})]}),(0,b.jsx)("p",{className:"text-xs text-white/50 pl-6 line-clamp-2",children:a.message}),(0,b.jsx)("span",{className:"text-[10px] text-white/30 pl-6",children:(a=>{if(!a)return"";let b=a.toDate?a.toDate():new Date(a);return(0,X.formatDistanceToNow)(b,{addSuffix:!0})})(a.createdAt)})]},a.id))}),d.length>0&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(U.DropdownMenuSeparator,{className:"bg-zinc-800"}),(0,b.jsx)(U.DropdownMenuItem,{className:"justify-center text-cyan-500 hover:text-cyan-400",children:"View all notifications"})]})]})]})}var Z=a.i(77430),$=a.i(35112),_=a.i(7554),aa=a.i(70121),ab=a.i(37738),ac=a.i(96743),ad=a.i(92616),ae=a.i(77192),af=a.i(25152),ag=a.i(28094),ah="ToastProvider",[ai,aj,ak]=(0,ab.createCollection)("Toast"),[al,am]=(0,p.createContextScope)("Toast",[ak]),[an,ao]=al(ah),ap=a=>{let{__scopeToast:d,label:e="Notification",duration:f=5e3,swipeDirection:g="right",swipeThreshold:h=50,children:i}=a,[j,k]=c.useState(null),[l,m]=c.useState(0),n=c.useRef(!1),o=c.useRef(!1);return e.trim()||console.error(`Invalid prop \`label\` supplied to \`${ah}\`. Expected non-empty \`string\`.`),(0,b.jsx)(ai.Provider,{scope:d,children:(0,b.jsx)(an,{scope:d,label:e,duration:f,swipeDirection:g,swipeThreshold:h,toastCount:l,viewport:j,onViewportChange:k,onToastAdd:c.useCallback(()=>m(a=>a+1),[]),onToastRemove:c.useCallback(()=>m(a=>a-1),[]),isFocusedToastEscapeKeyDownRef:n,isClosePausedRef:o,children:i})})};ap.displayName=ah;var aq="ToastViewport",ar=["F8"],as="toast.viewportPause",at="toast.viewportResume",au=c.forwardRef((a,d)=>{let{__scopeToast:e,hotkey:f=ar,label:g="Notifications ({hotkey})",...h}=a,i=ao(aq,e),j=aj(e),k=c.useRef(null),l=c.useRef(null),m=c.useRef(null),n=c.useRef(null),o=(0,aa.useComposedRefs)(d,n,i.onViewportChange),p=f.join("+").replace(/Key/g,"").replace(/Digit/g,""),q=i.toastCount>0;c.useEffect(()=>{let a=a=>{0!==f.length&&f.every(b=>a[b]||a.code===b)&&n.current?.focus()};return document.addEventListener("keydown",a),()=>document.removeEventListener("keydown",a)},[f]),c.useEffect(()=>{let a=k.current,b=n.current;if(q&&a&&b){let c=()=>{if(!i.isClosePausedRef.current){let a=new CustomEvent(as);b.dispatchEvent(a),i.isClosePausedRef.current=!0}},d=()=>{if(i.isClosePausedRef.current){let a=new CustomEvent(at);b.dispatchEvent(a),i.isClosePausedRef.current=!1}},e=b=>{a.contains(b.relatedTarget)||d()},f=()=>{a.contains(document.activeElement)||d()};return a.addEventListener("focusin",c),a.addEventListener("focusout",e),a.addEventListener("pointermove",c),a.addEventListener("pointerleave",f),window.addEventListener("blur",c),window.addEventListener("focus",d),()=>{a.removeEventListener("focusin",c),a.removeEventListener("focusout",e),a.removeEventListener("pointermove",c),a.removeEventListener("pointerleave",f),window.removeEventListener("blur",c),window.removeEventListener("focus",d)}}},[q,i.isClosePausedRef]);let r=c.useCallback(({tabbingDirection:a})=>{let b=j().map(b=>{let c=b.ref.current,d=[c,...function(a){let b=[],c=document.createTreeWalker(a,NodeFilter.SHOW_ELEMENT,{acceptNode:a=>{let b="INPUT"===a.tagName&&"hidden"===a.type;return a.disabled||a.hidden||b?NodeFilter.FILTER_SKIP:a.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;c.nextNode();)b.push(c.currentNode);return b}(c)];return"forwards"===a?d:d.reverse()});return("forwards"===a?b.reverse():b).flat()},[j]);return c.useEffect(()=>{let a=n.current;if(a){let b=b=>{let c=b.altKey||b.ctrlKey||b.metaKey;if("Tab"===b.key&&!c){let c=document.activeElement,d=b.shiftKey;if(b.target===a&&d)return void l.current?.focus();let e=r({tabbingDirection:d?"backwards":"forwards"}),f=e.findIndex(a=>a===c);aM(e.slice(f+1))?b.preventDefault():d?l.current?.focus():m.current?.focus()}};return a.addEventListener("keydown",b),()=>a.removeEventListener("keydown",b)}},[j,r]),(0,b.jsxs)(ac.Branch,{ref:k,role:"region","aria-label":g.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:q?void 0:"none"},children:[q&&(0,b.jsx)(aw,{ref:l,onFocusFromOutsideViewport:()=>{aM(r({tabbingDirection:"forwards"}))}}),(0,b.jsx)(ai.Slot,{scope:e,children:(0,b.jsx)(s.Primitive.ol,{tabIndex:-1,...h,ref:o})}),q&&(0,b.jsx)(aw,{ref:m,onFocusFromOutsideViewport:()=>{aM(r({tabbingDirection:"backwards"}))}})]})});au.displayName=aq;var av="ToastFocusProxy",aw=c.forwardRef((a,c)=>{let{__scopeToast:d,onFocusFromOutsideViewport:e,...f}=a,g=ao(av,d);return(0,b.jsx)(ag.VisuallyHidden,{"aria-hidden":!0,tabIndex:0,...f,ref:c,style:{position:"fixed"},onFocus:a=>{let b=a.relatedTarget;g.viewport?.contains(b)||e()}})});aw.displayName=av;var ax="Toast",ay=c.forwardRef((a,c)=>{let{forceMount:d,open:e,defaultOpen:f,onOpenChange:g,...h}=a,[i=!0,j]=(0,af.useControllableState)({prop:e,defaultProp:f,onChange:g});return(0,b.jsx)(ae.Presence,{present:d||i,children:(0,b.jsx)(aB,{open:i,...h,ref:c,onClose:()=>j(!1),onPause:(0,q.useCallbackRef)(a.onPause),onResume:(0,q.useCallbackRef)(a.onResume),onSwipeStart:(0,_.composeEventHandlers)(a.onSwipeStart,a=>{a.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:(0,_.composeEventHandlers)(a.onSwipeMove,a=>{let{x:b,y:c}=a.detail.delta;a.currentTarget.setAttribute("data-swipe","move"),a.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${b}px`),a.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${c}px`)}),onSwipeCancel:(0,_.composeEventHandlers)(a.onSwipeCancel,a=>{a.currentTarget.setAttribute("data-swipe","cancel"),a.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),a.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),a.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),a.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:(0,_.composeEventHandlers)(a.onSwipeEnd,a=>{let{x:b,y:c}=a.detail.delta;a.currentTarget.setAttribute("data-swipe","end"),a.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),a.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),a.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${b}px`),a.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${c}px`),j(!1)})})})});ay.displayName=ax;var[az,aA]=al(ax,{onClose(){}}),aB=c.forwardRef((a,d)=>{let{__scopeToast:e,type:f="foreground",duration:g,open:h,onClose:i,onEscapeKeyDown:j,onPause:k,onResume:l,onSwipeStart:m,onSwipeMove:n,onSwipeCancel:o,onSwipeEnd:p,...r}=a,t=ao(ax,e),[u,v]=c.useState(null),w=(0,aa.useComposedRefs)(d,a=>v(a)),x=c.useRef(null),y=c.useRef(null),z=g||t.duration,A=c.useRef(0),B=c.useRef(z),C=c.useRef(0),{onToastAdd:D,onToastRemove:E}=t,F=(0,q.useCallbackRef)(()=>{u?.contains(document.activeElement)&&t.viewport?.focus(),i()}),G=c.useCallback(a=>{a&&a!==1/0&&(window.clearTimeout(C.current),A.current=new Date().getTime(),C.current=window.setTimeout(F,a))},[F]);c.useEffect(()=>{let a=t.viewport;if(a){let b=()=>{G(B.current),l?.()},c=()=>{let a=new Date().getTime()-A.current;B.current=B.current-a,window.clearTimeout(C.current),k?.()};return a.addEventListener(as,c),a.addEventListener(at,b),()=>{a.removeEventListener(as,c),a.removeEventListener(at,b)}}},[t.viewport,z,k,l,G]),c.useEffect(()=>{h&&!t.isClosePausedRef.current&&G(z)},[h,z,t.isClosePausedRef,G]),c.useEffect(()=>(D(),()=>E()),[D,E]);let H=c.useMemo(()=>u?function a(b){let c=[];return Array.from(b.childNodes).forEach(b=>{var d;if(b.nodeType===b.TEXT_NODE&&b.textContent&&c.push(b.textContent),(d=b).nodeType===d.ELEMENT_NODE){let d=b.ariaHidden||b.hidden||"none"===b.style.display,e=""===b.dataset.radixToastAnnounceExclude;if(!d)if(e){let a=b.dataset.radixToastAnnounceAlt;a&&c.push(a)}else c.push(...a(b))}}),c}(u):null,[u]);return t.viewport?(0,b.jsxs)(b.Fragment,{children:[H&&(0,b.jsx)(aC,{__scopeToast:e,role:"status","aria-live":"foreground"===f?"assertive":"polite","aria-atomic":!0,children:H}),(0,b.jsx)(az,{scope:e,onClose:F,children:$.createPortal((0,b.jsx)(ai.ItemSlot,{scope:e,children:(0,b.jsx)(ac.Root,{asChild:!0,onEscapeKeyDown:(0,_.composeEventHandlers)(j,()=>{t.isFocusedToastEscapeKeyDownRef.current||F(),t.isFocusedToastEscapeKeyDownRef.current=!1}),children:(0,b.jsx)(s.Primitive.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":h?"open":"closed","data-swipe-direction":t.swipeDirection,...r,ref:w,style:{userSelect:"none",touchAction:"none",...a.style},onKeyDown:(0,_.composeEventHandlers)(a.onKeyDown,a=>{"Escape"===a.key&&(j?.(a.nativeEvent),a.nativeEvent.defaultPrevented||(t.isFocusedToastEscapeKeyDownRef.current=!0,F()))}),onPointerDown:(0,_.composeEventHandlers)(a.onPointerDown,a=>{0===a.button&&(x.current={x:a.clientX,y:a.clientY})}),onPointerMove:(0,_.composeEventHandlers)(a.onPointerMove,a=>{if(!x.current)return;let b=a.clientX-x.current.x,c=a.clientY-x.current.y,d=!!y.current,e=["left","right"].includes(t.swipeDirection),f=["left","up"].includes(t.swipeDirection)?Math.min:Math.max,g=e?f(0,b):0,h=e?0:f(0,c),i="touch"===a.pointerType?10:2,j={x:g,y:h},k={originalEvent:a,delta:j};d?(y.current=j,aK("toast.swipeMove",n,k,{discrete:!1})):aL(j,t.swipeDirection,i)?(y.current=j,aK("toast.swipeStart",m,k,{discrete:!1}),a.target.setPointerCapture(a.pointerId)):(Math.abs(b)>i||Math.abs(c)>i)&&(x.current=null)}),onPointerUp:(0,_.composeEventHandlers)(a.onPointerUp,a=>{let b=y.current,c=a.target;if(c.hasPointerCapture(a.pointerId)&&c.releasePointerCapture(a.pointerId),y.current=null,x.current=null,b){let c=a.currentTarget,d={originalEvent:a,delta:b};aL(b,t.swipeDirection,t.swipeThreshold)?aK("toast.swipeEnd",p,d,{discrete:!0}):aK("toast.swipeCancel",o,d,{discrete:!0}),c.addEventListener("click",a=>a.preventDefault(),{once:!0})}})})})}),t.viewport)})]}):null}),aC=a=>{let{__scopeToast:d,children:e,...f}=a,g=ao(ax,d),[h,i]=c.useState(!1),[j,k]=c.useState(!1);return function(a=()=>{}){let b=(0,q.useCallbackRef)(a);(0,r.useLayoutEffect)(()=>{let a=0,c=0;return a=window.requestAnimationFrame(()=>c=window.requestAnimationFrame(b)),()=>{window.cancelAnimationFrame(a),window.cancelAnimationFrame(c)}},[b])}(()=>i(!0)),c.useEffect(()=>{let a=window.setTimeout(()=>k(!0),1e3);return()=>window.clearTimeout(a)},[]),j?null:(0,b.jsx)(ad.Portal,{asChild:!0,children:(0,b.jsx)(ag.VisuallyHidden,{...f,children:h&&(0,b.jsxs)(b.Fragment,{children:[g.label," ",e]})})})},aD=c.forwardRef((a,c)=>{let{__scopeToast:d,...e}=a;return(0,b.jsx)(s.Primitive.div,{...e,ref:c})});aD.displayName="ToastTitle";var aE=c.forwardRef((a,c)=>{let{__scopeToast:d,...e}=a;return(0,b.jsx)(s.Primitive.div,{...e,ref:c})});aE.displayName="ToastDescription";var aF="ToastAction",aG=c.forwardRef((a,c)=>{let{altText:d,...e}=a;return d.trim()?(0,b.jsx)(aJ,{altText:d,asChild:!0,children:(0,b.jsx)(aI,{...e,ref:c})}):(console.error(`Invalid prop \`altText\` supplied to \`${aF}\`. Expected non-empty \`string\`.`),null)});aG.displayName=aF;var aH="ToastClose",aI=c.forwardRef((a,c)=>{let{__scopeToast:d,...e}=a,f=aA(aH,d);return(0,b.jsx)(aJ,{asChild:!0,children:(0,b.jsx)(s.Primitive.button,{type:"button",...e,ref:c,onClick:(0,_.composeEventHandlers)(a.onClick,f.onClose)})})});aI.displayName=aH;var aJ=c.forwardRef((a,c)=>{let{__scopeToast:d,altText:e,...f}=a;return(0,b.jsx)(s.Primitive.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":e||void 0,...f,ref:c})});function aK(a,b,c,{discrete:d}){let e=c.originalEvent.currentTarget,f=new CustomEvent(a,{bubbles:!0,cancelable:!0,detail:c});b&&e.addEventListener(a,b,{once:!0}),d?(0,s.dispatchDiscreteCustomEvent)(e,f):e.dispatchEvent(f)}var aL=(a,b,c=0)=>{let d=Math.abs(a.x),e=Math.abs(a.y),f=d>e;return"left"===b||"right"===b?f&&d>c:!f&&e>c};function aM(a){let b=document.activeElement;return a.some(a=>a===b||(a.focus(),document.activeElement!==b))}var aN=a.i(187),aO=a.i(33508);let aP=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)(au,{ref:d,className:(0,D.cn)("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",a),...c}));aP.displayName=au.displayName;let aQ=(0,aN.cva)("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),aR=c.forwardRef(({className:a,variant:c,...d},e)=>(0,b.jsx)(ay,{ref:e,className:(0,D.cn)(aQ({variant:c}),a),...d}));aR.displayName=ay.displayName,c.forwardRef(({className:a,...c},d)=>(0,b.jsx)(aG,{ref:d,className:(0,D.cn)("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",a),...c})).displayName=aG.displayName;let aS=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)(aI,{ref:d,className:(0,D.cn)("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",a),"toast-close":"",...c,children:(0,b.jsx)(aO.X,{className:"h-4 w-4"})}));aS.displayName=aI.displayName;let aT=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)(aD,{ref:d,className:(0,D.cn)("text-sm font-semibold",a),...c}));aT.displayName=aD.displayName;let aU=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)(aE,{ref:d,className:(0,D.cn)("text-sm opacity-90",a),...c}));function aV(){let{toasts:a}=(0,Z.useToast)();return(0,b.jsxs)(ap,{children:[a.map(function({id:a,title:c,description:d,action:e,...f}){return(0,b.jsxs)(aR,{...f,children:[(0,b.jsxs)("div",{className:"grid gap-1",children:[c&&(0,b.jsx)(aT,{children:c}),d&&(0,b.jsx)(aU,{children:d})]}),e,(0,b.jsx)(aS,{})]},a)}),(0,b.jsx)(aP,{})]})}function aW({children:a}){let{lang:l,setLang:m}=(0,I.useLanguage)(),n=(0,I.useT)(),p="ar"===l,q=(0,d.usePathname)(),r=(0,d.useRouter)(),[s,t]=(0,c.useState)(!0),[u,v]=(0,c.useState)(null),w=(0,c.useRef)(!1),x=async()=>{try{await (0,K.signOut)(J.auth)}finally{r.replace("/admin/login")}};return((0,c.useEffect)(()=>{let a=(0,K.onAuthStateChanged)(J.auth,a=>{v(a),t(!1),a||"/admin/login"===q||w.current||(w.current=!0,r.replace("/admin/login")),a&&"/admin/login"===q&&!w.current&&(w.current=!0,r.replace("/admin"))});return()=>a()},[q,r]),s)?(0,b.jsx)("div",{className:"min-h-screen bg-black flex items-center justify-center text-white",children:(0,b.jsx)(P.Loader2,{className:"w-8 h-8 animate-spin text-cyan-500"})}):"/admin/login"===q?(0,b.jsxs)("div",{className:(0,D.cn)("min-h-screen bg-black text-white",p&&"[direction:rtl]"),children:[(0,b.jsxs)("header",{className:"flex items-center gap-4 border-b border-white/10 bg-black/50 px-6 py-3 backdrop-blur-md sticky top-0 z-10",children:[(0,b.jsx)("div",{className:"flex-1"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("button",{onClick:()=>m("en"),className:(0,D.cn)("px-3 py-1 rounded-full text-xs font-semibold border border-white/10 transition-colors","en"===l?"bg-cyan-500 text-black border-cyan-500":"text-white/70 hover:bg-white/10"),children:"EN"}),(0,b.jsx)("button",{onClick:()=>m("ar"),className:(0,D.cn)("px-3 py-1 rounded-full text-xs font-semibold border border-white/10 transition-colors","ar"===l?"bg-cyan-500 text-black border-cyan-500":"text-white/70 hover:bg-white/10"),children:"AR"}),(0,b.jsx)("button",{onClick:x,className:"px-3 py-1 rounded-full text-xs font-semibold border border-white/10 transition-colors text-white/70 hover:bg-white/10",children:n("Logout")})]})]}),a]}):u||"/admin/login"===q?(0,b.jsx)("div",{className:(0,D.cn)("min-h-screen bg-black text-white",p&&"[direction:rtl]"),children:(0,b.jsxs)(f.SidebarProvider,{defaultOpen:!0,children:[(0,b.jsx)("div",{className:"hidden lg:block",children:(0,b.jsx)(O,{})}),(0,b.jsxs)("main",{className:"flex-1 flex flex-col min-w-0 overflow-hidden",children:[(0,b.jsxs)("header",{className:"flex items-center gap-4 border-b border-white/10 bg-black/50 px-6 py-3 backdrop-blur-md sticky top-0 z-10",children:[(0,b.jsx)(f.SidebarTrigger,{className:"hidden lg:inline-flex size-9! rounded-xl bg-gradient-to-r from-cyan-500/10 to-blue-600/10 border border-white/10 text-white shadow-[0_8px_24px_-10px_rgba(6,182,212,0.45)] hover:shadow-[0_12px_32px_-10px_rgba(6,182,212,0.65)] ring-1 ring-white/10 hover:ring-cyan-400/40 transition-all duration-300 active:scale-95",title:"Menu"}),(0,b.jsx)("div",{className:"flex-1"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(Y,{role:"admin"}),(0,b.jsx)("button",{onClick:()=>m("en"),className:(0,D.cn)("px-3 py-1 rounded-full text-xs font-semibold border border-white/10 transition-colors","en"===l?"bg-cyan-500 text-black border-cyan-500":"text-white/70 hover:bg-white/10"),children:"EN"}),(0,b.jsx)("button",{onClick:()=>m("ar"),className:(0,D.cn)("px-3 py-1 rounded-full text-xs font-semibold border border-white/10 transition-colors","ar"===l?"bg-cyan-500 text-black border-cyan-500":"text-white/70 hover:bg-white/10"),children:"AR"}),(0,b.jsx)("button",{onClick:x,className:"px-3 py-1 rounded-full text-xs font-semibold border border-white/10 transition-colors text-white/70 hover:bg-white/10",children:n("Logout")})]})]}),(0,b.jsx)("div",{className:"flex-1 overflow-auto p-6 pb-16 lg:pb-6",children:a}),(0,b.jsx)("nav",{className:"lg:hidden fixed inset-x-0 bottom-0 z-20 border-t border-white/10 bg-black/80 backdrop-blur-xl",children:(0,b.jsx)("div",{className:"flex items-stretch justify-between",children:[{href:"/admin",label:"Dashboard",icon:g.LayoutDashboard},{href:"/admin/orders",label:"Orders",icon:h.ShoppingCart},{href:"/admin/technicians",label:"Technicians",icon:i.Users},{href:"/admin/inventory",label:"Inventory",icon:j.Smartphone},{href:"/admin/inbox/contact",label:"Inbox",icon:R},{href:"/admin/inbox/corporate",label:"Corporate Inbox",icon:S.Building2},{href:"/admin/requests",label:"Technician Requests",icon:o.ClipboardList},{href:"/admin/settings",label:"Settings",icon:k.Settings}].map(a=>{let c="/admin"===a.href?"/admin"===q:q.startsWith(a.href),d=a.icon;return(0,b.jsxs)(e.default,{href:a.href,className:(0,D.cn)("group relative overflow-hidden flex-1 py-2 px-2 flex flex-col items-center justify-center gap-1",c?"text-cyan-400":"text-white/70"),children:[(0,b.jsx)("span",{className:"absolute -inset-0.5 rounded-xl bg-gradient-to-r from-cyan-500/0 via-white/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),(0,b.jsx)(d,{className:(0,D.cn)("w-5 h-5",c?"text-cyan-400":"text-white/50")}),(0,b.jsx)("span",{className:"text-[11px] font-semibold",children:n(a.label)})]},a.href)})})})]}),(0,b.jsx)(aV,{})]})}):null}aU.displayName=aE.displayName,a.s(["default",()=>aW],88615)}];

//# sourceMappingURL=src_app_admin_layout_tsx_e34ec29d._.js.map