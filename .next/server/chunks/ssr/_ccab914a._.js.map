{"version":3,"sources":["../../../../node_modules/lucide-react/src/icons/search.ts","../../../../node_modules/lucide-react/src/icons/message-circle.ts","../../../../node_modules/lucide-react/src/icons/clock.ts","../../../../node_modules/%40radix-ui/react-use-previous/src/usePrevious.tsx","../../../../node_modules/lucide-react/src/icons/trash-2.ts","../../../../node_modules/lucide-react/src/icons/plus.ts","../../../../src/components/ui/dialog.tsx","../../../../node_modules/lucide-react/src/icons/user.ts","../../../../node_modules/lucide-react/src/icons/circle-check-big.ts","../../../../node_modules/lucide-react/src/icons/triangle-alert.ts","../../../../src/lib/firestore/services/authService.ts","../../../../node_modules/lucide-react/src/icons/eye.ts","../../../../src/lib/auditService.ts","../../../../src/lib/firestore/services/orderService.ts","../../../../src/lib/firestore/services/notificationService.ts"],"sourcesContent":["import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Search\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8Y2lyY2xlIGN4PSIxMSIgY3k9IjExIiByPSI4IiAvPgogIDxwYXRoIGQ9Im0yMSAyMS00LjMtNC4zIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/search\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Search = createLucideIcon('Search', [\n  ['circle', { cx: '11', cy: '11', r: '8', key: '4ej97u' }],\n  ['path', { d: 'm21 21-4.3-4.3', key: '1qie3q' }],\n]);\n\nexport default Search;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name MessageCircle\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNNy45IDIwQTkgOSAwIDEgMCA0IDE2LjFMMiAyMloiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/message-circle\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst MessageCircle = createLucideIcon('MessageCircle', [\n  ['path', { d: 'M7.9 20A9 9 0 1 0 4 16.1L2 22Z', key: 'vv11sd' }],\n]);\n\nexport default MessageCircle;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Clock\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMCIgLz4KICA8cG9seWxpbmUgcG9pbnRzPSIxMiA2IDEyIDEyIDE2IDE0IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/clock\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Clock = createLucideIcon('Clock', [\n  ['circle', { cx: '12', cy: '12', r: '10', key: '1mglay' }],\n  ['polyline', { points: '12 6 12 12 16 14', key: '68esgv' }],\n]);\n\nexport default Clock;\n","import * as React from 'react';\n\nfunction usePrevious<T>(value: T) {\n  const ref = React.useRef({ value, previous: value });\n\n  // We compare values before making an update to ensure that\n  // a change has been made. This ensures the previous value is\n  // persisted correctly between renders.\n  return React.useMemo(() => {\n    if (ref.current.value !== value) {\n      ref.current.previous = ref.current.value;\n      ref.current.value = value;\n    }\n    return ref.current.previous;\n  }, [value]);\n}\n\nexport { usePrevious };\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Trash2\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMyA2aDE4IiAvPgogIDxwYXRoIGQ9Ik0xOSA2djE0YzAgMS0xIDItMiAySDdjLTEgMC0yLTEtMi0yVjYiIC8+CiAgPHBhdGggZD0iTTggNlY0YzAtMSAxLTIgMi0yaDRjMSAwIDIgMSAyIDJ2MiIgLz4KICA8bGluZSB4MT0iMTAiIHgyPSIxMCIgeTE9IjExIiB5Mj0iMTciIC8+CiAgPGxpbmUgeDE9IjE0IiB4Mj0iMTQiIHkxPSIxMSIgeTI9IjE3IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/trash-2\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Trash2 = createLucideIcon('Trash2', [\n  ['path', { d: 'M3 6h18', key: 'd0wm0j' }],\n  ['path', { d: 'M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6', key: '4alrt4' }],\n  ['path', { d: 'M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2', key: 'v07s0e' }],\n  ['line', { x1: '10', x2: '10', y1: '11', y2: '17', key: '1uufr5' }],\n  ['line', { x1: '14', x2: '14', y1: '11', y2: '17', key: 'xtxkd' }],\n]);\n\nexport default Trash2;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Plus\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNNSAxMmgxNCIgLz4KICA8cGF0aCBkPSJNMTIgNXYxNCIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/plus\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Plus = createLucideIcon('Plus', [\n  ['path', { d: 'M5 12h14', key: '1ays0h' }],\n  ['path', { d: 'M12 5v14', key: 's699le' }],\n]);\n\nexport default Plus;\n","'use client'\r\n\r\nimport * as React from 'react'\r\nimport * as DialogPrimitive from '@radix-ui/react-dialog'\r\nimport { XIcon } from 'lucide-react'\r\n\r\nimport { cn } from '@/lib/utils'\r\n\r\nfunction Dialog({\r\n  ...props\r\n}: React.ComponentProps<typeof DialogPrimitive.Root>) {\r\n  return <DialogPrimitive.Root data-slot=\"dialog\" {...props} />\r\n}\r\n\r\nfunction DialogTrigger({\r\n  ...props\r\n}: React.ComponentProps<typeof DialogPrimitive.Trigger>) {\r\n  return <DialogPrimitive.Trigger data-slot=\"dialog-trigger\" {...props} />\r\n}\r\n\r\nfunction DialogPortal({\r\n  ...props\r\n}: React.ComponentProps<typeof DialogPrimitive.Portal>) {\r\n  return <DialogPrimitive.Portal data-slot=\"dialog-portal\" {...props} />\r\n}\r\n\r\nfunction DialogClose({\r\n  ...props\r\n}: React.ComponentProps<typeof DialogPrimitive.Close>) {\r\n  return <DialogPrimitive.Close data-slot=\"dialog-close\" {...props} />\r\n}\r\n\r\nfunction DialogOverlay({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof DialogPrimitive.Overlay>) {\r\n  return (\r\n    <DialogPrimitive.Overlay\r\n      data-slot=\"dialog-overlay\"\r\n      className={cn(\r\n        'data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50',\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction DialogContent({\r\n  className,\r\n  children,\r\n  showCloseButton = true,\r\n  ...props\r\n}: React.ComponentProps<typeof DialogPrimitive.Content> & {\r\n  showCloseButton?: boolean\r\n}) {\r\n  return (\r\n    <DialogPortal data-slot=\"dialog-portal\">\r\n      <DialogOverlay />\r\n      <DialogPrimitive.Content\r\n        data-slot=\"dialog-content\"\r\n        className={cn(\r\n          'bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg',\r\n          className,\r\n        )}\r\n        {...props}\r\n      >\r\n        {children}\r\n        {showCloseButton && (\r\n          <DialogPrimitive.Close\r\n            data-slot=\"dialog-close\"\r\n            className=\"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\"\r\n          >\r\n            <XIcon />\r\n            <span className=\"sr-only\">Close</span>\r\n          </DialogPrimitive.Close>\r\n        )}\r\n      </DialogPrimitive.Content>\r\n    </DialogPortal>\r\n  )\r\n}\r\n\r\nfunction DialogHeader({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"dialog-header\"\r\n      className={cn('flex flex-col gap-2 text-center sm:text-left', className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction DialogFooter({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"dialog-footer\"\r\n      className={cn(\r\n        'flex flex-col-reverse gap-2 sm:flex-row sm:justify-end',\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction DialogTitle({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof DialogPrimitive.Title>) {\r\n  return (\r\n    <DialogPrimitive.Title\r\n      data-slot=\"dialog-title\"\r\n      className={cn('text-lg leading-none font-semibold', className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction DialogDescription({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof DialogPrimitive.Description>) {\r\n  return (\r\n    <DialogPrimitive.Description\r\n      data-slot=\"dialog-description\"\r\n      className={cn('text-muted-foreground text-sm', className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport {\r\n  Dialog,\r\n  DialogClose,\r\n  DialogContent,\r\n  DialogDescription,\r\n  DialogFooter,\r\n  DialogHeader,\r\n  DialogOverlay,\r\n  DialogPortal,\r\n  DialogTitle,\r\n  DialogTrigger,\r\n}\r\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name User\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTkgMjF2LTJhNCA0IDAgMCAwLTQtNEg5YTQgNCAwIDAgMC00IDR2MiIgLz4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjciIHI9IjQiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/user\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst User = createLucideIcon('User', [\n  ['path', { d: 'M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2', key: '975kel' }],\n  ['circle', { cx: '12', cy: '7', r: '4', key: '17ys0d' }],\n]);\n\nexport default User;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name CircleCheckBig\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjEuODAxIDEwQTEwIDEwIDAgMSAxIDE3IDMuMzM1IiAvPgogIDxwYXRoIGQ9Im05IDExIDMgM0wyMiA0IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/circle-check-big\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst CircleCheckBig = createLucideIcon('CircleCheckBig', [\n  ['path', { d: 'M21.801 10A10 10 0 1 1 17 3.335', key: 'yps3ct' }],\n  ['path', { d: 'm9 11 3 3L22 4', key: '1pflzl' }],\n]);\n\nexport default CircleCheckBig;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name TriangleAlert\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMjEuNzMgMTgtOC0xNGEyIDIgMCAwIDAtMy40OCAwbC04IDE0QTIgMiAwIDAgMCA0IDIxaDE2YTIgMiAwIDAgMCAxLjczLTMiIC8+CiAgPHBhdGggZD0iTTEyIDl2NCIgLz4KICA8cGF0aCBkPSJNMTIgMTdoLjAxIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/triangle-alert\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst TriangleAlert = createLucideIcon('TriangleAlert', [\n  [\n    'path',\n    {\n      d: 'm21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3',\n      key: 'wmoenq',\n    },\n  ],\n  ['path', { d: 'M12 9v4', key: 'juzpu7' }],\n  ['path', { d: 'M12 17h.01', key: 'p32p05' }],\n]);\n\nexport default TriangleAlert;\n","import {\r\n    createUserWithEmailAndPassword,\r\n    signInWithEmailAndPassword,\r\n    signOut as firebaseSignOut,\r\n    sendPasswordResetEmail,\r\n    User as FirebaseUser,\r\n    updateProfile,\r\n    reauthenticateWithCredential,\r\n    EmailAuthProvider,\r\n    updatePassword\r\n} from \"firebase/auth\";\r\nimport { doc, setDoc, getDoc, serverTimestamp } from \"firebase/firestore\";\r\nimport { auth, db } from \"@/lib/firebaseConfig\";\r\nimport { User, UserRole } from \"../schema\";\r\nimport { logAction, AuditActions } from \"@/lib/auditService\";\r\n\r\nexport interface SignUpData {\r\n    email: string;\r\n    password: string;\r\n    name: string;\r\n    role: UserRole;\r\n    phone?: string;\r\n    address?: string;\r\n}\r\n\r\nexport interface SignInData {\r\n    email: string;\r\n    password: string;\r\n}\r\n\r\n/**\r\n * Sign up a new user with email/password and create their profile in Firestore\r\n */\r\nexport async function signUp(data: SignUpData): Promise<User> {\r\n    try {\r\n        // Create Firebase Auth user\r\n        const userCredential = await createUserWithEmailAndPassword(\r\n            auth,\r\n            data.email,\r\n            data.password\r\n        );\r\n\r\n        const firebaseUser = userCredential.user;\r\n\r\n        // Update display name in Auth\r\n        await updateProfile(firebaseUser, {\r\n            displayName: data.name\r\n        });\r\n\r\n        // Create user document in Firestore\r\n        const userDoc: Omit<User, \"uid\"> = {\r\n            email: data.email,\r\n            name: data.name,\r\n            role: data.role,\r\n            phone: data.phone,\r\n            address: data.address,\r\n            createdAt: serverTimestamp() as any,\r\n            updatedAt: serverTimestamp() as any,\r\n        };\r\n\r\n        await setDoc(doc(db, \"users\", firebaseUser.uid), userDoc);\r\n\r\n        // Return complete user object\r\n        return {\r\n            uid: firebaseUser.uid,\r\n            ...userDoc,\r\n        };\r\n    } catch (error: any) {\r\n        console.error(\"Sign up error:\", error);\r\n        throw new Error(error.message || \"Failed to sign up\");\r\n    }\r\n}\r\n\r\n/**\r\n * Sign in with email and password\r\n */\r\nexport async function signIn(data: SignInData): Promise<FirebaseUser> {\r\n    try {\r\n        const userCredential = await signInWithEmailAndPassword(\r\n            auth,\r\n            data.email,\r\n            data.password\r\n        );\r\n        return userCredential.user;\r\n    } catch (error: any) {\r\n        console.error(\"Sign in error:\", error);\r\n        throw new Error(error.message || \"Failed to sign in\");\r\n    }\r\n}\r\n\r\n/**\r\n * Sign out the current user\r\n */\r\nexport async function signOut(): Promise<void> {\r\n    try {\r\n        await firebaseSignOut(auth);\r\n    } catch (error: any) {\r\n        console.error(\"Sign out error:\", error);\r\n        throw new Error(error.message || \"Failed to sign out\");\r\n    }\r\n}\r\n\r\n/**\r\n * Send password reset email\r\n */\r\nexport async function resetPassword(email: string): Promise<void> {\r\n    try {\r\n        await sendPasswordResetEmail(auth, email);\r\n    } catch (error: any) {\r\n        console.error(\"Password reset error:\", error);\r\n        throw new Error(error.message || \"Failed to send password reset email\");\r\n    }\r\n}\r\n\r\n/**\r\n * Get user data from Firestore\r\n */\r\nexport async function getUserData(uid: string): Promise<User | null> {\r\n    try {\r\n        const userDoc = await getDoc(doc(db, \"users\", uid));\r\n        if (!userDoc.exists()) {\r\n            return null;\r\n        }\r\n        return {\r\n            uid: userDoc.id,\r\n            ...userDoc.data(),\r\n        } as User;\r\n    } catch (error: any) {\r\n        console.error(\"Get user data error:\", error);\r\n        return null;\r\n    }\r\n}\r\n\r\n/**\r\n * Get the role of the current user\r\n */\r\nexport async function getUserRole(uid: string): Promise<UserRole | null> {\r\n    const userData = await getUserData(uid);\r\n    return userData?.role || null;\r\n}\r\n\r\n/**\r\n * Check if current user has a specific role\r\n */\r\nexport async function hasRole(uid: string, role: UserRole): Promise<boolean> {\r\n    const userRole = await getUserRole(uid);\r\n    return userRole === role;\r\n}\r\n\r\n/**\r\n * Check if current user is admin\r\n */\r\nexport async function isAdmin(uid: string): Promise<boolean> {\r\n    return hasRole(uid, \"admin\");\r\n}\r\n\r\n/**\r\n * Check if current user is technician\r\n */\r\nexport async function isTechnician(uid: string): Promise<boolean> {\r\n    return hasRole(uid, \"technician\");\r\n}\r\n\r\n/**\r\n * Check if current user is customer\r\n */\r\nexport async function isCustomer(uid: string): Promise<boolean> {\r\n    return hasRole(uid, \"customer\");\r\n}\r\n\r\nexport async function changePassword(currentPassword: string, newPassword: string): Promise<void> {\r\n    const user = auth.currentUser;\r\n    if (!user || !user.email) {\r\n        throw new Error(\"Not authenticated\");\r\n    }\r\n    const credential = EmailAuthProvider.credential(user.email, currentPassword);\r\n    await reauthenticateWithCredential(user, credential);\r\n    await updatePassword(user, newPassword);\r\n    await logAction(AuditActions.PASSWORD_CHANGED, \"auth\", user.uid, user.email || \"\");\r\n}\r\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Eye\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMi4wNjIgMTIuMzQ4YTEgMSAwIDAgMSAwLS42OTYgMTAuNzUgMTAuNzUgMCAwIDEgMTkuODc2IDAgMSAxIDAgMCAxIDAgLjY5NiAxMC43NSAxMC43NSAwIDAgMS0xOS44NzYgMCIgLz4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIzIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/eye\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Eye = createLucideIcon('Eye', [\n  [\n    'path',\n    {\n      d: 'M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0',\n      key: '1nclc0',\n    },\n  ],\n  ['circle', { cx: '12', cy: '12', r: '3', key: '1v7zrd' }],\n]);\n\nexport default Eye;\n","/**\r\n * Audit Service for logging admin actions\r\n */\r\n\r\nimport { collection, addDoc, query, where, orderBy, getDocs, Timestamp, limit } from \"firebase/firestore\"\r\nimport { db } from \"@/lib/firebaseConfig\"\r\n\r\nexport interface AuditLog {\r\n    id?: string\r\n    action: string\r\n    category: \"order\" | \"technician\" | \"inventory\" | \"settings\" | \"auth\" | \"system\"\r\n    userId: string\r\n    userEmail: string\r\n    targetId?: string\r\n    targetType?: string\r\n    details?: Record<string, any>\r\n    ipAddress?: string\r\n    timestamp: Date\r\n}\r\n\r\n/**\r\n * Log an admin action\r\n */\r\nexport async function logAction(\r\n    action: string,\r\n    category: AuditLog[\"category\"],\r\n    userId: string,\r\n    userEmail: string,\r\n    options?: {\r\n        targetId?: string\r\n        targetType?: string\r\n        details?: Record<string, any>\r\n    }\r\n): Promise<void> {\r\n    try {\r\n        await addDoc(collection(db, \"audit_logs\"), {\r\n            action,\r\n            category,\r\n            userId,\r\n            userEmail,\r\n            targetId: options?.targetId || null,\r\n            targetType: options?.targetType || null,\r\n            details: options?.details || null,\r\n            timestamp: Timestamp.now()\r\n        })\r\n    } catch (error) {\r\n        console.error(\"Failed to log audit action:\", error)\r\n    }\r\n}\r\n\r\n/**\r\n * Get audit logs with filters\r\n */\r\nexport async function getAuditLogs(filters?: {\r\n    category?: AuditLog[\"category\"]\r\n    userId?: string\r\n    startDate?: Date\r\n    endDate?: Date\r\n    limitCount?: number\r\n}): Promise<AuditLog[]> {\r\n    try {\r\n        const q = query(\r\n            collection(db, \"audit_logs\"),\r\n            orderBy(\"timestamp\", \"desc\"),\r\n            limit(filters?.limitCount || 100)\r\n        )\r\n\r\n        // Note: Firestore requires composite indexes for multiple where clauses\r\n        // For production, create necessary indexes\r\n\r\n        const snapshot = await getDocs(q)\r\n        return snapshot.docs.map(doc => ({\r\n            id: doc.id,\r\n            ...doc.data(),\r\n            timestamp: doc.data().timestamp.toDate()\r\n        })) as AuditLog[]\r\n    } catch (error) {\r\n        console.error(\"Failed to fetch audit logs:\", error)\r\n        return []\r\n    }\r\n}\r\n\r\n/**\r\n * Predefined action types for consistency\r\n */\r\nexport const AuditActions = {\r\n    // Orders\r\n    ORDER_CREATED: \"order_created\",\r\n    ORDER_UPDATED: \"order_updated\",\r\n    ORDER_DELETED: \"order_deleted\",\r\n    ORDER_ASSIGNED: \"order_assigned\",\r\n    ORDER_STATUS_CHANGED: \"order_status_changed\",\r\n\r\n    // Technicians\r\n    TECHNICIAN_CREATED: \"technician_created\",\r\n    TECHNICIAN_UPDATED: \"technician_updated\",\r\n    TECHNICIAN_DELETED: \"technician_deleted\",\r\n\r\n    // Inventory\r\n    INVENTORY_ADDED: \"inventory_added\",\r\n    INVENTORY_UPDATED: \"inventory_updated\",\r\n    INVENTORY_DELETED: \"inventory_deleted\",\r\n\r\n    // Auth\r\n    USER_LOGIN: \"user_login\",\r\n    USER_LOGOUT: \"user_logout\",\r\n    PASSWORD_CHANGED: \"password_changed\",\r\n    REQUEST_PASSWORD_RESET: \"request_password_reset\",\r\n    OTP_SENT: \"otp_sent\",\r\n    OTP_VERIFIED: \"otp_verified\",\r\n    PASSWORD_RESET_SUCCESS: \"password_reset_success\",\r\n    PASSWORD_RESET_FAILED: \"password_reset_failed\",\r\n\r\n    // Settings\r\n    SETTINGS_UPDATED: \"settings_updated\",\r\n\r\n    // System\r\n    EXPORT_GENERATED: \"export_generated\",\r\n    EMAIL_SENT: \"email_sent\"\r\n} as const\r\n","import {\r\n    collection,\r\n    doc,\r\n    addDoc,\r\n    updateDoc,\r\n    deleteDoc,\r\n    getDoc,\r\n    getDocs,\r\n    query,\r\n    where,\r\n    orderBy,\r\n    limit,\r\n    onSnapshot,\r\n    serverTimestamp,\r\n    Timestamp,\r\n} from \"firebase/firestore\";\r\nimport { db, isMockMode } from \"@/lib/firebaseConfig\";\r\nimport { Order, OrderStatus, UserRole } from \"../schema\";\r\nimport { createNotification } from \"./notificationService\";\r\n\r\n/**\r\n * Create a new order\r\n */\r\nexport async function createOrder(orderData: Omit<Order, \"id\" | \"createdAt\" | \"updatedAt\">): Promise<string> {\r\n    try {\r\n        const docRef = await addDoc(collection(db, \"orders\"), {\r\n            ...orderData,\r\n            createdAt: serverTimestamp(),\r\n            updatedAt: serverTimestamp(),\r\n        });\r\n        return docRef.id;\r\n    } catch (error: any) {\r\n        console.error(\"Create order error:\", error);\r\n        throw new Error(error.message || \"Failed to create order\");\r\n    }\r\n}\r\n\r\n/**\r\n * Get a single order by ID\r\n */\r\nexport async function getOrder(orderId: string): Promise<Order | null> {\r\n    try {\r\n        const docSnap = await getDoc(doc(db, \"orders\", orderId));\r\n        if (!docSnap.exists()) {\r\n            return null;\r\n        }\r\n        return {\r\n            id: docSnap.id,\r\n            ...docSnap.data(),\r\n        } as Order;\r\n    } catch (error: any) {\r\n        console.error(\"Get order error:\", error);\r\n        return null;\r\n    }\r\n}\r\n\r\n/**\r\n * Update an existing order\r\n */\r\nexport async function updateOrder(orderId: string, updates: Partial<Order>): Promise<void> {\r\n    try {\r\n        await updateDoc(doc(db, \"orders\", orderId), {\r\n            ...updates,\r\n            updatedAt: serverTimestamp(),\r\n        });\r\n    } catch (error: any) {\r\n        console.error(\"Update order error:\", error);\r\n        throw new Error(error.message || \"Failed to update order\");\r\n    }\r\n}\r\n\r\n/**\r\n * Delete an order\r\n */\r\nexport async function deleteOrder(orderId: string): Promise<void> {\r\n    try {\r\n        await deleteDoc(doc(db, \"orders\", orderId));\r\n    } catch (error: any) {\r\n        console.error(\"Delete order error:\", error);\r\n        throw new Error(error.message || \"Failed to delete order\");\r\n    }\r\n}\r\n\r\n/**\r\n * Get all orders\r\n */\r\nexport async function getAllOrders(): Promise<Order[]> {\r\n    try {\r\n        const q = query(collection(db, \"orders\"), orderBy(\"createdAt\", \"desc\"));\r\n        const querySnapshot = await getDocs(q);\r\n        return querySnapshot.docs.map((doc) => ({\r\n            id: doc.id,\r\n            ...doc.data(),\r\n        })) as Order[];\r\n    } catch (error: any) {\r\n        console.error(\"Get all orders error:\", error);\r\n        return [];\r\n    }\r\n}\r\n\r\n/**\r\n * Get orders by status\r\n */\r\nexport async function getOrdersByStatus(status: OrderStatus): Promise<Order[]> {\r\n    try {\r\n        const q = query(\r\n            collection(db, \"orders\"),\r\n            where(\"status\", \"==\", status),\r\n            orderBy(\"createdAt\", \"desc\")\r\n        );\r\n        const querySnapshot = await getDocs(q);\r\n        return querySnapshot.docs.map((doc) => ({\r\n            id: doc.id,\r\n            ...doc.data(),\r\n        })) as Order[];\r\n    } catch (error: any) {\r\n        console.error(\"Get orders by status error:\", error);\r\n        return [];\r\n    }\r\n}\r\n\r\n/**\r\n * Get orders for a specific technician\r\n */\r\nexport async function getOrdersByTechnician(technicianId: string): Promise<Order[]> {\r\n    try {\r\n        const q = query(\r\n            collection(db, \"orders\"),\r\n            where(\"technicianId\", \"==\", technicianId),\r\n            orderBy(\"createdAt\", \"desc\")\r\n        );\r\n        const querySnapshot = await getDocs(q);\r\n        return querySnapshot.docs.map((doc) => ({\r\n            id: doc.id,\r\n            ...doc.data(),\r\n        })) as Order[];\r\n    } catch (error: any) {\r\n        console.error(\"Get orders by technician error:\", error);\r\n        return [];\r\n    }\r\n}\r\n\r\n/**\r\n * Get orders for a specific customer\r\n */\r\nexport async function getOrdersByCustomer(customerId: string): Promise<Order[]> {\r\n    try {\r\n        const q = query(\r\n            collection(db, \"orders\"),\r\n            where(\"customerId\", \"==\", customerId),\r\n            orderBy(\"createdAt\", \"desc\")\r\n        );\r\n        const querySnapshot = await getDocs(q);\r\n        return querySnapshot.docs.map((doc) => ({\r\n            id: doc.id,\r\n            ...doc.data(),\r\n        })) as Order[];\r\n    } catch (error: any) {\r\n        console.error(\"Get orders by customer error:\", error);\r\n        return [];\r\n    }\r\n}\r\n\r\n/**\r\n * Assign order to a technician\r\n */\r\nexport async function assignOrderToTechnician(\r\n    orderId: string,\r\n    technicianId: string,\r\n    technicianName: string\r\n): Promise<void> {\r\n    try {\r\n        await updateOrder(orderId, {\r\n            technicianId,\r\n            technicianName,\r\n            assignedTechnicianId: technicianId,\r\n            assignedTechnicianName: technicianName,\r\n            assignedAt: serverTimestamp() as any,\r\n            status: \"assigned\",\r\n            assignmentHistory: (undefined as any),\r\n        });\r\n    } catch (error: any) {\r\n        console.error(\"Assign order error:\", error);\r\n        throw new Error(error.message || \"Failed to assign order\");\r\n    }\r\n}\r\n\r\n/**\r\n * Update order status\r\n */\r\nexport async function updateOrderStatus(orderId: string, status: OrderStatus): Promise<void> {\r\n    try {\r\n        const updates: Partial<Order> = { status };\r\n\r\n        // If completing the order, add completed date\r\n        if (status === \"completed\") {\r\n            updates.completedDate = Timestamp.now() as any;\r\n        }\r\n\r\n        await updateOrder(orderId, updates);\r\n    } catch (error: any) {\r\n        console.error(\"Update order status error:\", error);\r\n        throw new Error(error.message || \"Failed to update order status\");\r\n    }\r\n}\r\n\r\n/**\r\n * Technician proposes pricing and duration\r\n */\r\nexport interface OrderProposalParams {\r\n    proposedPriceMin?: number | null;\r\n    proposedPriceMax?: number | null;\r\n    proposedBreakdown?: { labor?: number | null; parts?: number | null; inspection?: number | null } | null;\r\n    proposedDurationMinutes: number;\r\n    proposedArrivalETA?: string | null;\r\n    proposalNote?: string;\r\n    proposalMediaUrls?: string[];\r\n    proposedByTechnicianId: string;\r\n}\r\nexport async function proposeOrderPricing(orderId: string, params: OrderProposalParams): Promise<void> {\r\n    const totalFromBreakdown = params.proposedBreakdown\r\n        ? Number(params.proposedBreakdown.labor || 0) + Number(params.proposedBreakdown.parts || 0) + Number(params.proposedBreakdown.inspection || 0)\r\n        : null;\r\n    const totalFromRange = params.proposedPriceMax ?? params.proposedPriceMin ?? null;\r\n    const recommendedTotal = (totalFromBreakdown ?? totalFromRange) ?? null;\r\n    const ttlMs = 48 * 60 * 60 * 1000;\r\n    const expiresAt = Timestamp.fromDate(new Date(Date.now() + ttlMs)) as any;\r\n    const updates: Partial<Order> = {\r\n        proposedPrice: params.proposedPriceMax ?? params.proposedPriceMin ?? null,\r\n        proposedPriceMin: params.proposedPriceMin ?? null,\r\n        proposedPriceMax: params.proposedPriceMax ?? null,\r\n        proposedBreakdown: params.proposedBreakdown ?? null,\r\n        proposedDurationMinutes: params.proposedDurationMinutes,\r\n        proposedArrivalETA: params.proposedArrivalETA ?? null,\r\n        proposalNote: params.proposalNote || null,\r\n        proposalMediaUrls: params.proposalMediaUrls || null,\r\n        proposedByTechnicianId: params.proposedByTechnicianId,\r\n        proposedAt: serverTimestamp() as any,\r\n        proposedExpiresAt: expiresAt,\r\n        pricingStatus: \"proposed\",\r\n    };\r\n    await updateOrder(orderId, updates);\r\n    try {\r\n        const baseMessage = `Technician proposed pricing for order ${orderId}` + (recommendedTotal != null ? ` • AED ${recommendedTotal}` : \"\");\r\n        await createNotification({\r\n            type: \"system\",\r\n            title: \"Pricing Proposed\",\r\n            message: baseMessage,\r\n            role: \"admin\",\r\n            orderId,\r\n            link: `/admin/orders`\r\n        });\r\n        if (recommendedTotal != null && recommendedTotal > 500) {\r\n            await createNotification({\r\n                type: \"system\",\r\n                title: \"High-Value Proposal\",\r\n                message: `Order ${orderId} requires Super Admin review • AED ${recommendedTotal}`,\r\n                role: \"super_admin\",\r\n                orderId,\r\n                link: `/admin/orders`\r\n            });\r\n        } else if (recommendedTotal != null && recommendedTotal < 200) {\r\n            await createNotification({\r\n                type: \"system\",\r\n                title: \"Auto-Approval Candidate\",\r\n                message: `Order ${orderId} proposed under AED 200 • Consider auto-approve`,\r\n                role: \"admin\",\r\n                orderId,\r\n                link: `/admin/orders`\r\n            });\r\n        }\r\n    } catch (_e) { void _e }\r\n}\r\n\r\n/**\r\n * Super Admin approves pricing\r\n */\r\nexport async function approveOrderPricing(orderId: string, adminUid: string): Promise<void> {\r\n    const snap = await getDoc(doc(db, \"orders\", orderId));\r\n    if (!snap.exists()) return;\r\n    const data = snap.data() as any;\r\n    const updates: Partial<Order> = {\r\n        approvedPrice: (data.proposedBreakdown\r\n            ? Number(data.proposedBreakdown.labor || 0) + Number(data.proposedBreakdown.parts || 0) + Number(data.proposedBreakdown.inspection || 0)\r\n            : (data.proposedPriceMax ?? data.proposedPrice ?? null)),\r\n        approvedDurationMinutes: data.proposedDurationMinutes ?? null,\r\n        approvedArrivalETA: data.proposedArrivalETA ?? null,\r\n        approvedByAdminId: adminUid,\r\n        approvedAt: serverTimestamp() as any,\r\n        pricingStatus: \"approved\",\r\n    };\r\n    await updateOrder(orderId, updates);\r\n    try {\r\n        await createNotification({\r\n            type: \"system\",\r\n            title: \"Pricing Approved\",\r\n            message: `Pricing approved for order ${orderId}`,\r\n            role: \"technician\",\r\n            orderId,\r\n            link: `/technician/orders`\r\n        });\r\n    } catch (_e) { void _e }\r\n}\r\n\r\n/**\r\n * Super Admin rejects pricing\r\n */\r\nexport async function rejectOrderPricing(orderId: string): Promise<void> {\r\n    const updates: Partial<Order> = {\r\n        pricingStatus: \"rejected\",\r\n    };\r\n    await updateOrder(orderId, updates);\r\n    try {\r\n        await createNotification({\r\n            type: \"system\",\r\n            title: \"Pricing Rejected\",\r\n            message: `Pricing rejected for order ${orderId}`,\r\n            role: \"technician\",\r\n            orderId,\r\n            link: `/technician/orders`\r\n        });\r\n    } catch (_e) { void _e }\r\n}\r\n\r\n/**\r\n * Super Admin counter-offer\r\n */\r\nexport async function counterOfferPricing(orderId: string, adminUid: string, params: {\r\n    counterPrice?: number | null;\r\n    counterDurationMinutes?: number | null;\r\n    counterArrivalETA?: string | null;\r\n    counterNote?: string | null;\r\n}): Promise<void> {\r\n    const updates: Partial<Order> = {\r\n        counterPrice: params.counterPrice ?? null,\r\n        counterDurationMinutes: params.counterDurationMinutes ?? null,\r\n        counterArrivalETA: params.counterArrivalETA ?? null,\r\n        approvedByAdminId: adminUid,\r\n        counterByAdminId: adminUid,\r\n        counterAt: serverTimestamp() as any,\r\n        pricingStatus: \"countered\",\r\n        proposalNote: params.counterNote ?? null,\r\n    };\r\n    await updateOrder(orderId, updates);\r\n    try {\r\n        await createNotification({\r\n            type: \"system\",\r\n            title: \"Counter Offer\",\r\n            message: `Counter offer posted for order ${orderId}`,\r\n            role: \"technician\",\r\n            orderId,\r\n            link: `/technician/orders`\r\n        });\r\n    } catch (_e) { void _e }\r\n}\r\n\r\n/**\r\n * Technician accepts assignment\r\n */\r\nexport async function acceptAssignedOrder(orderId: string, technicianUid: string): Promise<void> {\r\n    const ref = doc(db, \"orders\", orderId);\r\n    const snap = await getDoc(ref);\r\n    if (!snap.exists()) throw new Error(\"Order not found\");\r\n    const data = snap.data() as any;\r\n    if ((data.status !== \"assigned\") || (data.technicianId && data.technicianId !== technicianUid)) {\r\n        throw new Error(\"Not allowed to accept\");\r\n    }\r\n    await updateOrder(orderId, {\r\n        status: \"accepted\",\r\n    });\r\n}\r\n\r\n/**\r\n * Technician re-accepts counter-offer\r\n */\r\nexport async function reAcceptCounterOffer(orderId: string, technicianUid: string): Promise<void> {\r\n    const ref = doc(db, \"orders\", orderId);\r\n    const snap = await getDoc(ref);\r\n    if (!snap.exists()) throw new Error(\"Order not found\");\r\n    const data = snap.data() as any;\r\n    if ((data.pricingStatus !== \"countered\") || (data.technicianId && data.technicianId !== technicianUid)) {\r\n        throw new Error(\"Not allowed to re-accept\");\r\n    }\r\n    await updateOrder(orderId, {\r\n        pricingStatus: \"re_accepted\",\r\n    });\r\n    try {\r\n        await createNotification({\r\n            type: \"system\",\r\n            title: \"Counter Offer Accepted\",\r\n            message: `Technician accepted counter offer for order ${orderId}`,\r\n            role: \"admin\",\r\n            orderId,\r\n            link: `/admin/orders`\r\n        });\r\n    } catch (_e) { void _e }\r\n}\r\n\r\n/**\r\n * Start work (requires approved pricing)\r\n */\r\nexport async function startWork(orderId: string, technicianUid: string): Promise<void> {\r\n    const ref = doc(db, \"orders\", orderId);\r\n    const snap = await getDoc(ref);\r\n    if (!snap.exists()) throw new Error(\"Order not found\");\r\n    const data = snap.data() as any;\r\n    if ((data.pricingStatus !== \"approved\") || (data.technicianId && data.technicianId !== technicianUid)) {\r\n        throw new Error(\"Cannot start work\");\r\n    }\r\n    await updateOrder(orderId, {\r\n        status: \"in_progress\",\r\n    });\r\n}\r\n/**\r\n * Subscribe to all orders in real-time\r\n */\r\nexport function subscribeToOrders(callback: (orders: Order[]) => void): () => void {\r\n    if (typeof window !== \"undefined\" && isMockMode) {\r\n        callback([]);\r\n        return () => undefined;\r\n    }\r\n    const q = query(collection(db, \"orders\"), orderBy(\"createdAt\", \"desc\"));\r\n\r\n    return onSnapshot(q, (snapshot) => {\r\n        const orders = snapshot.docs.map((doc) => ({\r\n            id: doc.id,\r\n            ...doc.data(),\r\n        })) as Order[];\r\n        callback(orders);\r\n    });\r\n}\r\n\r\n/**\r\n * Subscribe to orders by technician in real-time\r\n */\r\nexport function subscribeToTechnicianOrders(\r\n    technicianId: string,\r\n    callback: (orders: Order[]) => void\r\n): () => void {\r\n    if (typeof window !== \"undefined\" && isMockMode) {\r\n        callback([]);\r\n        return () => undefined;\r\n    }\r\n    const q = query(\r\n        collection(db, \"orders\"),\r\n        where(\"technicianId\", \"==\", technicianId),\r\n        orderBy(\"createdAt\", \"desc\")\r\n    );\r\n\r\n    return onSnapshot(q, (snapshot) => {\r\n        const orders = snapshot.docs.map((doc) => ({\r\n            id: doc.id,\r\n            ...doc.data(),\r\n        })) as Order[];\r\n        callback(orders);\r\n    });\r\n}\r\n\r\n/**\r\n * Subscribe to orders by customer in real-time\r\n */\r\nexport function subscribeToCustomerOrders(\r\n    customerId: string,\r\n    callback: (orders: Order[]) => void\r\n): () => void {\r\n    if (typeof window !== \"undefined\" && isMockMode) {\r\n        callback([]);\r\n        return () => undefined;\r\n    }\r\n    const q = query(\r\n        collection(db, \"orders\"),\r\n        where(\"customerId\", \"==\", customerId),\r\n        orderBy(\"createdAt\", \"desc\")\r\n    );\r\n\r\n    return onSnapshot(q, (snapshot) => {\r\n        const orders = snapshot.docs.map((doc) => ({\r\n            id: doc.id,\r\n            ...doc.data(),\r\n        })) as Order[];\r\n        callback(orders);\r\n    });\r\n}\r\n","import {\r\n    collection,\r\n    doc,\r\n    addDoc,\r\n    updateDoc,\r\n    deleteDoc,\r\n    getDocs,\r\n    onSnapshot,\r\n    query,\r\n    where,\r\n    orderBy,\r\n    Timestamp,\r\n    limit\r\n} from \"firebase/firestore\"\r\nimport { db, isMockMode } from \"@/lib/firebaseConfig\"\r\n\r\nexport interface Notification {\r\n    id?: string\r\n    type: \"order_created\" | \"status_update\" | \"assignment\" | \"low_stock\" | \"system\"\r\n    title: string\r\n    message: string\r\n    read: boolean\r\n    userId?: string\r\n    role?: \"admin\" | \"technician\" | \"customer\" | \"super_admin\"\r\n    orderId?: string\r\n    link?: string\r\n    createdAt?: Date\r\n}\r\n\r\n// Create a notification\r\nexport async function createNotification(notification: Omit<Notification, \"id\" | \"read\" | \"createdAt\">) {\r\n    const docRef = await addDoc(collection(db, \"notifications\"), {\r\n        ...notification,\r\n        read: false,\r\n        createdAt: Timestamp.now()\r\n    })\r\n    return docRef.id\r\n}\r\n\r\n// Mark notification as read\r\nexport async function markAsRead(notificationId: string) {\r\n    await updateDoc(doc(db, \"notifications\", notificationId), {\r\n        read: true\r\n    })\r\n}\r\n\r\n// Mark all notifications as read for a user\r\nexport async function markAllAsRead(userId: string) {\r\n    const snapshot = await getDocs(\r\n        query(collection(db, \"notifications\"), where(\"userId\", \"==\", userId), where(\"read\", \"==\", false))\r\n    )\r\n\r\n    const updates = snapshot.docs.map(d => updateDoc(d.ref, { read: true }))\r\n    await Promise.all(updates)\r\n}\r\n\r\n// Delete a notification\r\nexport async function deleteNotification(id: string) {\r\n    await deleteDoc(doc(db, \"notifications\", id))\r\n}\r\n\r\n// Get unread count for user\r\nexport async function getUnreadCount(userId: string) {\r\n    const snapshot = await getDocs(\r\n        query(collection(db, \"notifications\"), where(\"userId\", \"==\", userId), where(\"read\", \"==\", false))\r\n    )\r\n    return snapshot.size\r\n}\r\n\r\n// Subscribe to notifications for a user\r\nexport function subscribeToNotifications(userId: string, callback: (notifications: Notification[]) => void) {\r\n    if (typeof window !== \"undefined\" && isMockMode) {\r\n        callback([]);\r\n        return () => { };\r\n    }\r\n    return onSnapshot(\r\n        query(\r\n            collection(db, \"notifications\"),\r\n            where(\"userId\", \"==\", userId),\r\n            orderBy(\"createdAt\", \"desc\"),\r\n            limit(50)\r\n        ),\r\n        (snapshot) => {\r\n            const notifications = snapshot.docs.map(d => ({\r\n                id: d.id,\r\n                ...d.data(),\r\n                createdAt: d.data().createdAt?.toDate()\r\n            } as Notification))\r\n            callback(notifications)\r\n        }\r\n    )\r\n}\r\n\r\n// Subscribe to notifications for admin (all admin notifications)\r\nexport function subscribeToAdminNotifications(callback: (notifications: Notification[]) => void) {\r\n    if (typeof window !== \"undefined\" && isMockMode) {\r\n        callback([]);\r\n        return () => { };\r\n    }\r\n    return onSnapshot(\r\n        query(\r\n            collection(db, \"notifications\"),\r\n            where(\"role\", \"==\", \"admin\"),\r\n            orderBy(\"createdAt\", \"desc\"),\r\n            limit(50)\r\n        ),\r\n        (snapshot) => {\r\n            const notifications = snapshot.docs.map(d => ({\r\n                id: d.id,\r\n                ...d.data(),\r\n                createdAt: d.data().createdAt?.toDate()\r\n            } as Notification))\r\n            callback(notifications)\r\n        }\r\n    )\r\n}\r\n\r\n// Helper functions to create specific notification types\r\nexport async function notifyOrderCreated(orderId: string, customerName: string) {\r\n    await createNotification({\r\n        type: \"order_created\",\r\n        title: \"New Order\",\r\n        message: `New order ${orderId} from ${customerName}`,\r\n        role: \"admin\",\r\n        orderId,\r\n        link: `/admin/orders`\r\n    })\r\n}\r\n\r\nexport async function notifyStatusUpdate(orderId: string, newStatus: string, customerId?: string) {\r\n    if (customerId) {\r\n        await createNotification({\r\n            type: \"status_update\",\r\n            title: \"Order Status Updated\",\r\n            message: `Your order ${orderId} is now: ${newStatus}`,\r\n            userId: customerId,\r\n            role: \"customer\",\r\n            orderId,\r\n            link: `/track?id=${orderId}`\r\n        })\r\n    }\r\n}\r\n\r\nexport async function notifyTechnicianAssigned(orderId: string, technicianId: string, technicianName: string) {\r\n    await createNotification({\r\n        type: \"assignment\",\r\n        title: \"New Assignment\",\r\n        message: `You have been assigned to order ${orderId}`,\r\n        userId: technicianId,\r\n        role: \"technician\",\r\n        orderId,\r\n        link: `/technician/orders`\r\n    })\r\n}\r\n\r\nexport async function notifyLowStock(itemName: string, currentQty: number) {\r\n    await createNotification({\r\n        type: \"low_stock\",\r\n        title: \"Low Stock Alert\",\r\n        message: `${itemName} is running low (${currentQty} remaining)`,\r\n        role: \"admin\",\r\n        link: `/admin/inventory`\r\n    })\r\n}\r\n"],"names":[],"mappings":"uCAaM,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAS,AAAT,CAAA,CAAA,CAAA,QAAS,OAAA,EAAiB,QAAU,CAAA,CAAA,AACxC,CAAC,QAAU,CAAA,CAAA,AAAE,EAAI,CAAA,CAAA,CAAA,CAAA,CAAA,CAAM,CAAI,CAAA,CAAA,IAAA,CAAM,CAAG,CAAA,CAAA,CAAA,CAAA,CAAA,AAAK,GAAK,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAU,CAAA,CAAA,AACxD,CAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAQ,CAAA,CAAA,AAAE,EAAG,CAAkB,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAK,QAAA,CAAU,CAAA,CAChD,CAAA,CAAA,oDCHK,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAgB,CAAhB,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAgB,OAAA,EAAiB,eAAiB,CAAA,CAAA,AACtD,CAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAQ,CAAA,CAAA,AAAE,EAAG,CAAkC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAK,QAAA,CAAU,CAAA,CAChE,CAAA,CAAA,2DCFK,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAQ,CAAR,CAAA,SAAQ,OAAA,EAAiB,OAAS,CAAA,CAAA,AACtC,CAAC,QAAU,CAAA,CAAA,AAAE,EAAI,CAAA,CAAA,CAAA,CAAA,CAAA,CAAM,CAAI,CAAA,CAAA,IAAA,CAAM,CAAG,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAM,GAAK,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAU,CAAA,CAAA,AACzD,CAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAY,CAAA,CAAE,AAAF,OAAU,CAAoB,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAK,AAAL,QAAK,CAAU,CAAA,CAC3D,CAAA,CAAA,mDChBD,IAAA,EAAuB,EAAA,CAAA,CAAA,EAAX,KAEZ,MAFuB,GAEd,EAAe,CAAA,EAAU,AAChC,IAAM,EAAY,EAAA,MAAA,CAAO,CAAE,QAAO,SAAU,CAAM,CAAC,EAKnD,OAAa,EAAA,OAAA,CAAQ,KACf,CADqB,CACjB,OAAA,CAAQ,KAAA,GAAU,IACxB,EAAI,CAD2B,MAC3B,CAAQ,QAAA,CAAW,EAAI,OAAA,CAAQ,KAAA,CACnC,EAAI,OAAA,CAAQ,KAAA,CAAQ,GAEf,EAAI,OAAA,CAAQ,QAAA,EAClB,CAAC,EAAM,CACZ,EADW,kDCDL,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAS,CAAT,CAAA,CAAA,QAAS,OAAA,EAAiB,QAAU,CAAA,CAAA,AACxC,CAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAQ,CAAA,CAAA,AAAE,EAAG,CAAW,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAK,QAAA,CAAU,CAAA,CACxC,AADwC,CACvC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAQ,CAAA,CAAA,AAAE,EAAG,CAAyC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAK,QAAA,CAAU,CAAA,CAAA,AACtE,CAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAQ,CAAA,CAAA,AAAE,EAAG,CAAsC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAK,QAAA,CAAU,CAAA,CAAA,AACnE,CAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAQ,CAAE,CAAA,CAAA,CAAI,CAAM,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAI,CAAM,CAAA,CAAA,CAAA,CAAA,EAAA,CAAI,CAAA,CAAA,CAAA,CAAM,CAAA,CAAA,CAAA,CAAI,CAAA,CAAA,CAAA,CAAM,CAAA,CAAA,CAAA,CAAA,CAAK,AAAL,QAAK,CAAU,CAAA,CAClE,AADkE,CACjE,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAQ,CAAE,CAAA,CAAA,CAAI,CAAM,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAI,CAAM,CAAA,CAAA,CAAA,CAAA,EAAA,CAAI,CAAA,CAAA,CAAA,CAAM,CAAA,CAAA,CAAA,CAAI,CAAA,CAAA,CAAA,CAAM,CAAA,CAAA,CAAA,CAAA,CAAA,AAAK,OAAA,CAAS,CAAA,CAClE,CAAA,CAAA,oDCNK,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAO,CAAP,UAAO,OAAA,EAAiB,MAAQ,CAAA,CAAA,AACpC,CAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAQ,CAAA,CAAA,AAAE,EAAG,CAAY,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAK,QAAA,CAAU,CAAA,CAAA,AACzC,CAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAQ,CAAA,CAAE,AAAF,EAAK,CAAY,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAK,QAAA,CAAU,CAAA,CAC1C,CAAA,CAAA,mECbD,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAEA,EAAA,EAAA,CAAA,CAAA,OAEA,SAAS,EAAO,CACd,GAAG,EAC+C,EAClD,MAAO,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAoB,CAAA,CAAC,YAAU,SAAU,GAAG,CAAK,EAC3D,CAEA,SAAS,EAAc,CACrB,GAAG,EACkD,EACrD,MAAO,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAuB,CAAA,CAAC,YAAU,iBAAkB,GAAG,CAAK,EACtE,CAEA,SAAS,EAAa,CACpB,GAAG,EACiD,EACpD,MAAO,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAsB,CAAA,CAAC,YAAU,gBAAiB,GAAG,CAAK,EACpE,CAQA,SAAS,EAAc,WACrB,CAAS,CACT,GAAG,EACkD,EACrD,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAuB,CAAA,CACtB,YAAU,iBACV,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EACX,yJACA,GAED,GAAG,CAAK,EAGf,CAEA,SAAS,EAAc,WACrB,CAAS,UACT,CAAQ,iBACR,GAAkB,CAAI,CACtB,GAAG,EAGJ,EACC,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,CAAa,YAAU,0BACtB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAA,GACD,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,OAAuB,CAAA,CACtB,YAAU,iBACV,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EACX,8WACA,GAED,GAAG,CAAK,WAER,EACA,GACC,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,KAAqB,CAAA,CACpB,YAAU,eACV,UAAU,8WAEV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAA,GACN,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,mBAAU,kBAMtC,CAEA,SAAS,EAAa,WAAE,CAAS,CAAE,GAAG,EAAoC,EACxE,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACC,YAAU,gBACV,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EAAC,+CAAgD,GAC7D,GAAG,CAAK,EAGf,CAEA,SAAS,EAAa,WAAE,CAAS,CAAE,GAAG,EAAoC,EACxE,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACC,YAAU,gBACV,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EACX,yDACA,GAED,GAAG,CAAK,EAGf,CAEA,SAAS,EAAY,WACnB,CAAS,CACT,GAAG,EACgD,EACnD,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAqB,CAAA,CACpB,YAAU,eACV,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EAAC,qCAAsC,GACnD,GAAG,CAAK,EAGf,CAEA,SAAS,EAAkB,CACzB,WAAS,CACT,GAAG,EACsD,EACzD,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAA2B,CAAA,CAC1B,YAAU,qBACV,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EAAC,gCAAiC,GAC9C,GAAG,CAAK,EAGf,mLCpHM,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAO,CAAP,UAAO,OAAA,EAAiB,MAAQ,CAAA,CAAA,AACpC,CAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAQ,CAAA,CAAA,AAAE,EAAG,CAA6C,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAK,QAAA,CAAU,CAAA,CAAA,AAC1E,CAAC,QAAU,CAAA,CAAA,AAAE,EAAI,CAAA,CAAA,CAAA,CAAA,CAAA,CAAM,CAAI,CAAA,CAAA,GAAA,CAAK,CAAG,CAAA,CAAA,CAAA,CAAA,CAAA,AAAK,GAAK,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAU,CAAA,CACxD,CAAA,CAAA,wDCHK,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAiB,AAAjB,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAiB,OAAA,EAAiB,gBAAkB,CAAA,CAAA,AACxD,CAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAQ,CAAA,CAAA,AAAE,EAAG,CAAmC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAK,QAAA,CAAU,CAAA,CAChE,AADgE,CAC/D,CAAA,CAAA,CAAA,CAAA,CAAA,CAAQ,CAAA,CAAA,AAAE,EAAG,CAAkB,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAK,QAAA,CAAU,CAAA,CAChD,CAAA,CAAA,sFCHK,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAgB,CAAhB,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAgB,OAAA,EAAiB,eAAiB,CAAA,CAAA,AACtD,CAAA,AACE,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AACA,CAAA,AACE,CAAG,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AACH,CAAA,CAAA,CAAK,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AACP,CAAA,CACF,CACA,AADA,CACC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAQ,CAAA,CAAA,AAAE,EAAG,CAAW,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAK,QAAA,CAAU,CAAA,CAAA,AACxC,CAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAQ,CAAA,CAAE,AAAF,EAAK,CAAc,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAK,QAAA,CAAU,CAAA,CAC5C,CAAA,CAAA,sEEVK,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAM,WAAA,OAAA,EAAiB,KAAO,CAAA,CAAA,AAClC,CAAA,AACE,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AACA,CACE,AADF,CACK,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AACH,CAAA,CAAA,CAAK,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AACP,CAAA,CACF,CAAA,AACA,CAAC,QAAU,CAAA,CAAA,AAAE,EAAI,CAAA,CAAA,CAAA,CAAA,CAAA,CAAM,CAAI,CAAA,CAAA,IAAA,CAAM,CAAG,CAAA,CAAA,CAAA,CAAA,CAAA,AAAK,GAAK,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAU,CAAA,CACzD,CAAA,CAAA,yBDtBD,EAAA,CAAA,CAAA,OAAA,IAAA,EAAA,EAAA,CAAA,CAAA,OAWA,EAAA,CAAA,CAAA,OAAA,IAAA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OEWO,eAAe,EAClB,CAAc,CACd,CAA8B,CAC9B,CAAc,CACd,CAAiB,CACjB,CAIC,EAED,GAAI,CACA,MAAM,CAAA,EAAA,EAAA,MAAA,AAAM,EAAC,CAAA,EAAA,EAAA,UAAU,AAAV,EAAW,EAAA,EAAE,CAAE,cAAe,QACvC,WACA,SACA,YACA,EACA,SAAU,GAAS,UAAY,KAC/B,WAAY,GAAS,YAAc,KACnC,QAAS,GAAS,SAAW,KAC7B,UAAW,EAAA,SAAS,CAAC,GAAG,EAC5B,EACJ,CAAE,MAAO,EAAO,CACZ,QAAQ,KAAK,CAAC,8BAA+B,EACjD,CACJ,CAqCO,IAAM,EAAe,CAExB,cAAe,gBACf,cAAe,gBACf,cAAe,gBACf,eAAgB,iBAChB,qBAAsB,uBAGtB,mBAAoB,qBACpB,mBAAoB,qBACpB,mBAAoB,qBAGpB,gBAAiB,kBACjB,kBAAmB,oBACnB,kBAAmB,oBAGnB,WAAY,aACZ,YAAa,cACb,iBAAkB,mBAClB,uBAAwB,yBACxB,SAAU,WACV,aAAc,eACd,uBAAwB,yBACxB,sBAAuB,wBAGvB,iBAAkB,mBAGlB,iBAAkB,mBAClB,WAAY,YAChB,EF1BO,eAAe,IAClB,GAAI,CACA,MAAM,CAAA,EAAA,EAAA,OAAe,AAAf,EAAgB,EAAA,IAAI,CAC9B,CAAE,MAAO,EAAY,CAEjB,MADA,QAAQ,KAAK,CAAC,kBAAmB,GAC3B,AAAI,MAAM,EAAM,OAAO,EAAI,qBACrC,CACJ,CAiBO,eAAe,EAAY,CAAW,EACzC,GAAI,CACA,IAAM,EAAU,MAAM,CAAA,EAAA,EAAA,MAAA,AAAM,EAAC,CAAA,EAAA,EAAA,GAAA,AAAG,EAAC,EAAA,EAAE,CAAE,QAAS,IAC9C,GAAI,CAAC,EAAQ,MAAM,GACf,CADmB,MACZ,KAEX,MAAO,CACH,IAAK,EAAQ,EAAE,CACf,GAAG,EAAQ,IAAI,EAAE,AACrB,CACJ,CAAE,MAAO,EAAY,CAEjB,OADA,QAAQ,KAAK,CAAC,uBAAwB,GAC/B,IACX,CACJ,CAKO,eAAe,EAAY,CAAW,EACzC,IAAM,EAAW,MAAM,EAAY,GACnC,OAAO,GAAU,MAAQ,IAC7B,CA+BO,eAAe,EAAe,CAAuB,CAAE,CAAmB,EAC7E,IAAM,EAAO,EAAA,IAAI,CAAC,WAAW,CAC7B,GAAI,CAAC,GAAQ,CAAC,EAAK,KAAK,CACpB,CADsB,KAChB,AAAI,MAAM,qBAEpB,IAAM,EAAa,EAAA,iBAAiB,CAAC,UAAU,CAAC,EAAK,KAAK,CAAE,EAC5D,OAAM,CAAA,EAAA,EAAA,4BAAA,AAA4B,EAAC,EAAM,GACzC,MAAM,CAAA,EAAA,EAAA,cAAA,AAAc,EAAC,EAAM,GAC3B,MAAM,EAAU,EAAa,gBAAgB,CAAE,OAAQ,EAAK,GAAG,CAAE,EAAK,KAAK,EAAI,GACnF,kJGnLA,EAAA,CAAA,CAAA,OAAA,IAAA,EAAA,EAAA,CAAA,CAAA,OAgBA,EAAA,EAAA,CAAA,CAAA,OCcO,eAAe,EAAmB,CAA6D,EAMlG,MAAO,CALQ,MAAM,CAAA,EAAA,EAAA,MAAA,AAAM,EAAC,CAAA,EAAA,EAAA,UAAA,AAAU,EAAC,EAAA,EAAE,CAAE,iBAAkB,CACzD,GAAG,CAAY,CACf,MAAM,EACN,UAAW,EAAA,SAAS,CAAC,GAAG,EAC5B,EAAA,EACc,EAAE,AACpB,CDsBO,eAAe,EAAY,CAAe,CAAE,CAAuB,EACtE,GAAI,CACA,MAAM,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,CAAA,EAAA,EAAA,GAAG,AAAH,EAAI,EAAA,EAAE,CAAE,SAAU,GAAU,CACxC,GAAG,CAAO,CACV,UAAW,CAAA,EAAA,EAAA,eAAA,AAAe,GAC9B,EACJ,CAAE,MAAO,EAAY,CAEjB,MADA,QAAQ,KAAK,CAAC,sBAAuB,GAC/B,AAAI,MAAM,EAAM,OAAO,EAAI,yBACrC,CACJ,CAsJO,eAAe,EAAoB,CAAe,CAAE,CAA2B,EAClF,IAAM,EAAqB,EAAO,iBAAiB,CAC7C,OAAO,EAAO,iBAAiB,CAAC,KAAK,EAAI,GAAK,OAAO,EAAO,iBAAiB,CAAC,KAAK,EAAI,GAAK,OAAO,EAAO,iBAAiB,CAAC,UAAU,EAAI,GAC1I,KACA,EAAiB,EAAO,gBAAgB,EAAI,EAAO,gBAAgB,EAAI,KACvE,EAAoB,GAAsB,GAAmB,KAE7D,EAAY,EAAA,SAAS,CAAC,QAAQ,CAAC,IAAI,KAAK,KAAK,GAAG,GADxC,EAC6C,GADxC,IAEb,CAFkB,CAEQ,CAC5B,GAHyB,WAGV,EAAO,gBAAgB,EAAI,EAAO,gBAAgB,EAAI,KACrE,iBAAkB,EAAO,gBAAgB,EAAI,KAC7C,iBAAkB,EAAO,gBAAgB,EAAI,KAC7C,kBAAmB,EAAO,iBAAiB,EAAI,KAC/C,wBAAyB,EAAO,uBAAuB,CACvD,mBAAoB,EAAO,kBAAkB,EAAI,KACjD,aAAc,EAAO,YAAY,EAAI,KACrC,kBAAmB,EAAO,iBAAiB,EAAI,KAC/C,uBAAwB,EAAO,sBAAsB,CACrD,WAAY,CAAA,EAAA,EAAA,eAAA,AAAe,IAC3B,kBAAmB,EACnB,cAAe,UACnB,CACA,OAAM,EAAY,EAAS,GAC3B,GAAI,CACA,IAAM,EAAc,CAAC,sCAAsC,EAAE,EAAA,CAAS,CAAI,CAAoB,CAArB,OAA4B,CAAC,OAAO,EAAE,EAAA,CAAkB,CAAG,EAAA,CAAE,AACtI,OAAM,EAAmB,CACrB,KAAM,SACN,MAAO,mBACP,QAAS,EACT,KAAM,QACN,UACA,KAAM,CAAC,aAAa,CACxB,AADyB,GAED,MAApB,GAA4B,EAAmB,IAC/C,CADoD,KAC9C,EAAmB,CACrB,KAAM,SACN,MAAO,sBACP,QAAS,CAAC,MAAM,EAAE,EAAQ,mCAAmC,EAAE,EAAA,CAAkB,CACjF,KAAM,sBACN,EACA,KAAM,CAAC,aAAa,CAAC,AACzB,GAC2B,MAApB,GAA4B,EAAmB,KAAK,AAC3D,MAAM,EAAmB,CACrB,KAAM,SACN,MAAO,0BACP,QAAS,CAAC,MAAM,EAAE,EAAQ,+CAA+C,CAAC,CAC1E,KAAM,gBACN,EACA,KAAM,CAAC,aAAa,CAAC,AACzB,EAER,CAAE,MAAO,EAAI,CAAU,CAC3B,CAKO,eAAe,EAAoB,CAAe,CAAE,CAAgB,EACvE,IAAM,EAAO,MAAM,CAAA,EAAA,EAAA,MAAA,AAAM,EAAC,CAAA,EAAA,EAAA,GAAA,AAAG,EAAC,EAAA,EAAE,CAAE,SAAU,IAC5C,GAAI,CAAC,EAAK,MAAM,GAAI,OACpB,IAAM,EAAO,EAAK,IAAI,GAChB,EAA0B,CAC5B,cAAgB,EAAK,iBAAiB,CAChC,OAAO,EAAK,iBAAiB,CAAC,KAAK,EAAI,GAAK,OAAO,EAAK,iBAAiB,CAAC,KAAK,EAAI,GAAK,OAAO,EAAK,iBAAiB,CAAC,UAAU,EAAI,GACnI,EAAK,gBAAgB,EAAI,EAAK,aAAa,EAAI,KACtD,wBAAyB,EAAK,uBAAuB,EAAI,KACzD,mBAAoB,EAAK,kBAAkB,EAAI,KAC/C,kBAAmB,EACnB,WAAY,CAAA,EAAA,EAAA,eAAA,AAAe,IAC3B,cAAe,UACnB,CACA,OAAM,EAAY,EAAS,GAC3B,GAAI,CACA,MAAM,EAAmB,CACrB,KAAM,SACN,MAAO,mBACP,QAAS,CAAC,2BAA2B,EAAE,EAAA,CAAS,CAChD,KAAM,aACN,UACA,KAAM,CAAC,kBAAkB,CAAC,AAC9B,EACJ,CAAE,MAAO,EAAI,CAAU,CAC3B,CAKO,eAAe,EAAmB,CAAe,EAIpD,MAAM,EAAY,EAHc,CAC5B,MAEuB,QAFR,UACnB,GAEA,GAAI,CACA,MAAM,EAAmB,CACrB,KAAM,SACN,MAAO,mBACP,QAAS,CAAC,2BAA2B,EAAE,EAAA,CAAS,CAChD,KAAM,qBACN,EACA,KAAM,CAAC,kBAAkB,CAC7B,AAD8B,EAElC,CAAE,MAAO,EAAI,CAAU,CAC3B,CAKO,eAAe,EAAoB,CAAe,CAAE,CAAgB,CAAE,CAK5E,EACG,IAAM,EAA0B,CAC5B,aAAc,EAAO,YAAY,EAAI,KACrC,uBAAwB,EAAO,sBAAsB,EAAI,KACzD,kBAAmB,EAAO,iBAAiB,EAAI,KAC/C,kBAAmB,EACnB,iBAAkB,EAClB,UAAW,CAAA,EAAA,EAAA,eAAA,AAAe,IAC1B,cAAe,YACf,aAAc,EAAO,WAAW,EAAI,IACxC,CACA,OAAM,EAAY,EAAS,GAC3B,GAAI,CACA,MAAM,EAAmB,CACrB,KAAM,SACN,MAAO,gBACP,QAAS,CAAC,+BAA+B,EAAE,EAAA,CAAS,CACpD,KAAM,qBACN,EACA,KAAM,CAAC,kBAAkB,CAC7B,AAD8B,EAElC,CAAE,MAAO,EAAI,CAAU,CAC3B,CAKO,eAAe,EAAoB,CAAe,CAAE,CAAqB,EAC5E,IAAM,EAAM,CAAA,EAAA,EAAA,GAAA,AAAG,EAAC,EAAA,EAAE,CAAE,SAAU,GACxB,EAAO,MAAM,CAAA,EAAA,EAAA,MAAA,AAAM,EAAC,GAC1B,GAAI,CAAC,EAAK,MAAM,GAAI,MAAM,AAAI,MAAM,mBACpC,IAAM,EAAO,EAAK,IAAI,GACtB,GAAqB,aAAhB,EAAK,MAAM,EAAqB,EAAK,YAAY,EAAI,EAAK,YAAY,GAAK,EAC5E,MAAM,AAAI,MAAM,CAD4E,uBAGhG,OAAM,EAAY,EAAS,CACvB,OAAQ,UACZ,EACJ,CAKO,eAAe,EAAqB,CAAe,CAAE,CAAqB,EAC7E,IAAM,EAAM,CAAA,EAAA,EAAA,GAAA,AAAG,EAAC,EAAA,EAAE,CAAE,SAAU,GACxB,EAAO,MAAM,CAAA,EAAA,EAAA,MAAA,AAAM,EAAC,GAC1B,GAAI,CAAC,EAAK,MAAM,GAAI,MAAM,AAAI,MAAM,mBACpC,IAAM,EAAO,EAAK,IAAI,GACtB,GAA4B,cAAvB,EAAK,aAAa,EAAsB,EAAK,YAAY,EAAI,EAAK,YAAY,GAAK,EACpF,MAAM,AAAI,MAAM,CADoF,0BAGxG,OAAM,EAAY,EAAS,CACvB,cAAe,aACnB,GACA,GAAI,CACA,MAAM,EAAmB,CACrB,KAAM,SACN,MAAO,yBACP,QAAS,CAAC,4CAA4C,EAAE,EAAA,CAAS,CACjE,KAAM,QACN,UACA,KAAM,CAAC,aAAa,CACxB,AADyB,EAE7B,CAAE,MAAO,EAAI,CAAU,CAC3B,CAKO,eAAe,EAAU,CAAe,CAAE,CAAqB,EAClE,IAAM,EAAM,CAAA,EAAA,EAAA,GAAA,AAAG,EAAC,EAAA,EAAE,CAAE,SAAU,GACxB,EAAO,MAAM,CAAA,EAAA,EAAA,MAAA,AAAM,EAAC,GAC1B,GAAI,CAAC,EAAK,MAAM,GAAI,MAAM,AAAI,MAAM,mBACpC,IAAM,EAAO,EAAK,IAAI,GACtB,GAA4B,aAAvB,EAAK,aAAa,EAAqB,EAAK,YAAY,EAAI,EAAK,YAAY,GAAK,EACnF,MAAM,AAAI,MAAM,CADmF,mBAGvG,OAAM,EAAY,EAAS,CACvB,OAAQ,aACZ,EACJ","ignoreList":[0,1,2,4,5,7,8,9,11]}