module.exports=[34497,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(91119),e=a.i(99570),f=a.i(66718),g=a.i(86304),h=a.i(80701),i=a.i(14574),j=a.i(87532),k=a.i(15618),l=a.i(83497),m=a.i(73570),n=a.i(70106);let o=(0,n.default)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);var p=a.i(81560);let q=(0,n.default)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);var r=a.i(16201);let s=(0,n.default)("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);a.i(69387);var t=a.i(60574),u=a.i(58712),v=a.i(68114);let w=["Screens","Batteries","Charging Ports","Speakers","Cameras","Motherboards","Flex Cables","Buttons","Housings","Tools","Adhesives","Other"],x=["Apple","Samsung","Huawei","Xiaomi","OnePlus","Google","Sony","LG","Universal","Other"];function y({isAdmin:a=!0,onStatsUpdate:n}){let y,[z,A]=(0,c.useState)([]),[B,C]=(0,c.useState)([]),[D,E]=(0,c.useState)(!0),[F,G]=(0,c.useState)(""),[H,I]=(0,c.useState)("all"),[J,K]=(0,c.useState)("all"),[L,M]=(0,c.useState)("all"),[N,O]=(0,c.useState)("name"),[P,Q]=(0,c.useState)(!1),[R,S]=(0,c.useState)(null),[T,U]=(0,c.useState)("details"),[V,W]=(0,c.useState)([]),[X,Y]=(0,c.useState)([]),[Z,$]=(0,c.useState)(null),[_,aa]=(0,c.useState)(!1),[ab,ac]=(0,c.useState)({name:"",sku:"",category:"Screens",brand:"Apple",compatibleDevices:"",quantity:0,minStock:5,price:0,cost:0,location:"",supplier:"",description:""});(0,c.useEffect)(()=>{if(u.isMockMode){A([]),E(!1),n?.({totalParts:0,totalValue:0,lowStockCount:0,outOfStockCount:0});return}let a=(0,t.query)((0,t.collection)(u.db,"parts"),(0,t.orderBy)("name","asc")),b=(0,t.onSnapshot)(a,a=>{let b=a.docs.map(a=>({id:a.id,...a.data()}));A(b),E(!1);let c=b.length,d=b.reduce((a,b)=>a+b.quantity*b.cost,0),e=b.filter(a=>a.quantity<=a.minStock&&a.quantity>0).length,f=b.filter(a=>0===a.quantity).length;n?.({totalParts:c,totalValue:d,lowStockCount:e,outOfStockCount:f})});return()=>b()},[]),(0,c.useEffect)(()=>{if(u.isMockMode)return void C(a=>a.length?a:[{id:"mock-s1",name:"Default Supplier",phone:"971500000000",email:"supplier@example.com",partsIds:[]}]);let a=(0,t.onSnapshot)((0,t.collection)(u.db,"suppliers"),a=>{C(a.docs.map(a=>({id:a.id,...a.data()})))});return()=>a()},[]),(0,c.useEffect)(()=>{let a;if(P&&R)if(u.isMockMode)Y(V.filter(a=>a.partId===R.id).sort((a,b)=>{let c=a.createdAt?.seconds??0;return(b.createdAt?.seconds??0)-c}));else{let b=(0,t.query)((0,t.collection)(u.db,"stock_movements"),(0,t.where)("partId","==",R.id),(0,t.orderBy)("createdAt","desc"));a=(0,t.onSnapshot)(b,a=>{Y(a.docs.map(a=>({id:a.id,...a.data()})))})}else Y([]);return()=>{"function"==typeof a&&a()}},[P,R,u.isMockMode,V]);let ad=z.filter(a=>{let b=""===F||a.name.toLowerCase().includes(F.toLowerCase())||a.sku.toLowerCase().includes(F.toLowerCase())||a.brand.toLowerCase().includes(F.toLowerCase()),c="all"===H||a.category===H,d="all"===J||a.brand===J,e="all"===L||("low"===L?a.quantity<=a.minStock&&a.quantity>0:"out"!==L||0===a.quantity);return b&&c&&d&&e}).sort((a,b)=>"name"===N?a.name.localeCompare(b.name):"quantity"===N?a.quantity-b.quantity:"category"===N?a.category.localeCompare(b.category):0),ae=async()=>{if(!ab.name.trim())return;let a={...ab,compatibleDevices:ab.compatibleDevices.split(",").map(a=>a.trim()).filter(Boolean),createdAt:t.Timestamp.now(),updatedAt:t.Timestamp.now()};if(R){await (0,t.updateDoc)((0,t.doc)(u.db,"parts",R.id),{...a,updatedAt:t.Timestamp.now()});let b=a.quantity-R.quantity;if(0!==b){let a={partId:R.id,type:b>0?"IN":"OUT",quantity:Math.abs(b),reason:"adjustment",orderId:null,userId:u.auth.currentUser?.uid||"system",createdAt:t.Timestamp.now()};u.isMockMode?W(b=>[a,...b]):await (0,t.addDoc)((0,t.collection)(u.db,"stock_movements"),a)}if(a.supplier){let b=a.supplier;try{u.isMockMode?C(a=>a.map(a=>a.id===b?{...a,partsIds:Array.from(new Set([...a.partsIds||[],R.id]))}:a)):await (0,t.updateDoc)((0,t.doc)(u.db,"suppliers",b),{partsIds:(0,t.arrayUnion)(R.id)})}catch{}}}else{let b=await (0,t.addDoc)((0,t.collection)(u.db,"parts"),a);if(a.quantity>0){let c={partId:b.id,type:"IN",quantity:a.quantity,reason:"purchase",orderId:null,userId:u.auth.currentUser?.uid||"system",createdAt:t.Timestamp.now()};u.isMockMode?W(a=>[c,...a]):await (0,t.addDoc)((0,t.collection)(u.db,"stock_movements"),c)}if(a.supplier){let c=a.supplier;try{u.isMockMode?C(a=>a.map(a=>a.id===c?{...a,partsIds:Array.from(new Set([...a.partsIds||[],b.id]))}:a)):await (0,t.updateDoc)((0,t.doc)(u.db,"suppliers",c),{partsIds:(0,t.arrayUnion)(b.id)})}catch{}}}ah(),Q(!1),S(null)},af=async a=>{confirm("Delete this part?")&&await (0,t.deleteDoc)((0,t.doc)(u.db,"parts",a))},ag=async(a,b)=>{let c=z.find(b=>b.id===a);if(!c)return;let d=Math.max(0,c.quantity+b);if(await (0,t.updateDoc)((0,t.doc)(u.db,"parts",a),{quantity:d,updatedAt:t.Timestamp.now()}),0!==b){let c={partId:a,type:b>0?"IN":"OUT",quantity:Math.abs(b),reason:b>0?"purchase":"repair",orderId:null,userId:u.auth.currentUser?.uid||"system",createdAt:t.Timestamp.now()};u.isMockMode?W(a=>[c,...a]):await (0,t.addDoc)((0,t.collection)(u.db,"stock_movements"),c)}},ah=()=>{ac({name:"",sku:"",category:"Screens",brand:"Apple",compatibleDevices:"",quantity:0,minStock:5,price:0,cost:0,location:"",supplier:"",description:""})},ai=(0,c.useMemo)(()=>{let a=u.auth.currentUser?.email?.toLowerCase()||"";return a.includes("super")||a.includes("founder")},[]),aj=a=>{let b=(a.price||0)-(a.cost||0),c=a.cost>0?b/a.cost*100:0,d="bg-green-500/20 text-green-400";return c<15?d="bg-red-500/20 text-red-400":c>=15&&c<=30&&(d="bg-yellow-500/20 text-yellow-400"),{profit:b,margin:c,color:d}},ak=z.length,al=z.reduce((a,b)=>a+b.quantity*b.cost,0),am=z.filter(a=>a.quantity<=a.minStock&&a.quantity>0).length,an=z.filter(a=>0===a.quantity).length;return D?(0,b.jsx)(d.Card,{className:"bg-white/5 border-white/10",children:(0,b.jsx)(d.CardContent,{className:"p-8 text-center text-white/50",children:"Loading inventory..."})}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,b.jsx)(d.Card,{className:"bg-white/5 border-white/10",children:(0,b.jsx)(d.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-2 bg-cyan-500/20 rounded-lg",children:(0,b.jsx)(l.Package,{className:"w-5 h-5 text-cyan-400"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-white/60",children:"Total Parts"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-white",children:ak})]})]})})}),(0,b.jsx)(d.Card,{className:"bg-white/5 border-white/10",children:(0,b.jsx)(d.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-2 bg-green-500/20 rounded-lg",children:(0,b.jsx)(r.CheckCircle,{className:"w-5 h-5 text-green-400"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-white/60",children:"Inventory Value"}),(0,b.jsxs)("p",{className:"text-2xl font-bold text-white",children:[al.toLocaleString()," AED"]})]})]})})}),(0,b.jsx)(d.Card,{className:"bg-white/5 border-white/10",children:(0,b.jsx)(d.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-2 bg-yellow-500/20 rounded-lg",children:(0,b.jsx)(m.AlertTriangle,{className:"w-5 h-5 text-yellow-400"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-white/60",children:"Low Stock"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-white",children:am})]})]})})}),(0,b.jsx)(d.Card,{className:"bg-white/5 border-white/10",children:(0,b.jsx)(d.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-2 bg-red-500/20 rounded-lg",children:(0,b.jsx)(m.AlertTriangle,{className:"w-5 h-5 text-red-400"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-white/60",children:"Out of Stock"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-white",children:an})]})]})})})]}),(0,b.jsx)(d.Card,{className:"bg-white/5 border-white/10",children:(0,b.jsx)(d.CardContent,{className:"p-4",children:(0,b.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,b.jsxs)("div",{className:"relative flex-1 min-w-[200px]",children:[(0,b.jsx)(j.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-white/40"}),(0,b.jsx)(f.Input,{placeholder:"Search parts by name, SKU, or brand...",value:F,onChange:a=>G(a.target.value),className:"pl-9 bg-white/5 border-white/10 text-white"})]}),(0,b.jsxs)(h.Select,{value:H,onValueChange:I,children:[(0,b.jsx)(h.SelectTrigger,{className:"w-[150px] bg-white/5 border-white/10 text-white hover:bg-white/10 focus-visible:border-cyan-500 focus-visible:ring-cyan-500/30 outline-none rounded-lg",children:(0,b.jsx)(h.SelectValue,{placeholder:"Category"})}),(0,b.jsxs)(h.SelectContent,{className:"bg-zinc-900 border-white/10 text-white",children:[(0,b.jsx)(h.SelectItem,{value:"all",children:"All Categories"}),w.map(a=>(0,b.jsx)(h.SelectItem,{value:a,children:a},a))]})]}),(0,b.jsxs)(h.Select,{value:J,onValueChange:K,children:[(0,b.jsx)(h.SelectTrigger,{className:"w-[130px] bg-white/5 border-white/10 text-white hover:bg-white/10 focus-visible:border-cyan-500 focus-visible:ring-cyan-500/30 outline-none rounded-lg",children:(0,b.jsx)(h.SelectValue,{placeholder:"Brand"})}),(0,b.jsxs)(h.SelectContent,{className:"bg-zinc-900 border-white/10 text-white",children:[(0,b.jsx)(h.SelectItem,{value:"all",children:"All Brands"}),x.map(a=>(0,b.jsx)(h.SelectItem,{value:a,children:a},a))]})]}),(0,b.jsxs)(h.Select,{value:L,onValueChange:a=>M(a),children:[(0,b.jsx)(h.SelectTrigger,{className:"w-[130px] bg-white/5 border-white/10 text-white hover:bg-white/10 focus-visible:border-cyan-500 focus-visible:ring-cyan-500/30 outline-none rounded-lg",children:(0,b.jsx)(h.SelectValue,{placeholder:"Stock"})}),(0,b.jsxs)(h.SelectContent,{className:"bg-zinc-900 border-white/10 text-white",children:[(0,b.jsx)(h.SelectItem,{value:"all",children:"All Stock"}),(0,b.jsx)(h.SelectItem,{value:"low",children:"Low Stock"}),(0,b.jsx)(h.SelectItem,{value:"out",children:"Out of Stock"})]})]}),(0,b.jsxs)(e.Button,{onClick:()=>{var a,b;let c,d,e,f,g,h,i,j,k;return c=a=>a.replace(/\w\S*/g,a=>a.charAt(0).toUpperCase()+a.slice(1)),d=a=>Number(a||0).toFixed(2),e=a=>{let b;return b=null==a||""===a?"â€”":String(a),`"${b.replace(/"/g,'""')}"`},f="\uFEFF"+["SKU,Part Name,Category,Brand,Compatible Devices,Supplier,Location,Quantity,Min Stock,Stock Status,Cost (AED),Price (AED),Profit (AED),Margin (%),Last Updated",...ad.map(a=>{var b,f,g,h;let i,j,k,l,m=a.sku||"â€”",n=a.name||"â€”",o=a.category?c(String(a.category)):"â€”",p=a.brand?c(String(a.brand)):"â€”",q=(a=>{if(!Array.isArray(a)||0===a.length)return"â€”";let b=a.map(a=>String(a).trim()).filter(Boolean);return b.length?b.join(" | "):"â€”"})(a.compatibleDevices),r=a.supplier||"â€”",s=a.location||"â€”",t=Number(a.quantity||0),u=Number(a.minStock||a.minQuantity||0),v=(i=Number(t||0),j=Number(u||0),0===i?"Out Of Stock":i>j?"In Stock":"Low Stock"),w=d(a.cost??a.costPrice),x=d(a.price),y=(b=a.price,f=a.cost??a.costPrice,(Number(b||0)-Number(f||0)).toFixed(2)),z=(g=a.price,h=a.cost??a.costPrice,k=Number(g||0),(l=Number(h||0))<=0?"0":String(Math.round((k-l)/l*100))),A=(a=>{if(!a)return"â€”";let b=null;if("function"==typeof a?.toDate?b=a.toDate():"number"==typeof a||"string"==typeof a?b=new Date(a):a?.seconds&&(b=new Date(1e3*a.seconds)),!b||isNaN(b.getTime()))return"â€”";let c=a=>a<10?`0${a}`:String(a),d=b.getFullYear(),e=c(b.getMonth()+1),f=c(b.getDate()),g=c(b.getHours()),h=c(b.getMinutes());return`${d}-${e}-${f} ${g}:${h}`})(a.updatedAt);return[e(m),e(n),e(o),e(p),e(q),e(r),e(s),String(t),String(u),e(v),String(w),String(x),String(y),String(z),e(A)].join(",")})].join("\r\n"),g=a=>a<10?`0${a}`:String(a),h=new Date,void(a=f,b=`inventory_export_${h.getFullYear()}-${g(h.getMonth()+1)}-${g(h.getDate())}.csv`,i=new Blob([a],{type:"text/csv;charset=utf-8;"}),j=URL.createObjectURL(i),(k=document.createElement("a")).href=j,k.download=b,document.body.appendChild(k),k.click(),document.body.removeChild(k),URL.revokeObjectURL(j))},className:"bg-white/10 hover:bg-white/20 border border-white/20 text-white",children:[(0,b.jsx)(q,{className:"w-4 h-4 mr-2"})," Export CSV"]}),a&&(0,b.jsxs)(i.Dialog,{open:P,onOpenChange:Q,children:[(0,b.jsx)(i.DialogTrigger,{asChild:!0,children:(0,b.jsxs)(e.Button,{onClick:()=>{ah(),S(null)},className:"bg-cyan-500 hover:bg-cyan-400",children:[(0,b.jsx)(k.Plus,{className:"w-4 h-4 mr-2"})," Add Part"]})}),(0,b.jsxs)(i.DialogContent,{className:"bg-zinc-900 border-white/10 text-white max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsx)(i.DialogHeader,{children:(0,b.jsx)(i.DialogTitle,{children:R?"Edit Part":"Add New Part"})}),R&&(0,b.jsx)("div",{className:"space-y-2 px-1",children:(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(e.Button,{variant:"details"===T?"default":"outline",onClick:()=>U("details"),className:"details"===T?"bg-cyan-500 text-black hover:bg-cyan-400":"",children:"Details"}),(0,b.jsx)(e.Button,{variant:"history"===T?"default":"outline",onClick:()=>U("history"),className:"history"===T?"bg-cyan-500 text-black hover:bg-cyan-400":"",children:"Stock History"})]})}),"history"===T&&R?(0,b.jsx)("div",{className:"space-y-3",children:0===X.length?(0,b.jsx)("div",{className:"text-white/50",children:"No stock movements for this part yet"}):X.map(a=>{let c=a.createdAt?.toDate?a.createdAt.toDate().toLocaleString():new Date().toLocaleString();return(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-white/5 border border-white/10",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(g.Badge,{variant:"outline",className:"IN"===a.type?"text-xs bg-green-500/20 text-green-400 border-white/10":"text-xs bg-red-500/20 text-red-400 border-white/10",children:a.type}),(0,b.jsx)("div",{className:"text-white",children:a.quantity}),(0,b.jsx)("div",{className:"text-white/70",children:a.reason}),a.orderId?(0,b.jsxs)(g.Badge,{variant:"outline",className:"text-xs bg-white/5 border-white/10 text-white/70",children:["Order ",a.orderId]}):null]}),(0,b.jsxs)("div",{className:"text-right text-xs text-white/60",children:[(0,b.jsx)("div",{children:c}),(0,b.jsx)("div",{children:a.userId})]})]},(a.id??"")+c)})}):(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm text-white/60",children:"Part Name *"}),(0,b.jsx)(f.Input,{value:ab.name,onChange:a=>ac({...ab,name:a.target.value}),className:"bg-white/5 border-white/10"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm text-white/60",children:"SKU"}),(0,b.jsx)(f.Input,{value:ab.sku,onChange:a=>ac({...ab,sku:a.target.value}),className:"bg-white/5 border-white/10",placeholder:"e.g. IP13-SCR-001"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm text-white/60",children:"Category"}),(0,b.jsxs)(h.Select,{value:ab.category,onValueChange:a=>ac({...ab,category:a}),children:[(0,b.jsx)(h.SelectTrigger,{className:"bg-white/5 border-white/10",children:(0,b.jsx)(h.SelectValue,{})}),(0,b.jsx)(h.SelectContent,{children:w.map(a=>(0,b.jsx)(h.SelectItem,{value:a,children:a},a))})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm text-white/60",children:"Brand"}),(0,b.jsxs)(h.Select,{value:ab.brand,onValueChange:a=>ac({...ab,brand:a}),children:[(0,b.jsx)(h.SelectTrigger,{className:"bg-white/5 border-white/10",children:(0,b.jsx)(h.SelectValue,{})}),(0,b.jsx)(h.SelectContent,{children:x.map(a=>(0,b.jsx)(h.SelectItem,{value:a,children:a},a))})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm text-white/60",children:"Compatible Devices (comma separated)"}),(0,b.jsx)(f.Input,{value:ab.compatibleDevices,onChange:a=>ac({...ab,compatibleDevices:a.target.value}),className:"bg-white/5 border-white/10",placeholder:"e.g. iPhone 13, iPhone 13 Pro"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm text-white/60",children:"Quantity"}),(0,b.jsx)(f.Input,{type:"number",value:ab.quantity,onChange:a=>ac({...ab,quantity:Number(a.target.value)}),className:"bg-white/5 border-white/10"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm text-white/60",children:"Min Stock Alert"}),(0,b.jsx)(f.Input,{type:"number",value:ab.minStock,onChange:a=>ac({...ab,minStock:Number(a.target.value)}),className:"bg-white/5 border-white/10"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[ai&&(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm text-white/60",children:"Cost (AED)"}),(0,b.jsx)(f.Input,{type:"number",value:ab.cost,onChange:a=>ac({...ab,cost:Number(a.target.value)}),className:"bg-white/5 border-white/10"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm text-white/60",children:"Sell Price (AED)"}),(0,b.jsx)(f.Input,{type:"number",value:ab.price,onChange:a=>ac({...ab,price:Number(a.target.value)}),className:"bg-white/5 border-white/10"}),(0,b.jsx)("div",{className:"mt-1 text-xs text-white/50",children:(y=aj({cost:ab.cost,price:ab.price}),`Margin: ${Number.isFinite(y.margin)?Math.round(y.margin):0}%`)})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm text-white/60",children:"Storage Location"}),(0,b.jsx)(f.Input,{value:ab.location,onChange:a=>ac({...ab,location:a.target.value}),className:"bg-white/5 border-white/10",placeholder:"e.g. Shelf A-1"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm text-white/60",children:"Supplier"}),(0,b.jsxs)(h.Select,{value:ab.supplier,onValueChange:a=>ac({...ab,supplier:a}),children:[(0,b.jsx)(h.SelectTrigger,{className:"bg-white/5 border-white/10",children:(0,b.jsx)(h.SelectValue,{placeholder:"Select supplier"})}),(0,b.jsx)(h.SelectContent,{children:B.map(a=>(0,b.jsx)(h.SelectItem,{value:a.id,children:a.name},a.id))})]}),ab.supplier&&B.find(a=>a.id===ab.supplier)&&(0,b.jsxs)("div",{className:"mt-2 p-2 rounded bg-white/5 border border-white/10 text-xs text-white/70",children:[(0,b.jsx)("div",{children:B.find(a=>a.id===ab.supplier)?.name}),(0,b.jsx)("div",{children:B.find(a=>a.id===ab.supplier)?.phone}),B.find(a=>a.id===ab.supplier)?.email&&(0,b.jsx)("div",{children:B.find(a=>a.id===ab.supplier)?.email})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm text-white/60",children:"Description"}),(0,b.jsx)(f.Input,{value:ab.description,onChange:a=>ac({...ab,description:a.target.value}),className:"bg-white/5 border-white/10"})]})]}),(0,b.jsxs)(i.DialogFooter,{children:[(0,b.jsx)(e.Button,{variant:"outline",onClick:()=>Q(!1),children:"Cancel"}),(0,b.jsxs)(e.Button,{className:"bg-cyan-500 hover:bg-cyan-400",onClick:ae,children:[R?"Update":"Add"," Part"]})]})]})]})]})})}),(0,b.jsxs)(d.Card,{className:"bg-white/5 border-white/10",children:[(0,b.jsx)(d.CardHeader,{children:(0,b.jsx)(d.CardTitle,{className:"text-white flex items-center justify-between",children:(0,b.jsxs)("span",{className:"flex items-center gap-2",children:[(0,b.jsx)(l.Package,{className:"w-5 h-5 text-cyan-400"}),"Parts Inventory (",ad.length,")",am>0&&(0,b.jsxs)(g.Badge,{variant:"outline",className:"text-xs bg-yellow-500/20 text-yellow-400 border-yellow-500/40",children:["Low: ",am]})]})})}),(0,b.jsx)(d.CardContent,{children:0===ad.length?(0,b.jsx)("div",{className:"text-center py-8 text-white/40",children:0===z.length?"No parts in inventory yet":"No parts match your filters"}):(0,b.jsx)("div",{className:"space-y-3",children:ad.map(c=>{let d=0===c.quantity?{color:"bg-red-500/20 text-red-400",label:"Out of Stock"}:c.quantity<=c.minStock?{color:"bg-yellow-500/20 text-yellow-400",label:"Low Stock"}:{color:"bg-green-500/20 text-green-400",label:"In Stock"},f=aj(c),h=0===c.quantity||c.quantity<=c.minStock;return(0,b.jsxs)("div",{className:(0,v.cn)("flex items-center gap-4 p-4 rounded-lg bg-white/5 hover:bg-white/10 transition-colors border border-white/10",h&&(0===c.quantity?"ring-2 ring-red-500/40 border-red-500/30":"ring-2 ring-yellow-500/40 border-yellow-500/30")),children:[(0,b.jsx)("div",{className:"w-12 h-12 rounded-lg bg-cyan-500/10 flex items-center justify-center shrink-0",children:(0,b.jsx)(l.Package,{className:"w-6 h-6 text-cyan-400"})}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,b.jsx)("h4",{className:"font-medium text-white truncate",children:c.name}),(0,b.jsx)(g.Badge,{variant:"outline",className:"text-xs bg-white/5 border-white/10",children:c.sku||"No SKU"}),(0,b.jsx)(g.Badge,{variant:"outline",className:(0,v.cn)("text-xs",f.color),children:Number.isFinite(f.margin)?`${Math.round(f.margin)}%`:"â€”"})]}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-2 text-xs text-white/50",children:[(0,b.jsx)("span",{children:c.category}),(0,b.jsx)("span",{children:"â€¢"}),(0,b.jsx)("span",{children:c.brand}),c.location&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{children:"â€¢"}),(0,b.jsxs)("span",{children:["ðŸ“ ",c.location]})]}),c.supplier&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{children:"â€¢"}),(0,b.jsxs)("span",{children:["Supplier: ",B.find(a=>a.id===c.supplier)?.name||c.supplier]})]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("p",{className:"text-lg font-bold text-white",children:c.quantity}),(0,b.jsx)(g.Badge,{className:(0,v.cn)("text-xs",d.color),children:d.label})]}),(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(e.Button,{variant:"ghost",size:"icon",onClick:()=>ag(c.id,-1),className:"h-8 w-8 text-white/60 hover:text-white",children:"-"}),(0,b.jsx)(e.Button,{variant:"ghost",size:"icon",onClick:()=>ag(c.id,1),className:"h-8 w-8 text-white/60 hover:text-white",children:"+"})]}),a&&(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(e.Button,{variant:"ghost",size:"icon",onClick:()=>{$(c),aa(!0)},className:"h-8 w-8 text-white/60 hover:text-cyan-400",title:"View QR",children:(0,b.jsx)(s,{className:"w-4 h-4"})}),(0,b.jsx)(e.Button,{variant:"ghost",size:"icon",onClick:()=>{ac({name:c.name,sku:c.sku,category:c.category,brand:c.brand,compatibleDevices:c.compatibleDevices.join(", "),quantity:c.quantity,minStock:c.minStock,price:c.price,cost:c.cost,location:c.location,supplier:c.supplier,description:c.description}),S(c),U("details"),Q(!0)},className:"h-8 w-8 text-white/60 hover:text-cyan-400",children:(0,b.jsx)(o,{className:"w-4 h-4"})}),(0,b.jsx)(e.Button,{variant:"ghost",size:"icon",onClick:()=>af(c.id),className:"h-8 w-8 text-white/60 hover:text-red-400",children:(0,b.jsx)(p.Trash2,{className:"w-4 h-4"})})]})]})]},c.id)})})})]}),(0,b.jsx)(i.Dialog,{open:_,onOpenChange:aa,children:(0,b.jsxs)(i.DialogContent,{className:"bg-zinc-900 border-white/10 text-white max-w-sm",children:[(0,b.jsx)(i.DialogHeader,{children:(0,b.jsx)(i.DialogTitle,{children:"Part QR Code"})}),Z&&(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"text-sm text-white/60",children:[Z.name," â€¢ ",Z.sku||"No SKU"]}),(0,b.jsx)("div",{className:"flex items-center justify-center p-3 bg-white/5 rounded-lg border border-white/10",children:(0,b.jsx)("img",{alt:"QR Code",src:`https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(`${Z.id}|${Z.sku||""}`)}`,className:"rounded"})}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(e.Button,{variant:"outline",onClick:()=>window.print(),children:"Print"}),(0,b.jsx)(e.Button,{variant:"outline",onClick:()=>ag(Z.id,1),children:"Scan (Add 1)"})]})]})]})})]})}a.s(["PartsInventory",()=>y],34497)}];

//# sourceMappingURL=src_components_features_parts-inventory_tsx_39127b97._.js.map